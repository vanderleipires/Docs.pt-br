---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Introdução ao ASP.NET Web Pages - inserindo o banco de dados usando formulários | Microsoft Docs
author: tfitzmac
description: Este tutorial mostra como criar um formulário de entrada e, em seguida, insira os dados que você obtém do formulário em uma tabela de banco de dados quando você usa o ASP.NET Web Pages (...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/28/2015
ms.topic: article
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
ms.technology: dotnet-webpages
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: 41122b3bca5a3d3162a66be163642610b8349cc5
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37386401"
---
<a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="a7d19-103">Introdução ao ASP.NET Web Pages - inserindo o banco de dados usando formulários</span><span class="sxs-lookup"><span data-stu-id="a7d19-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>
====================
<span data-ttu-id="a7d19-104">por [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="a7d19-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="a7d19-105">Este tutorial mostra como criar um formulário de entrada e, em seguida, insira os dados que você obtém do formulário em uma tabela de banco de dados quando você usa o ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="a7d19-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="a7d19-106">Ele pressupõe que você tenha concluído a série por meio [Noções básicas de formulários em HTML em páginas da Web do ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="a7d19-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="a7d19-107">O que você aprenderá:</span><span class="sxs-lookup"><span data-stu-id="a7d19-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="a7d19-108">Mais informações sobre como processar formulários de entrada.</span><span class="sxs-lookup"><span data-stu-id="a7d19-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="a7d19-109">Como adicionar dados (insert) em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="a7d19-110">Como certificar-se de que os usuários tiverem inserido um valor obrigatório em um formulário (como validar a entrada do usuário).</span><span class="sxs-lookup"><span data-stu-id="a7d19-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="a7d19-111">Como exibir erros de validação.</span><span class="sxs-lookup"><span data-stu-id="a7d19-111">How to display validation errors.</span></span>
> - <span data-ttu-id="a7d19-112">Como alternar para outra página da página atual.</span><span class="sxs-lookup"><span data-stu-id="a7d19-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="a7d19-113">Recursos/tecnologias abordadas:</span><span class="sxs-lookup"><span data-stu-id="a7d19-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="a7d19-114">O método `Database.Execute`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="a7d19-115">O SQL `Insert Into` instrução</span><span class="sxs-lookup"><span data-stu-id="a7d19-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="a7d19-116">O `Validation` auxiliar.</span><span class="sxs-lookup"><span data-stu-id="a7d19-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="a7d19-117">O método `Response.Redirect`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-117">The `Response.Redirect` method.</span></span>


## <a name="what-youll-build"></a><span data-ttu-id="a7d19-118">O que você vai criar</span><span class="sxs-lookup"><span data-stu-id="a7d19-118">What You'll Build</span></span>

<span data-ttu-id="a7d19-119">No tutorial anterior que mostrou como criar um banco de dados, você inseriu dados do banco de dados por meio da edição do banco de dados diretamente no WebMatrix, trabalhando na **banco de dados** espaço de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a7d19-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="a7d19-120">Na maioria dos aplicativos, que não é uma maneira prática para colocar dados no banco de dados, no entanto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="a7d19-121">Portanto, neste tutorial, você criará uma interface baseada na web que permite que você ou qualquer pessoa inserir dados e salvá-lo ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="a7d19-122">Você criará uma página onde você pode inserir novos filmes.</span><span class="sxs-lookup"><span data-stu-id="a7d19-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="a7d19-123">A página conterá um formulário de entrada que tem campos (caixas de texto) em que você pode inserir um título do filme, gênero e ano.</span><span class="sxs-lookup"><span data-stu-id="a7d19-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="a7d19-124">A página será semelhante a esta página:</span><span class="sxs-lookup"><span data-stu-id="a7d19-124">The page will look like this page:</span></span>

!['Adicionar filme' página no navegador](entering-data/_static/image1.png)

<span data-ttu-id="a7d19-126">As caixas de texto será HTML `<input>` elementos que irá procurar como essa marcação:</span><span class="sxs-lookup"><span data-stu-id="a7d19-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="a7d19-127">Criando o formulário de entrada básico</span><span class="sxs-lookup"><span data-stu-id="a7d19-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="a7d19-128">Crie uma página chamada *AddMovie.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a7d19-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="a7d19-129">Substitua o que está no arquivo com a marcação a seguir.</span><span class="sxs-lookup"><span data-stu-id="a7d19-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="a7d19-130">Substituir tudo. Você adicionará um bloco de código na parte superior em breve.</span><span class="sxs-lookup"><span data-stu-id="a7d19-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="a7d19-131">Este exemplo mostra o HTML típica para a criação de um formulário.</span><span class="sxs-lookup"><span data-stu-id="a7d19-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="a7d19-132">Ele usa `<input>` elementos para as caixas de texto e para o botão Enviar.</span><span class="sxs-lookup"><span data-stu-id="a7d19-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="a7d19-133">As legendas para as caixas de texto são criadas usando o padrão `<label>` elementos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="a7d19-134">O `<fieldset>` e `<legend>` elementos coloque uma caixa de BOM no formulário.</span><span class="sxs-lookup"><span data-stu-id="a7d19-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="a7d19-135">Observe que nessa página, o `<form>` usa o elemento `post` como o valor para o `method` atributo.</span><span class="sxs-lookup"><span data-stu-id="a7d19-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="a7d19-136">No tutorial anterior, você criou um formulário que é usado o `get` método.</span><span class="sxs-lookup"><span data-stu-id="a7d19-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="a7d19-137">Isso foi correto, porque embora o formulário enviado valores para o servidor, a solicitação não fez as alterações.</span><span class="sxs-lookup"><span data-stu-id="a7d19-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="a7d19-138">Tudo o que fazia era buscar dados de maneiras diferentes.</span><span class="sxs-lookup"><span data-stu-id="a7d19-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="a7d19-139">No entanto, nesta página você *serão* fazer alterações — você vai adicionar novos registros de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="a7d19-140">Portanto, esse formulário deve usar o `post` método.</span><span class="sxs-lookup"><span data-stu-id="a7d19-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="a7d19-141">(Para obter mais informações sobre a diferença entre `GET` e `POST` operações, consulte o[GET, POST e segurança do verbo HTTP](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) barra lateral no tutorial anterior.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="a7d19-142">Observe que cada caixa de texto tem um `name` elemento (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="a7d19-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="a7d19-143">Como você viu no tutorial anterior, esses nomes são importantes porque você deve ter esses nomes para que você possa obter a entrada do usuário mais tarde.</span><span class="sxs-lookup"><span data-stu-id="a7d19-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="a7d19-144">Você pode usar qualquer nome.</span><span class="sxs-lookup"><span data-stu-id="a7d19-144">You can use any names.</span></span> <span data-ttu-id="a7d19-145">Vale a pena usar nomes significativos que ajudam você a se lembrar de quais dados você está trabalhando com.</span><span class="sxs-lookup"><span data-stu-id="a7d19-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="a7d19-146">O `value` atributo de cada `<input>` elemento contém um pouco de código do Razor (por exemplo, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="a7d19-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="a7d19-147">Uma versão desse truque você aprendeu no tutorial anterior para preservar o valor inserido na caixa de texto (se houver) depois que o formulário foi enviado.</span><span class="sxs-lookup"><span data-stu-id="a7d19-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="a7d19-148">Obtendo os valores de formulário</span><span class="sxs-lookup"><span data-stu-id="a7d19-148">Getting the Form Values</span></span>

<span data-ttu-id="a7d19-149">Em seguida, você pode adicionar código que processa o formulário.</span><span class="sxs-lookup"><span data-stu-id="a7d19-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="a7d19-150">Na estrutura de tópicos, você fará o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a7d19-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="a7d19-151">Verifique se a página está sendo lançada (foi enviado).</span><span class="sxs-lookup"><span data-stu-id="a7d19-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="a7d19-152">Você deseja para seu código ser executado somente quando os usuários clicaram no botão, não quando a página é executada.</span><span class="sxs-lookup"><span data-stu-id="a7d19-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="a7d19-153">Obter os valores que o usuário inseriu nas caixas de texto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="a7d19-154">Nesse caso, porque o formulário está usando o `POST` verbo, você obtém os valores de formulário do `Request.Form` coleção.</span><span class="sxs-lookup"><span data-stu-id="a7d19-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="a7d19-155">Inserir os valores como um novo registro na *filmes* tabela de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="a7d19-156">Na parte superior do arquivo, adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="a7d19-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="a7d19-157">As primeiras linhas criam variáveis (`title`, `genre`, e `year`) para conter os valores das caixas de texto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="a7d19-158">A linha `if(IsPost)` torna-se de que as variáveis são definidas *apenas* quando os usuários clicarem o **Adicionar filme** botão — ou seja, quando o formulário foi postado.</span><span class="sxs-lookup"><span data-stu-id="a7d19-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="a7d19-159">Como você viu em um tutorial anterior, você obtém o valor de uma caixa de texto usando uma expressão como `Request.Form["name"]`, onde *nome* é o nome da `<input>` elemento.</span><span class="sxs-lookup"><span data-stu-id="a7d19-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="a7d19-160">Os nomes das variáveis (`title`, `genre`, e `year`) são arbitrárias.</span><span class="sxs-lookup"><span data-stu-id="a7d19-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="a7d19-161">Como os nomes que você atribui a `<input>` elementos, você pode chamá-los que desejar.</span><span class="sxs-lookup"><span data-stu-id="a7d19-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="a7d19-162">(Os nomes das variáveis não precisam corresponder os atributos de nome de `<input>` elementos no formulário.) Mas assim como acontece com o `<input>` elementos, é uma boa ideia usar nomes de variáveis que refletem os dados que eles contêm.</span><span class="sxs-lookup"><span data-stu-id="a7d19-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="a7d19-163">Quando você escreve o código, nomes consistentes tornam mais fácil de lembrar quais dados você está trabalhando.</span><span class="sxs-lookup"><span data-stu-id="a7d19-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="a7d19-164">Adicionando dados ao banco de dados</span><span class="sxs-lookup"><span data-stu-id="a7d19-164">Adding Data to the Database</span></span>

<span data-ttu-id="a7d19-165">No código bloquear você recém-adicionada, basta *dentro de* a chave de fechamento ( `}` ) do `if` bloquear (não apenas dentro do bloco de código), adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="a7d19-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="a7d19-166">Este exemplo é semelhante ao código usado em um tutorial anterior para busca e exibir os dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="a7d19-167">A linha que começa com `db =` abre o banco de dados, como antes e a próxima linha define uma instrução SQL, novamente como você viu antes.</span><span class="sxs-lookup"><span data-stu-id="a7d19-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="a7d19-168">No entanto, desta vez ele define um SQL `Insert Into` instrução.</span><span class="sxs-lookup"><span data-stu-id="a7d19-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="a7d19-169">O exemplo a seguir mostra a sintaxe geral do `Insert Into` instrução:</span><span class="sxs-lookup"><span data-stu-id="a7d19-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="a7d19-170">Em outras palavras, você especificar a tabela a ser inserido, em seguida, liste as colunas a ser inserido e, em seguida, lista os valores a serem inseridos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="a7d19-171">(Conforme observado anteriormente, SQL, não diferencia maiusculas de minúsculas, mas algumas pessoas capitalizar as palavras-chave para torná-lo mais fácil de ler o comando.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="a7d19-172">As colunas que você está inserindo já estão listadas no comando — `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="a7d19-173">A parte interessante é como obter os valores de caixas de texto para o `VALUES` faz parte do comando.</span><span class="sxs-lookup"><span data-stu-id="a7d19-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="a7d19-174">Em vez de valores reais, você verá `@0`, `@1`, e `@2`, é claro, que são espaços reservados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="a7d19-175">Quando você executa o comando (no `db.Execute` linha), você passa os valores que você obteve as caixas de texto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="a7d19-176">**Importante!**</span><span class="sxs-lookup"><span data-stu-id="a7d19-176">**Important!**</span></span> <span data-ttu-id="a7d19-177">Lembre-se de que a única maneira de você nunca deve incluir os dados inseridos online por um usuário em uma instrução SQL é usar espaços reservados, como você pode ver aqui (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="a7d19-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="a7d19-178">Se você concatenar a entrada do usuário em uma instrução SQL, você abre por conta própria a um ataque de injeção de SQL, conforme explicado em [Noções básicas de formulário em páginas da Web do ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251581) (tutorial anterior).</span><span class="sxs-lookup"><span data-stu-id="a7d19-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="a7d19-179">Ainda dentro de `if` blocos, adicione a seguinte linha após o `db.Execute` linha:</span><span class="sxs-lookup"><span data-stu-id="a7d19-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="a7d19-180">Depois que o novo filme foi inserido no banco de dados, esta linha você (redirecionamentos) salta para o *filmes* página para que você possa ver o filme que você acabou de digitar.</span><span class="sxs-lookup"><span data-stu-id="a7d19-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="a7d19-181">O `~` operador significa "" raiz"do site.</span><span class="sxs-lookup"><span data-stu-id="a7d19-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="a7d19-182">(O `~` operador geralmente funciona apenas em páginas ASP.NET, não em HTML.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="a7d19-183">O bloco de código completo é semelhante a este exemplo:</span><span class="sxs-lookup"><span data-stu-id="a7d19-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="a7d19-184">Teste o comando de inserção (até o momento)</span><span class="sxs-lookup"><span data-stu-id="a7d19-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="a7d19-185">Você não ainda terminou, mas agora é um bom momento para testar.</span><span class="sxs-lookup"><span data-stu-id="a7d19-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="a7d19-186">Na exibição de árvore de arquivos no WebMatrix, clique com botão direito do *AddMovie.cshtml* da página e, em seguida, clique em **iniciar no navegador**.</span><span class="sxs-lookup"><span data-stu-id="a7d19-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

!['Adicionar filme' página no navegador](entering-data/_static/image2.png)

<span data-ttu-id="a7d19-188">(Se você acabará com uma página diferente no navegador, certifique-se de que a URL é `http://localhost:nnnnn/AddMovie`), onde *nnnnn* é o número da porta que você está usando.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="a7d19-189">Você obteve uma página de erro?</span><span class="sxs-lookup"><span data-stu-id="a7d19-189">Did you get an error page?</span></span> <span data-ttu-id="a7d19-190">Nesse caso, leia com atenção e certifique-se de que o código parece exatamente o que estava listado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="a7d19-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="a7d19-191">Insira um filme no formulário &mdash; por exemplo, use "Cidadão Kane", "Drama" e "1941".</span><span class="sxs-lookup"><span data-stu-id="a7d19-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="a7d19-192">(Ou qualquer outro.) Em seguida, clique em **filme adicionar**.</span><span class="sxs-lookup"><span data-stu-id="a7d19-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="a7d19-193">Se tudo correr bem, você será redirecionado para o *filmes* página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="a7d19-194">Certifique-se de que o novo filme esteja listado.</span><span class="sxs-lookup"><span data-stu-id="a7d19-194">Make sure that your new movie is listed.</span></span>

![Página de filmes mostrando recentemente adicionada filme](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="a7d19-196">Validação de entrada do usuário</span><span class="sxs-lookup"><span data-stu-id="a7d19-196">Validating User Input</span></span>

<span data-ttu-id="a7d19-197">Volte para o *AddMovie* página ou executá-lo novamente.</span><span class="sxs-lookup"><span data-stu-id="a7d19-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="a7d19-198">Insira outro filme, mas desta vez, insira somente o título &mdash; por exemplo, digite "Entrando ' no the Rain".</span><span class="sxs-lookup"><span data-stu-id="a7d19-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="a7d19-199">Em seguida, clique em **filme adicionar**.</span><span class="sxs-lookup"><span data-stu-id="a7d19-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="a7d19-200">Você será redirecionado para o *filmes* página novamente.</span><span class="sxs-lookup"><span data-stu-id="a7d19-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="a7d19-201">Você pode encontrar o novo filme, mas ele está incompleto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-201">You can find the new movie, but it's incomplete.</span></span>

![Página de filmes mostrando novo filme que alguns valores está ausentes](entering-data/_static/image4.png)

<span data-ttu-id="a7d19-203">Quando você criou o *filmes* tabela, você explicitamente disse que nenhum dos campos pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a7d19-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="a7d19-204">Aqui, você tem um formulário de entrada para novos filmes e que está saindo campos em branco.</span><span class="sxs-lookup"><span data-stu-id="a7d19-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="a7d19-205">Que é um erro.</span><span class="sxs-lookup"><span data-stu-id="a7d19-205">That's an error.</span></span>

<span data-ttu-id="a7d19-206">Nesse caso, o banco de dados, na verdade, não geram (ou *lançar*) um erro.</span><span class="sxs-lookup"><span data-stu-id="a7d19-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="a7d19-207">Você não forneceu um gênero ou um ano, portanto, o código na *AddMovie* página tratado esses valores como chamados *cadeias de caracteres vazias*.</span><span class="sxs-lookup"><span data-stu-id="a7d19-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="a7d19-208">Quando o SQL `Insert Into` comando foi executado, os campos de gênero e ano não tinham dados úteis neles, mas eles não eram nulos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="a7d19-209">Obviamente, você não deseja permitir que os usuários a inserir informações sobre filmes metade vazio no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="a7d19-210">A solução é validar a entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="a7d19-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="a7d19-211">Inicialmente, a validação simplesmente garantirá que o usuário inseriu um valor para todos os campos (ou seja, que nenhuma delas contém uma cadeia de caracteres vazia).</span><span class="sxs-lookup"><span data-stu-id="a7d19-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="a7d19-212">**Cadeias de caracteres vazias e nulas**</span><span class="sxs-lookup"><span data-stu-id="a7d19-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="a7d19-213">Em programação, há uma distinção entre Noções diferentes de "sem valor".</span><span class="sxs-lookup"><span data-stu-id="a7d19-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="a7d19-214">Em geral, é um valor *nulo* se ele nunca foi definido ou inicializado de forma alguma.</span><span class="sxs-lookup"><span data-stu-id="a7d19-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="a7d19-215">Em contraste, uma variável que espera dados de caracteres (cadeias de caracteres) pode ser definida como um *cadeia de caracteres vazia*.</span><span class="sxs-lookup"><span data-stu-id="a7d19-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="a7d19-216">Nesse caso, o valor não é nulo. ele é apenas foi explicitamente definido como uma cadeia de caracteres cujo comprimento é zero.</span><span class="sxs-lookup"><span data-stu-id="a7d19-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="a7d19-217">Essas duas instruções mostram a diferença:</span><span class="sxs-lookup"><span data-stu-id="a7d19-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="a7d19-218">É um pouco mais complicado do que isso, mas o ponto importante é que `null` represente um tipo de estado indeterminado.</span><span class="sxs-lookup"><span data-stu-id="a7d19-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="a7d19-219">Agora e, em seguida, é importante compreender exatamente quando um valor é nulo e quando ele é apenas uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="a7d19-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="a7d19-220">No código para o *AddMovie* página, você obtém os valores das caixas de texto usando `Request.Form["title"]` e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a7d19-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="a7d19-221">Quando a página executa pela primeira vez (antes de você clicar no botão), o valor de `Request.Form["title"]` é nulo.</span><span class="sxs-lookup"><span data-stu-id="a7d19-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="a7d19-222">Mas quando você enviar o formulário `Request.Form["title"]` obtém o valor da `title` caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="a7d19-223">Não é óbvio, mas uma caixa de texto vazia não é nula. Ele apenas tem uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="a7d19-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="a7d19-224">Portanto, quando o código é executado em resposta ao botão clique, `Request.Form["title"]` tem uma cadeia de caracteres vazia em si.</span><span class="sxs-lookup"><span data-stu-id="a7d19-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="a7d19-225">Por que essa distinção é importante?</span><span class="sxs-lookup"><span data-stu-id="a7d19-225">Why is this distinction important?</span></span> <span data-ttu-id="a7d19-226">Quando você criou o *filmes* tabela, você explicitamente disse que nenhum dos campos pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="a7d19-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="a7d19-227">Mas aqui, você tem um formulário de entrada para novos filmes e que está saindo campos em branco.</span><span class="sxs-lookup"><span data-stu-id="a7d19-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="a7d19-228">Você seria razoável esperar o banco de dados reclamará quando você tentou salvar novos filmes que não têm valores para gênero ou ano.</span><span class="sxs-lookup"><span data-stu-id="a7d19-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="a7d19-229">Mas esse é o ponto &mdash; mesmo se você deixar essas caixas de texto em branco, os valores não nulos; elas estão cadeias de caracteres vazias.</span><span class="sxs-lookup"><span data-stu-id="a7d19-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="a7d19-230">Como resultado, você é capaz de salvar novos filmes no banco de dados com essas colunas vazias &mdash; , mas não nulo!</span><span class="sxs-lookup"><span data-stu-id="a7d19-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="a7d19-231">valores &mdash;.</span><span class="sxs-lookup"><span data-stu-id="a7d19-231">&mdash; values.</span></span> <span data-ttu-id="a7d19-232">Portanto, é necessário que certificar-se de que os usuários não enviar uma cadeia de caracteres vazia, o que pode ser feito por meio da validação de entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="a7d19-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>


### <a name="the-validation-helper"></a><span data-ttu-id="a7d19-233">O auxiliar de validação</span><span class="sxs-lookup"><span data-stu-id="a7d19-233">The Validation Helper</span></span>

<span data-ttu-id="a7d19-234">Páginas da Web ASP.NET inclui um auxiliar &mdash; as `Validation` auxiliar &mdash; que você pode usar para certificar-se de que os usuários insiram dados que atenda às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="a7d19-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="a7d19-235">O `Validation` auxiliar é um dos auxiliares que é interna para ASP.NET Web Pages, portanto, você não precisa instalá-lo como um pacote usando o NuGet, a maneira que você instalou o Gravatar auxiliar em um tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="a7d19-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="a7d19-236">Para validar a entrada do usuário, você fará o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a7d19-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="a7d19-237">Use o código para especificar que você deseja exigir valores nas caixas de texto na página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="a7d19-238">Coloque um teste no código para que as informações do filme seja adicionadas ao banco de dados somente se tudo for validado corretamente.</span><span class="sxs-lookup"><span data-stu-id="a7d19-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="a7d19-239">Adicione o código na marcação para exibir mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="a7d19-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="a7d19-240">No bloco de código a *AddMovie* de página, direita para cima na parte superior antes das declarações de variável, adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="a7d19-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="a7d19-241">Você chama `Validation.RequireField` uma vez para cada campo (`<input>` elemento) onde você deseja exigir uma entrada.</span><span class="sxs-lookup"><span data-stu-id="a7d19-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="a7d19-242">Você também pode adicionar uma mensagem de erro personalizada para cada chamada, como você vê aqui.</span><span class="sxs-lookup"><span data-stu-id="a7d19-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="a7d19-243">(Estamos variadas as mensagens apenas para mostrar que você pode colocar qualquer coisa que você deseja lá).</span><span class="sxs-lookup"><span data-stu-id="a7d19-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="a7d19-244">Se houver um problema, você deseja impedir que as novas informações do filme que está sendo inserido no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="a7d19-245">No `if(IsPost)` bloco, use `&&` (AND lógico) para adicionar outra condição que testa `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="a7d19-246">Quando você terminar, todo o `if(IsPost)` bloco se parece com este código:</span><span class="sxs-lookup"><span data-stu-id="a7d19-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="a7d19-247">Se não houver um erro de validação com qualquer um dos campos que você registrou usando o `Validation` auxiliar, o `Validation.IsValid` método retornará false.</span><span class="sxs-lookup"><span data-stu-id="a7d19-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="a7d19-248">E, nesse caso, nenhum código daquele bloco será executado, portanto, nenhuma entrada inválida de filme será inserida no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="a7d19-249">E, obviamente você não será redirecionado para o *filmes* página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="a7d19-250">O bloco de código completo, incluindo o código de validação, agora se parece com este exemplo:</span><span class="sxs-lookup"><span data-stu-id="a7d19-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="a7d19-251">Exibindo erros de validação</span><span class="sxs-lookup"><span data-stu-id="a7d19-251">Displaying Validation Errors</span></span>

<span data-ttu-id="a7d19-252">A última etapa é exibir qualquer mensagem de erro.</span><span class="sxs-lookup"><span data-stu-id="a7d19-252">The last step is to display any error messages.</span></span> <span data-ttu-id="a7d19-253">Você pode exibir as mensagens individuais para cada erro de validação, ou você pode exibir um resumo ou ambos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="a7d19-254">Para este tutorial, você fará ambos para que você possa ver como ele funciona.</span><span class="sxs-lookup"><span data-stu-id="a7d19-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="a7d19-255">Ao lado de cada `<input>` elemento que você está validando, a chamada a `Html.ValidationMessage` método e passe o nome da `<input>` elemento você está validando.</span><span class="sxs-lookup"><span data-stu-id="a7d19-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="a7d19-256">Você coloca o `Html.ValidationMessage` à direita do método onde você deseja que a mensagem de erro seja exibida.</span><span class="sxs-lookup"><span data-stu-id="a7d19-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="a7d19-257">Quando a página é executada, o `Html.ValidationMessage` método renderiza um `<span>` elemento aonde o erro de validação.</span><span class="sxs-lookup"><span data-stu-id="a7d19-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="a7d19-258">(Se não houver nenhum erro, o `<span>` elemento é processado, mas não há nenhum texto nele.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="a7d19-259">Altere a marcação na página de modo que ela inclua uma `Html.ValidationMessage` método para cada um dos três `<input>` elementos na página, como neste exemplo:</span><span class="sxs-lookup"><span data-stu-id="a7d19-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="a7d19-260">Para ver como funciona o resumo, também adicione a seguinte marcação e código logo após o `<h1>Add a Movie</h1>` elemento na página:</span><span class="sxs-lookup"><span data-stu-id="a7d19-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="a7d19-261">Por padrão, o `Html.ValidationSummary` método exibe todas as mensagens de validação em uma lista (uma `<ul>` elemento que está dentro de um `<div>` elemento).</span><span class="sxs-lookup"><span data-stu-id="a7d19-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="a7d19-262">Assim como acontece com o `Html.ValidationMessage` método, a marcação para o resumo de validação é sempre renderizada; se não houver nenhum erro, nenhum item de lista é renderizados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="a7d19-263">O resumo pode ser uma maneira alternativa de exibir mensagens de validação em vez de por meio de `Html.ValidationMessage` método para exibir cada erro de campo específicos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="a7d19-264">Ou você pode usar um resumo e detalhes.</span><span class="sxs-lookup"><span data-stu-id="a7d19-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="a7d19-265">Ou você pode usar o `Html.ValidationSummary` método para exibir um erro genérico e, em seguida, usar individuais `Html.ValidationMessage` chamadas para exibir detalhes.</span><span class="sxs-lookup"><span data-stu-id="a7d19-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="a7d19-266">A página concluída agora se parece com este exemplo:</span><span class="sxs-lookup"><span data-stu-id="a7d19-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="a7d19-267">Isso é tudo.</span><span class="sxs-lookup"><span data-stu-id="a7d19-267">That's it.</span></span> <span data-ttu-id="a7d19-268">Agora você pode testar a página pela adição de um filme, mas omitindo um ou mais dos campos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="a7d19-269">Quando você fizer isso, consulte o seguinte erro de exibição:</span><span class="sxs-lookup"><span data-stu-id="a7d19-269">When you do, you see the following error display:</span></span>

![Adicionar página de filme mostrando mensagens de erro de validação](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="a7d19-271">As mensagens de erro de validação de definição de estilo</span><span class="sxs-lookup"><span data-stu-id="a7d19-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="a7d19-272">Você pode ver que há mensagens de erro, mas eles não realmente se destacam muito bem.</span><span class="sxs-lookup"><span data-stu-id="a7d19-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="a7d19-273">Há uma maneira fácil de definir o estilo de mensagens de erro, no entanto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="a7d19-274">Para definir o estilo de mensagens de erro individuais que são exibidas pelo `Html.ValidationMessage`, crie uma classe de estilo CSS denominada `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="a7d19-275">Para definir a aparência para o resumo de validação, crie uma classe de estilo CSS chamada `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="a7d19-276">Para ver como essa técnica funciona, adicione uma `<style>` elemento dentro do `<head>` seção da página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="a7d19-277">Em seguida, definir classes de estilo nomeadas `field-validation-error` e `validation-summary-errors` que contêm as seguintes regras:</span><span class="sxs-lookup"><span data-stu-id="a7d19-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="a7d19-278">Normalmente você provavelmente seria colocar informações de estilo em um separado *. CSS* arquivo, mas para manter a simplicidade pode colocá-los na página por enquanto.</span><span class="sxs-lookup"><span data-stu-id="a7d19-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="a7d19-279">(Posteriormente neste conjunto de tutoriais, você moverá as regras de CSS para um separado *. CSS* arquivo.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="a7d19-280">Se não houver um erro de validação, o `Html.ValidationMessage` método renderiza um `<span>` elemento inclui `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="a7d19-281">Adicionando uma definição de estilo para essa classe, você pode configurar a aparência a mensagem.</span><span class="sxs-lookup"><span data-stu-id="a7d19-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="a7d19-282">Se houver erros, o `ValidationSummary` método processa da mesma forma dinamicamente o atributo `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="a7d19-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="a7d19-283">Execute novamente a página e deliberadamente deixe alguns dos campos.</span><span class="sxs-lookup"><span data-stu-id="a7d19-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="a7d19-284">Os erros agora são mais perceptíveis.</span><span class="sxs-lookup"><span data-stu-id="a7d19-284">The errors are now more noticeable.</span></span> <span data-ttu-id="a7d19-285">(Na verdade, eles são houver abuso, mas que é apenas para mostrar o que você pode fazer.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Adicionar página de filme mostrando erros de validação que tem sido criado o estilo](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="a7d19-287">Adicionar um Link para a página de filmes</span><span class="sxs-lookup"><span data-stu-id="a7d19-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="a7d19-288">Uma etapa final é tornar fácil obter o *AddMovie* página da listagem de filmes original.</span><span class="sxs-lookup"><span data-stu-id="a7d19-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="a7d19-289">Abra o *filmes* página novamente.</span><span class="sxs-lookup"><span data-stu-id="a7d19-289">Open the *Movies* page again.</span></span> <span data-ttu-id="a7d19-290">Após o fechamento `</div>` marca que segue o `WebGrid` auxiliar, adicione a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="a7d19-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="a7d19-291">Como você viu antes, o ASP.NET interpreta o `~` operador como a raiz do site.</span><span class="sxs-lookup"><span data-stu-id="a7d19-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="a7d19-292">Você não precisa usar o `~` operador; você pode usar a marcação `<a href="./AddMovie">Add a movie</a>` ou alguma outra maneira para definir o caminho que entende de HTML.</span><span class="sxs-lookup"><span data-stu-id="a7d19-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="a7d19-293">Mas o `~` operador é uma boa abordagem geral quando você cria links para páginas do Razor, pois ele torna o site mais flexíveis — se você mover a página atual para uma subpasta, o link ainda irá para o *AddMovie* página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="a7d19-294">(Lembre-se de que o `~` operador funciona apenas *. cshtml* páginas.</span><span class="sxs-lookup"><span data-stu-id="a7d19-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="a7d19-295">ASP.NET entende, mas não é HTML padrão.)</span><span class="sxs-lookup"><span data-stu-id="a7d19-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="a7d19-296">Quando terminar, execute as *filmes* página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="a7d19-297">Ele será semelhante a esta página:</span><span class="sxs-lookup"><span data-stu-id="a7d19-297">It will look like this page:</span></span>

![Página de filmes com link para a página 'Adicionar filmes'](entering-data/_static/image7.png)

<span data-ttu-id="a7d19-299">Clique o **adicionar um filme** link para certificar-se de que ele vai para o *AddMovie* página.</span><span class="sxs-lookup"><span data-stu-id="a7d19-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="a7d19-300">Próximo</span><span class="sxs-lookup"><span data-stu-id="a7d19-300">Coming Up Next</span></span>

<span data-ttu-id="a7d19-301">No próximo tutorial, você aprenderá a permitir aos usuários editar dados que já estão no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a7d19-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="a7d19-302">Listagem completa para a página AddMovie</span><span class="sxs-lookup"><span data-stu-id="a7d19-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="a7d19-303">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="a7d19-303">Additional Resources</span></span>

- [<span data-ttu-id="a7d19-304">Introdução à programação Web do ASP.NET usando a sintaxe Razor</span><span class="sxs-lookup"><span data-stu-id="a7d19-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="a7d19-305">[Inserir na instrução SQL](http://www.w3schools.com/sql/sql_insert.asp) no site W3Schools</span><span class="sxs-lookup"><span data-stu-id="a7d19-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="a7d19-306">[Validação de entrada do usuário na Web ASP.NET de Sites de páginas](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="a7d19-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="a7d19-307">Para obter mais informações sobre como trabalhar com o `Validation` auxiliar.</span><span class="sxs-lookup"><span data-stu-id="a7d19-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a7d19-308">[Anterior](form-basics.md)
> [Próximo](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="a7d19-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
