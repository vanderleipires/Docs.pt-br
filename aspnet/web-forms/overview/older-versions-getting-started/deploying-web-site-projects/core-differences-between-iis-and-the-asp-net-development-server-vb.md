---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-vb
title: "Principais diferenças entre o IIS e o servidor de desenvolvimento do ASP.NET (VB) | Microsoft Docs"
author: rick-anderson
description: "Ao testar um aplicativo ASP.NET local, a probabilidade é que você estiver usando o servidor de Web de desenvolvimento do ASP.NET. No entanto, o site de produção é provavelmente pow..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/01/2009
ms.topic: article
ms.assetid: 090e9205-52f3-4d72-ae31-44775b8b8421
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 4fb0b71792422a75efa5d936ffc7b88a8ec19a57
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/10/2017
---
<a name="core-differences-between-iis-and-the-aspnet-development-server-vb"></a><span data-ttu-id="20916-104">Principais diferenças entre o IIS e o servidor de desenvolvimento do ASP.NET (VB)</span><span class="sxs-lookup"><span data-stu-id="20916-104">Core Differences Between IIS and the ASP.NET Development Server (VB)</span></span>
====================
<span data-ttu-id="20916-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="20916-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="20916-106">[Baixar o código](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_VB.zip) ou [baixar PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="20916-106">[Download Code](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_VB.zip) or [Download PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_vb.pdf)</span></span>

> <span data-ttu-id="20916-107">Ao testar um aplicativo ASP.NET local, a probabilidade é que você estiver usando o servidor de Web de desenvolvimento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-107">When testing an ASP.NET application locally, chances are you are using the ASP.NET Development Web Server.</span></span> <span data-ttu-id="20916-108">No entanto, o site de produção é provavelmente IIS potência.</span><span class="sxs-lookup"><span data-stu-id="20916-108">However, the production website is most likely powered IIS.</span></span> <span data-ttu-id="20916-109">Há algumas diferenças entre como esses servidores web manipulam solicitações, e essas diferenças podem ter consequências importantes.</span><span class="sxs-lookup"><span data-stu-id="20916-109">There are some differences between how these web servers handle requests, and these differences can have important consequences.</span></span> <span data-ttu-id="20916-110">Este tutorial explora algumas das diferenças mais germane.</span><span class="sxs-lookup"><span data-stu-id="20916-110">This tutorial explores some of the more germane differences.</span></span>


## <a name="introduction"></a><span data-ttu-id="20916-111">Introdução</span><span class="sxs-lookup"><span data-stu-id="20916-111">Introduction</span></span>

<span data-ttu-id="20916-112">Sempre que um usuário acessa um aplicativo ASP.NET seu navegador envia uma solicitação para o site.</span><span class="sxs-lookup"><span data-stu-id="20916-112">Whenever a user visits an ASP.NET application his browser sends a request to the website.</span></span> <span data-ttu-id="20916-113">Essa solicitação é obtida pelo software do servidor web, que coordena com o tempo de execução do ASP.NET para gerar e retornar o conteúdo para o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="20916-113">That request is picked up by the web server software, which coordinates with the ASP.NET runtime to generate and return the content for the requested resource.</span></span> <span data-ttu-id="20916-114">O[**,** nternet **,** informações **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) são um conjunto de serviços que fornecem a funcionalidade comum baseado na Internet para Servidores do Windows.</span><span class="sxs-lookup"><span data-stu-id="20916-114">The[**I** nternet **I** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) are a suite of services that provide common Internet-based functionality for Windows servers.</span></span> <span data-ttu-id="20916-115">O IIS é o servidor web mais comumente usadas para aplicativos ASP.NET em ambientes de produção; mais provável é que o software do servidor web que está sendo usado por seu provedor de host da web para servir ao aplicativo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-115">IIS is the most commonly used web server for ASP.NET applications in production environments; it's most likely the web server software being used by your web host provider to serve your ASP.NET application.</span></span> <span data-ttu-id="20916-116">O IIS também pode ser usado como o software do servidor web no ambiente de desenvolvimento, embora isso envolve a instalação do IIS e configurá-lo adequadamente.</span><span class="sxs-lookup"><span data-stu-id="20916-116">IIS can also be used as the web server software in the development environment, although this entails installing IIS and properly configuring it.</span></span>


<span data-ttu-id="20916-117">O servidor de desenvolvimento ASP.NET é uma opção de servidor da web alternativo para o ambiente de desenvolvimento. Ele acompanha e está integrado ao Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="20916-117">The ASP.NET Development Server is an alternative web server option for the development environment; it ships with and is integrated into Visual Studio.</span></span> <span data-ttu-id="20916-118">A menos que o aplicativo web foi configurado para usar o IIS, o ASP.NET Development Server é iniciado automaticamente e usado como o servidor web na primeira vez que você visita uma página da web no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="20916-118">Unless the web application has been configured to use IIS, the ASP.NET Development Server is automatically started and used as the web server the first time you visit a web page from within Visual Studio.</span></span> <span data-ttu-id="20916-119">Os aplicativos da web de demonstração criado novamente o [ *determinar quais arquivos precisam ser implantados* ](determining-what-files-need-to-be-deployed-vb.md) tutorial foram ambos os aplicativos da web com base em sistema de arquivo que não foram configurados para usar o IIS.</span><span class="sxs-lookup"><span data-stu-id="20916-119">The demo web applications we created back in the [*Determining What Files Need to Be Deployed*](determining-what-files-need-to-be-deployed-vb.md) tutorial were both file system-based web applications that were not configured to use IIS.</span></span> <span data-ttu-id="20916-120">Portanto, ao visitar um desses sites de dentro do Visual Studio o ASP.NET Development Server é usado.</span><span class="sxs-lookup"><span data-stu-id="20916-120">Therefore, when visiting either of these websites from within Visual Studio the ASP.NET Development Server is used.</span></span>

<span data-ttu-id="20916-121">Em um mundo perfeito, ambientes de desenvolvimento e produção seria idênticos.</span><span class="sxs-lookup"><span data-stu-id="20916-121">In a perfect world the development and production environments would be identical.</span></span> <span data-ttu-id="20916-122">No entanto, conforme abordado no tutorial anterior não é incomum para ambientes com configurações diferentes.</span><span class="sxs-lookup"><span data-stu-id="20916-122">However, as we discussed in the preceding tutorial it is not uncommon for the environments to have differing configuration settings.</span></span> <span data-ttu-id="20916-123">Usar o software do servidor web diferentes nos ambientes adiciona outra variável que deve ser levado em consideração durante a implantação de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="20916-123">Using different web server software in the environments adds another variable that must be taken into consideration when deploying an application.</span></span> <span data-ttu-id="20916-124">Este tutorial aborda as principais diferenças entre o IIS e o servidor de desenvolvimento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-124">This tutorial covers the key differences between IIS and the ASP.NET Development Server.</span></span> <span data-ttu-id="20916-125">Devido a essas diferenças, há situações em que o código que é executado sem falhas no ambiente de desenvolvimento lança uma exceção ou se comporta de maneira diferente quando executado em produção.</span><span class="sxs-lookup"><span data-stu-id="20916-125">Because of these differences there are scenarios where code that runs flawlessly in the development environment throws an exception or behaves differently when executed in production.</span></span>

## <a name="security-context-differences"></a><span data-ttu-id="20916-126">Diferenças de contexto de segurança</span><span class="sxs-lookup"><span data-stu-id="20916-126">Security Context Differences</span></span>

<span data-ttu-id="20916-127">Sempre que o software do servidor web manipula uma solicitação de entrada associa essa solicitação com um contexto de segurança específico.</span><span class="sxs-lookup"><span data-stu-id="20916-127">Whenever the web server software handles an incoming request it associates that request with a particular security context.</span></span> <span data-ttu-id="20916-128">Essas informações de contexto de segurança são usadas pelo sistema operacional para determinar quais ações são permitidas pela solicitação.</span><span class="sxs-lookup"><span data-stu-id="20916-128">This security context information is used by the operating system to determine what actions are permissible by the request.</span></span> <span data-ttu-id="20916-129">Por exemplo, uma página ASP.NET pode incluir o código que faz algumas mensagens de um arquivo no disco.</span><span class="sxs-lookup"><span data-stu-id="20916-129">For example, an ASP.NET page might include code that logs some message to a file on disk.</span></span> <span data-ttu-id="20916-130">Para esta página do ASP.NET para ser executada sem erro, o contexto de segurança deve ter as permissões de nível de sistema de arquivos, ou seja, permissões no arquivo de gravação.</span><span class="sxs-lookup"><span data-stu-id="20916-130">In order for this ASP.NET page to execute without error, the security context must have the appropriate file system-level permissions, namely write permissions on that file.</span></span>

<span data-ttu-id="20916-131">O ASP.NET Development Server associa as solicitações de entrada com o contexto de segurança do usuário conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="20916-131">The ASP.NET Development Server associates incoming requests with the security context of the currently logged on user.</span></span> <span data-ttu-id="20916-132">Se você estiver conectado à área de trabalho como um administrador, as páginas ASP.NET servidas pelo servidor de desenvolvimento ASP.NET terá os mesmos direitos de acesso como administrador.</span><span class="sxs-lookup"><span data-stu-id="20916-132">If you are logged on to your desktop as an administrator, then the ASP.NET pages served by the ASP.NET Development Server will have the same access rights as an administrator.</span></span> <span data-ttu-id="20916-133">No entanto, solicitações ASP.NET tratadas pelo IIS estão associadas com uma conta de computador específico.</span><span class="sxs-lookup"><span data-stu-id="20916-133">However, ASP.NET requests handled by IIS are associated with a specific machine account.</span></span> <span data-ttu-id="20916-134">Por padrão, a conta de serviço de rede do computador é usada pelo IIS versões 6 e 7, embora seu provedor de host da web pode ter configurado uma conta exclusiva para cada cliente.</span><span class="sxs-lookup"><span data-stu-id="20916-134">By default, the Network Service machine account is used by IIS versions 6 and 7, although your web host provider may have configured a unique account for each customer.</span></span> <span data-ttu-id="20916-135">Além disso, o provedor de host da web provavelmente concedeu permissões limitadas a essa conta de computador.</span><span class="sxs-lookup"><span data-stu-id="20916-135">What's more, your web host provider has likely given limited permissions to this machine account.</span></span> <span data-ttu-id="20916-136">O resultado é que você pode ter páginas da web que é executada sem erro no ambiente de desenvolvimento, mas gera exceções relacionadas à autorização quando hospedados no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="20916-136">The net result is that you may have web pages that execute without error in the development environment, but generate authorization-related exceptions when hosted in the production environment.</span></span>

<span data-ttu-id="20916-137">Para mostrar esse tipo de erro na ação que criei uma página no site revisões de livros que cria um arquivo no disco que armazena a data e a hora mais recente alguém exibido o *ensinar por conta própria ASP.NET 3.5 nas 24 horas* examinar.</span><span class="sxs-lookup"><span data-stu-id="20916-137">To show this type of error in action I've created a page in the Book Reviews website that creates a file on disk that stores the most recent date and time someone viewed the *Teach Yourself ASP.NET 3.5 in 24 Hours* review.</span></span> <span data-ttu-id="20916-138">Para acompanhar, abra o `~/Tech/TYASP35.aspx` página e adicione o seguinte código para o `Page_Load` manipulador de eventos:</span><span class="sxs-lookup"><span data-stu-id="20916-138">To follow along, open the `~/Tech/TYASP35.aspx` page and add the following code to the `Page_Load` event handler:</span></span>

[!code-vb[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample1.vb)]

> [!NOTE]
> <span data-ttu-id="20916-139">O [ `File.WriteAllText` método](https://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx) cria um novo arquivo se ele não existe e, em seguida, grava o conteúdo especificado.</span><span class="sxs-lookup"><span data-stu-id="20916-139">The [`File.WriteAllText` method](https://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx) creates a new file if it does not exist and then writes the specified contents to it.</span></span> <span data-ttu-id="20916-140">Se o arquivo já existir, seu conteúdo existente será substituído.</span><span class="sxs-lookup"><span data-stu-id="20916-140">If the file already exists, it's existing content is overwritten.</span></span>


<span data-ttu-id="20916-141">Em seguida, visite o *ensinar por conta própria ASP.NET 3.5 nas 24 horas* página de revisão de catálogo no ambiente de desenvolvimento usando o ASP.NET Development Server.</span><span class="sxs-lookup"><span data-stu-id="20916-141">Next, visit the *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page in the development environment using the ASP.NET Development Server.</span></span> <span data-ttu-id="20916-142">Supondo que você está conectado em seu computador com uma conta que tenha as permissões adequadas para criar e modificar um arquivo de texto na web o diretório de raiz do aplicativo a revisão de catálogo aparece o mesmo de antes, mas toda vez que a página for visitada a data e hora e do usuário  Endereço IP é armazenado no `LastTYASP35Access.txt` arquivo.</span><span class="sxs-lookup"><span data-stu-id="20916-142">Assuming that you are logged on to your computer with an account that has adequate permissions to create and modify a text file in the web application's root directory the book review appears the same as before, but each time the page is visited the date and time and user's IP address is stored in the `LastTYASP35Access.txt` file.</span></span> <span data-ttu-id="20916-143">Aponte seu navegador para este arquivo. Você deve ver uma mensagem semelhante à mostrada na Figura 1.</span><span class="sxs-lookup"><span data-stu-id="20916-143">Point your browser to this file; you should see a message similar to the one shown in Figure 1.</span></span>


<span data-ttu-id="20916-144">[![O arquivo de texto contém a última data e hora a revisão de catálogo foi visitada&lt;](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="20916-144">[![The Text File Contains the Last Date and Time the Book Review was Visited&lt;](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="20916-145">**Figura 1**: O arquivo de texto contém a última data e hora a revisão de catálogo foi visitada ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="20916-145">**Figure 1**: The Text File Contains the Last Date and Time the Book Review was Visited([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image3.png))</span></span>


<span data-ttu-id="20916-146">Implantar o aplicativo web para a produção e, em seguida, visite hospedado *ensinar por conta própria ASP.NET 3.5 nas 24 horas* página de revisão de catálogo.</span><span class="sxs-lookup"><span data-stu-id="20916-146">Deploy the web application to production and then visit the hosted *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page.</span></span> <span data-ttu-id="20916-147">Neste ponto você deve ver a página de revisão do catálogo como normal ou a mensagem de erro mostrado na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="20916-147">At this point you should either see the book review page as normal or the error message shown in Figure 2.</span></span> <span data-ttu-id="20916-148">Alguns provedores de host web conceder permissões de gravação para a conta da máquina ASP.NET anônima, nesse caso a página funcionará sem erro.</span><span class="sxs-lookup"><span data-stu-id="20916-148">Some web host providers grant write permissions to the anonymous ASP.NET machine account, in which case the page will work without error.</span></span> <span data-ttu-id="20916-149">Se, no entanto, o provedor de host web proíbe o acesso de gravação para a conta anônima então um [ `UnauthorizedAccessException` exceção](https://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx) é gerado quando o `TYASP35.aspx` página tenta gravar a data e hora atuais para o `LastTYASP35Access.txt` arquivo.</span><span class="sxs-lookup"><span data-stu-id="20916-149">If, however, your web host provider prohibits write access for the anonymous account then an [`UnauthorizedAccessException` exception](https://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx) is raised when the `TYASP35.aspx` page attempts to write the current date and time to the `LastTYASP35Access.txt` file.</span></span>


<span data-ttu-id="20916-150">[![A conta de computador padrão usada pelo IIS não tem permissões para gravar no sistema de arquivos](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="20916-150">[![The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="20916-151">**Figura 2**: O padrão máquina a conta usada pelo IIS Does não tem permissões para gravação no sistema de arquivos ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="20916-151">**Figure 2**: The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image6.png))</span></span>


<span data-ttu-id="20916-152">A boa notícia é que a maioria dos provedores de host da web tenham algum tipo de ferramenta de permissões que permite que você especifique as permissões do sistema de arquivos em seu site.</span><span class="sxs-lookup"><span data-stu-id="20916-152">The good news is that most web host providers have some sort of permissions tool that allows you to specify file system permissions in your website.</span></span> <span data-ttu-id="20916-153">Conceda o acesso de gravação de conta ASP.NET anônimo para o diretório raiz e, depois, revise a página de revisão do catálogo.</span><span class="sxs-lookup"><span data-stu-id="20916-153">Grant the anonymous ASP.NET account write access to the root directory and then revisit the book review page.</span></span> <span data-ttu-id="20916-154">(Se necessário, entre em contato com seu provedor de host da web para obter assistência sobre como conceder permissões de gravação para a conta padrão do ASP.NET.) Neste momento, a página deve carregar sem erro e o `LastTYASP35Access.txt` arquivo deve ser criado com êxito.</span><span class="sxs-lookup"><span data-stu-id="20916-154">(If needed, contact your web host provider for assistance on how to grant write permissions to the default ASP.NET account.) This time the page should load without error and the `LastTYASP35Access.txt` file should be created successfully.</span></span>

<span data-ttu-id="20916-155">O take imediatamente aqui é que, como o ASP.NET Development Server opera em um contexto de segurança diferente que o IIS, é possível que as páginas ASP.NET que ler ou gravar em um sistema de arquivos, ler ou gravar para o Log de eventos do Windows, ou ler ou gravar para o Windows  registro será funcionem como esperado em desenvolvimento, mas geram exceções quando estiver em produção.</span><span class="sxs-lookup"><span data-stu-id="20916-155">The take away here is that because the ASP.NET Development Server operates under a different security context than IIS, it is possible that your ASP.NET pages that read or write to the file system, read from or write to the Windows Event Log, or read or write to the Windows registry will work as expected on development but generate exceptions when on production.</span></span> <span data-ttu-id="20916-156">Ao criar um aplicativo web que será implantado em um ambiente de hospedagem de web compartilhado, não ler ou gravar no Log de eventos ou o registro do Windows.</span><span class="sxs-lookup"><span data-stu-id="20916-156">When building a web application that will be deployed to a shared web hosting environment, do not read or write to the Event Log or the Windows registry.</span></span> <span data-ttu-id="20916-157">Além disso, tome nota das páginas ASP.NET que ler ou gravar para o sistema de arquivos, você precisará conceder a leitura e gravação privilégios nas pastas apropriadas no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="20916-157">Also take note of any ASP.NET pages that read from or write to the file system as you may need to grant read and write privileges on the appropriate folders in the production environment.</span></span>

## <a name="differences-on-serving-static-content"></a><span data-ttu-id="20916-158">Diferenças em servir conteúdo estático</span><span class="sxs-lookup"><span data-stu-id="20916-158">Differences On Serving Static Content</span></span>

<span data-ttu-id="20916-159">Outra diferença principal entre o IIS e o servidor de desenvolvimento ASP.NET é como eles tratam as solicitações de conteúdo estático.</span><span class="sxs-lookup"><span data-stu-id="20916-159">Another core difference between IIS and the ASP.NET Development Server is how they handle requests for static content.</span></span> <span data-ttu-id="20916-160">Cada solicitação que entra em ASP.NET Development Server, para uma página ASP.NET, uma imagem ou um arquivo JavaScript, é processada pelo tempo de execução do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-160">Every request that comes into the ASP.NET Development Server, whether for an ASP.NET page, an image, or a JavaScript file, is processed by the ASP.NET runtime.</span></span> <span data-ttu-id="20916-161">Por padrão, o IIS chama apenas o tempo de execução do ASP.NET quando uma solicitação vier de um recurso do ASP.NET, como uma página da web, um serviço Web e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="20916-161">By default, IIS only invokes the ASP.NET runtime when a request comes in for an ASP.NET resource, such as an ASP.NET web page, a Web Service, and so forth.</span></span> <span data-ttu-id="20916-162">Solicitações de conteúdo estático imagens, arquivos CSS, arquivos JavaScript, arquivos PDF, arquivos ZIP e assim por diante - são recuperadas pelo IIS sem o envolvimento do tempo de execução do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-162">Requests for static content - images, CSS files, JavaScript files, PDF files, ZIP files, and the like - are retrieved by IIS without the involvement of the ASP.NET runtime.</span></span> <span data-ttu-id="20916-163">(É possível instruir o IIS para trabalhar com o tempo de execução do ASP.NET ao servir conteúdo estático; consulte a seção "Executando a autenticação baseada em formulários e autenticação de URL em arquivos estáticos com o IIS 7" neste tutorial para obter mais informações.)</span><span class="sxs-lookup"><span data-stu-id="20916-163">(It is possible to instruct IIS to work with the ASP.NET runtime when serving static content; consult the "Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7" section in this tutorial for more information.)</span></span>

<span data-ttu-id="20916-164">O tempo de execução do ASP.NET realiza uma série de etapas para gerar o conteúdo solicitado, incluindo (identifica o solicitante) de autenticação e autorização (determinar se o solicitante tem permissão para exibir o conteúdo solicitado).</span><span class="sxs-lookup"><span data-stu-id="20916-164">The ASP.NET runtime performs a number of steps to generate the requested content, including authentication (identifying the requestor) and authorization (determining if the requestor has permission to view the requested content).</span></span> <span data-ttu-id="20916-165">É uma forma popular de autenticação *autenticação baseada em formulários*, no qual um usuário é identificado por inserir suas credenciais (geralmente um nome de usuário e senha) em caixas de texto em uma página da web.</span><span class="sxs-lookup"><span data-stu-id="20916-165">A popular form of authentication is *forms-based authentication*, in which a user is identified by entering their credentials - usually a username and password - into textboxes on a web page.</span></span> <span data-ttu-id="20916-166">Após validar suas credenciais, o site armazena um *tíquete de autenticação* cookies no navegador do usuário, que é enviado com cada solicitação subsequente para o site e é usado para autenticar o usuário.</span><span class="sxs-lookup"><span data-stu-id="20916-166">Upon validating their credentials, the website stores an *authentication ticket* cookie on the user's browser, which is sent with every subsequent request to the website and is what is used to authenticate the user.</span></span> <span data-ttu-id="20916-167">Além disso, é possível especificar *autorização de URL* regras que determinam o que os usuários podem ou não é possível acessar uma pasta específica.</span><span class="sxs-lookup"><span data-stu-id="20916-167">Moreover, it is possible to specify *URL authorization* rules that dictate what users can or cannot access a particular folder.</span></span> <span data-ttu-id="20916-168">Muitos sites ASP.NET usam autenticação baseada em formulários e autorização de URL para dar suporte a contas de usuário e definir as partes do site que são acessíveis apenas a usuários autenticados ou usuários que pertencem a uma determinada função.</span><span class="sxs-lookup"><span data-stu-id="20916-168">Many ASP.NET websites use forms-based authentication and URL authorization to support user accounts and to define portions of the site that are only accessible to authenticated users or users that belong to a certain role.</span></span>

> [!NOTE]
> <span data-ttu-id="20916-169">Para uma verificação completa do ASP. Autenticação baseada em formulários do NET, autorização de URL e outros recursos relacionados à conta de usuário, certifique-se de check-out meu [tutoriais de segurança de site](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="20916-169">For a thorough examination of ASP.NET's forms-based authentication, URL authorization, and other user account-related features, be sure to check out my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>


<span data-ttu-id="20916-170">Considere a possibilidade de um site que oferece suporte a contas de usuário usando a autorização baseada em formulários e tem uma pasta, usando a autorização de URL, está configurada para permitir que somente usuários autenticados.</span><span class="sxs-lookup"><span data-stu-id="20916-170">Consider a website that supports user accounts using forms-based authorization and has a folder that, using URL authorization, is configured to only allow authenticated users.</span></span> <span data-ttu-id="20916-171">Imagine que essa pasta contém páginas ASP.NET e arquivos PDF e que a intenção é que somente usuários autenticados podem exibir esses arquivos PDF.</span><span class="sxs-lookup"><span data-stu-id="20916-171">Imagine that this folder contains ASP.NET pages and PDF files and that the intent is that only authenticated users can view these PDF files.</span></span>

<span data-ttu-id="20916-172">O que acontece se um visitante tenta exibir um desses arquivos PDF digitando a URL diretamente na barra de endereço do seu navegador?</span><span class="sxs-lookup"><span data-stu-id="20916-172">What happens if a visitor attempts to view one of these PDF files by entering the URL directly in his browser's Address bar?</span></span> <span data-ttu-id="20916-173">Para descobrir, vamos criar uma nova pasta no site revisões de livros, adicionar alguns arquivos PDF e configurar o site para usar a autorização de URL para impedir que usuários anônimos de visita a esta pasta.</span><span class="sxs-lookup"><span data-stu-id="20916-173">To find out, let's create a new folder in the Book Reviews site, add some PDF files, and configure the site to use URL authorization to prohibit anonymous users from visiting this folder.</span></span> <span data-ttu-id="20916-174">Se você baixar o aplicativo de demonstração, você verá que que criei uma pasta chamada `PrivateDocs` e adicionado um PDF do meu [tutoriais de segurança de site](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (como ajuste!).</span><span class="sxs-lookup"><span data-stu-id="20916-174">If you download the demo application you'll see that I created a folder called `PrivateDocs` and added a PDF from my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (how fitting!).</span></span> <span data-ttu-id="20916-175">O `PrivateDocs` pasta também contém um `Web.config` arquivo que especifica as regras de autorização de URL para negar a usuários anônimos:</span><span class="sxs-lookup"><span data-stu-id="20916-175">The `PrivateDocs` folder also contains a `Web.config` file that specifies the URL authorization rules to deny anonymous users:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample2.xml)]

<span data-ttu-id="20916-176">Por fim, configurei o aplicativo web para usar a autenticação baseada em formulários, atualizando o arquivo Web. config no diretório raiz, substituindo:</span><span class="sxs-lookup"><span data-stu-id="20916-176">Finally, I configured the web application to use forms-based authentication by updating the Web.config file in the root directory, replacing:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample3.xml)]

<span data-ttu-id="20916-177">Por:</span><span class="sxs-lookup"><span data-stu-id="20916-177">With:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample4.xml)]

<span data-ttu-id="20916-178">Usando o servidor de desenvolvimento ASP.NET, visite o site e insira a URL direta para um dos arquivos PDF na barra de endereços do navegador.</span><span class="sxs-lookup"><span data-stu-id="20916-178">Using the ASP.NET Development Server, visit the site and enter the direct URL to one of the PDF files in your browser's Address bar.</span></span> <span data-ttu-id="20916-179">Se você tiver baixado o site associado deste tutorial, que a URL deve ser algo como:`http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span><span class="sxs-lookup"><span data-stu-id="20916-179">If you downloaded the website associated with this tutorial the URL should look something like: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span></span>

<span data-ttu-id="20916-180">Inserir esta URL na barra de endereços faz com que o navegador enviar uma solicitação para o servidor de desenvolvimento do ASP.NET para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="20916-180">Entering this URL into the Address bar causes the browser to send a request to the ASP.NET Development Server for the file.</span></span> <span data-ttu-id="20916-181">A entrega o servidor de desenvolvimento ASP.NET a solicitação para o tempo de execução do ASP.NET para processamento.</span><span class="sxs-lookup"><span data-stu-id="20916-181">The ASP.NET Development Server hands off the request to the ASP.NET runtime for processing.</span></span> <span data-ttu-id="20916-182">Porque estamos ainda não fizeram logon em e como o `Web.config` no `PrivateDocs` pasta está configurada para negar o acesso anônimo, o tempo de execução do ASP.NET redireciona nos automaticamente para a página de logon, `Login.aspx` (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="20916-182">Because we have not yet logged in, and because the `Web.config` in the `PrivateDocs` folder is configured to deny anonymous access, the ASP.NET runtime automatically redirects us to the login page, `Login.aspx` (see Figure 3).</span></span> <span data-ttu-id="20916-183">Ao redirecionar o usuário para a página de logon, o ASP.NET inclui um `ReturnUrl` parâmetro querystring que indica a página de usuário estava tentando exibir.</span><span class="sxs-lookup"><span data-stu-id="20916-183">When redirecting the user to the log in page, ASP.NET includes a `ReturnUrl` querystring parameter that indicates the page the user was attempting to view.</span></span> <span data-ttu-id="20916-184">Depois de fazer logon com êxito o usuário pode ser retornado para esta página.</span><span class="sxs-lookup"><span data-stu-id="20916-184">After successfully logging in the user can be returned to this page.</span></span>


<span data-ttu-id="20916-185">[![Usuários não autorizados são redirecionados automaticamente para a página de logon](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="20916-185">[![Unauthorized Users are Automatically Redirected to the Login Page](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="20916-186">**Figura 3**: os usuários não autorizados são redirecionados automaticamente para a página de logon ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="20916-186">**Figure 3**: Unauthorized Users are Automatically Redirected to the Login Page ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image9.png))</span></span>


<span data-ttu-id="20916-187">Agora vamos ver como isso se comporta em produção.</span><span class="sxs-lookup"><span data-stu-id="20916-187">Now let's see how this behaves on production.</span></span> <span data-ttu-id="20916-188">Implantar seu aplicativo e digite a URL direta a um dos PDFs no `PrivateDocs` pasta em produção.</span><span class="sxs-lookup"><span data-stu-id="20916-188">Deploy your application and enter the direct URL to one of the PDFs in the `PrivateDocs` folder in production.</span></span> <span data-ttu-id="20916-189">Isso solicita o seu navegador para enviar uma solicitação de IIS para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="20916-189">This prompts your browser to send a request IIS for the file.</span></span> <span data-ttu-id="20916-190">Como um arquivo estático for solicitado, o IIS recupera e retorna o arquivo sem invocar o tempo de execução do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-190">Because a static file is requested, IIS retrieves and returns the file without invoking the ASP.NET runtime.</span></span> <span data-ttu-id="20916-191">Como resultado, não havia nenhuma verificação de autorização de URL executada; o conteúdo do PDF supostamente privado é acessível a qualquer pessoa que souber a URL direta para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="20916-191">As a result, there was no URL authorization check performed; the contents of the supposedly private PDF are accessible to anyone who knows the direct URL to the file.</span></span>


<span data-ttu-id="20916-192">[![Usuários anônimos podem baixar arquivos PDF privada digitando a URL direta para o arquivo](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="20916-192">[![Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="20916-193">**Figura 4**: usuários anônimos podem baixar o privada PDF arquivos por inserir a URL direta para o arquivo ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="20916-193">**Figure 4**: Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image12.png))</span></span>


### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a><span data-ttu-id="20916-194">Executar a autenticação baseada em formulários e autenticação de URL em arquivos estáticos com o IIS 7</span><span class="sxs-lookup"><span data-stu-id="20916-194">Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7</span></span>

<span data-ttu-id="20916-195">Há algumas técnicas que você pode usar para proteger o conteúdo estático de usuários não autorizados.</span><span class="sxs-lookup"><span data-stu-id="20916-195">There are a couple of techniques you can use to protect static content from unauthorized users.</span></span> <span data-ttu-id="20916-196">IIS 7 introduziu o *pipeline integrado*, que combina o fluxo de trabalho do IIS com o fluxo de trabalho do tempo de execução do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-196">IIS 7 introduced the *integrated pipeline*, which marries IIS's workflow with the ASP.NET runtime's workflow.</span></span> <span data-ttu-id="20916-197">Em resumo, você pode instruir o IIS para invocar módulos de autorização e autenticação do tempo de execução ASP.NET todas as solicitações de entrada (incluindo conteúdo estático, como arquivos PDF).</span><span class="sxs-lookup"><span data-stu-id="20916-197">In a nutshell, you can instruct IIS to invoke the ASP.NET runtime's authentication and authorization modules all incoming requests (including static content like PDF files).</span></span> <span data-ttu-id="20916-198">Entre em contato com seu provedor de host da web para saber como configurar seu site para usar o pipeline integrado.</span><span class="sxs-lookup"><span data-stu-id="20916-198">Contact your web host provider to find out how to configure your website to use the integrated pipeline.</span></span>

<span data-ttu-id="20916-199">Depois que o IIS foi configurado para usar o pipeline integrado adicione a seguinte marcação para o `Web.config` arquivo no diretório raiz:</span><span class="sxs-lookup"><span data-stu-id="20916-199">Once IIS has been configured to use the integrated pipeline add the following markup to the `Web.config` file in the root directory:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample5.xml)]

<span data-ttu-id="20916-200">Essa marcação instrui o IIS 7 para usar os módulos de autenticação e autorização baseada em ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-200">This markup instructs IIS 7 to use the ASP.NET-based authentication and authorization modules.</span></span> <span data-ttu-id="20916-201">Reimplante o aplicativo e, em seguida, visite novamente o arquivo PDF.</span><span class="sxs-lookup"><span data-stu-id="20916-201">Re-deploy your application and then re-visit the PDF file.</span></span> <span data-ttu-id="20916-202">Desta vez, quando o IIS trata a solicitação-lógica de autenticação e autorização do tempo de execução ASP.NET uma oportunidade para inspecionar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="20916-202">This time when IIS handles the request it gives the ASP.NET runtime's authentication and authorization logic an opportunity to inspect the request.</span></span> <span data-ttu-id="20916-203">Porque somente usuários autenticados tem autorização para exibir o conteúdo de `PrivateDocs` pasta, o visitante anônimo é automaticamente redirecionada para a página de logon (consulte novamente a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="20916-203">Because only authenticated users are authorized to view the contents in the `PrivateDocs` folder, the anonymous visitor is automatically redirected to the login page (refer back to Figure 3).</span></span>

> [!NOTE]
> <span data-ttu-id="20916-204">Se seu provedor de host da web ainda estiver usando o IIS 6, em seguida, você não pode usar o recurso de pipeline integrado.</span><span class="sxs-lookup"><span data-stu-id="20916-204">If your web host provider is still using IIS 6 then you cannot use the integrated pipeline feature.</span></span> <span data-ttu-id="20916-205">Uma solução alternativa é colocar seus documentos particulares em uma pasta que proíbe o acesso HTTP (como `App_Data`) e, em seguida, crie uma página para atender a esses documentos.</span><span class="sxs-lookup"><span data-stu-id="20916-205">One workaround is to put your private documents in a folder that prohibits HTTP access (such as `App_Data`) and then create a page to serve these documents.</span></span> <span data-ttu-id="20916-206">Esta página pode ser chamada `GetPDF.aspx`e o nome do PDF por meio de um parâmetro querystring transmitido.</span><span class="sxs-lookup"><span data-stu-id="20916-206">This page might be called `GetPDF.aspx`, and is passed the name of the PDF through a querystring parameter.</span></span> <span data-ttu-id="20916-207">O `GetPDF.aspx` página pela primeira vez, verificaria que o usuário tem permissão para exibir o arquivo e, nesse caso, use o [ `Response.WriteFile(filePath)` ](https://msdn.microsoft.com/en-us/library/system.web.httpresponse.writefile.aspx) método para enviar o conteúdo do arquivo PDF solicitado para o cliente solicitante.</span><span class="sxs-lookup"><span data-stu-id="20916-207">The `GetPDF.aspx` page would first verify that the user has permission to view the file and, if so, would use the [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/en-us/library/system.web.httpresponse.writefile.aspx) method to send the contents of the requested PDF file back to the requesting client.</span></span> <span data-ttu-id="20916-208">Essa técnica também funcionaria para o IIS 7, se você habilitar o pipeline integrado.</span><span class="sxs-lookup"><span data-stu-id="20916-208">This technique would also work for IIS 7 if you did not wish to enable the integrated pipeline.</span></span>


## <a name="summary"></a><span data-ttu-id="20916-209">Resumo</span><span class="sxs-lookup"><span data-stu-id="20916-209">Summary</span></span>

<span data-ttu-id="20916-210">Aplicativos da Web em um ambiente de produção são hospedados usando software de servidor de web IIS da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="20916-210">Web applications in a production environment are hosted using Microsoft's IIS web server software.</span></span> <span data-ttu-id="20916-211">No ambiente de desenvolvimento, no entanto, o aplicativo pode ser hospedado usando o IIS ou o servidor de desenvolvimento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="20916-211">In the development environment, however, the application may be hosted using IIS or the ASP.NET Development Server.</span></span> <span data-ttu-id="20916-212">Idealmente, o mesmo software de servidor web deve ser usado em ambos os ambientes porque usar software diferente adiciona outra variável na combinação.</span><span class="sxs-lookup"><span data-stu-id="20916-212">Ideally, the same web server software should be used in both environments because using different software adds another variable in the mix.</span></span> <span data-ttu-id="20916-213">No entanto, a facilidade de uso do servidor de desenvolvimento ASP.NET torna uma opção atraente no ambiente de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="20916-213">However, the ease of use of the ASP.NET Development Server makes it an attractive choice in the development environment.</span></span> <span data-ttu-id="20916-214">A boa notícia é que há apenas algumas diferenças fundamentais entre o IIS e o ASP.NET Development Server e se você está ciente dessas diferenças você pode adotar medidas para ajudar a garantir que o aplicativo funciona e funciona da mesma maneira independentemente do ambiente.</span><span class="sxs-lookup"><span data-stu-id="20916-214">The good news is that there are only a few fundamental differences between IIS and the ASP.NET Development Server, and if you are aware of these differences you can take steps to help ensure that the application works and functions the same way regardless of the environment.</span></span>

<span data-ttu-id="20916-215">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="20916-215">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="20916-216">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="20916-216">Further Reading</span></span>

<span data-ttu-id="20916-217">Para obter mais informações sobre os tópicos abordados neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="20916-217">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="20916-218">Integração do ASP.NET com o IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="20916-218">ASP.NET Integration with IIS 7.0</span></span>](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- <span data-ttu-id="20916-219">[Usando a autenticação de fóruns do ASP.NET com todos os tipos de conteúdo no IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (vídeo)</span><span class="sxs-lookup"><span data-stu-id="20916-219">[Using ASP.NET Forums Authentication With All Types of Content on IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (Video)</span></span>
- [<span data-ttu-id="20916-220">Servidores Web no Visual Web Developer</span><span class="sxs-lookup"><span data-stu-id="20916-220">Web Servers in Visual Web Developer</span></span>](https://msdn.microsoft.com/en-us/library/58wxa9w5.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="20916-221">[Anterior](common-configuration-differences-between-development-and-production-vb.md)
[Próximo](deploying-a-database-vb.md)</span><span class="sxs-lookup"><span data-stu-id="20916-221">[Previous](common-configuration-differences-between-development-and-production-vb.md)
[Next](deploying-a-database-vb.md)</span></span>
