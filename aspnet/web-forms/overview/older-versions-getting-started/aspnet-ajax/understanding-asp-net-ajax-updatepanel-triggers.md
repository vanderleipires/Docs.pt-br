---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Noções básicas sobre o ASP.NET AJAX UpdatePanel gatilhos | Microsoft Docs
author: scottcate
description: Ao trabalhar no editor de marcação no Visual Studio, você pode perceber (de IntelliSense) que há dois elementos filho de um controle UpdatePanel. Uma das perguntas...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/12/2008
ms.topic: article
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: f30f2ead402d2f49a89b2caf47cc30b6445d4cfb
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30890743"
---
<a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="70391-104">Noções básicas sobre o ASP.NET AJAX UpdatePanel gatilhos</span><span class="sxs-lookup"><span data-stu-id="70391-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>
====================
<span data-ttu-id="70391-105">por [Scott Ndicar](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="70391-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="70391-106">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="70391-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="70391-107">Ao trabalhar no editor de marcação no Visual Studio, você pode perceber (de IntelliSense) que há dois elementos filho de um controle UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="70391-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="70391-108">Um dos quais é o elemento de gatilhos, que especifica os controles na página (ou controle de usuário, se você estiver usando um) que acionará uma renderização parcial do controle UpdatePanel no qual reside o elemento.</span><span class="sxs-lookup"><span data-stu-id="70391-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>


## <a name="introduction"></a><span data-ttu-id="70391-109">Introdução</span><span class="sxs-lookup"><span data-stu-id="70391-109">Introduction</span></span>

<span data-ttu-id="70391-110">Tecnologia ASP.NET da Microsoft oferece um modelo de programação orientada a objeto e controlada por evento e une-lo com os benefícios do código compilado.</span><span class="sxs-lookup"><span data-stu-id="70391-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="70391-111">No entanto, seu modelo de processamento no lado do servidor tem várias desvantagens inerentes a tecnologia, muitos dos quais podem ser endereçados por novos recursos incluídos nas extensões de AJAX do Microsoft ASP.NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="70391-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="70391-112">Essas extensões permitem que vários novos recursos de cliente avançados, incluindo o processamento parcial de páginas sem exigir uma atualização de página inteira, a capacidade de acessar os serviços da Web por meio de script de cliente (incluindo a API de criação de perfil do ASP.NET) e uma extensa API de cliente projetado para espelhar muitos dos esquemas de controle vistos no conjunto de controle de servidor ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="70391-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="70391-113">Este white paper examina a funcionalidade de gatilhos de XML do ASP.NET AJAX `UpdatePanel` componente.</span><span class="sxs-lookup"><span data-stu-id="70391-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="70391-114">Gatilhos de XML oferecem um controle granular sobre os componentes que podem fazer com que o processamento parcial para controles do UpdatePanel específicos.</span><span class="sxs-lookup"><span data-stu-id="70391-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="70391-115">Este white paper se baseia na versão Beta 2 do .NET Framework 3.5 e Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="70391-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="70391-116">O ASP.NET AJAX Extensions, anteriormente um assembly de complemento voltado para ASP.NET 2.0, agora estão integrados a biblioteca de classes de Base do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="70391-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="70391-117">Este white paper também presume que você estará trabalhando com o Visual Studio 2008, não Visual Web Developer Express e fornece instruções passo a passo de acordo com a interface do usuário do Visual Studio (embora as listagens de código será totalmente compatíveis, independentemente de ambiente de desenvolvimento).</span><span class="sxs-lookup"><span data-stu-id="70391-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="70391-118">*Gatilhos*</span><span class="sxs-lookup"><span data-stu-id="70391-118">*Triggers*</span></span>

<span data-ttu-id="70391-119">Para um determinado UpdatePanel, por padrão, os gatilhos incluem automaticamente os controles filho que invocam um postback, (por exemplo) incluindo controles de caixa de texto que têm suas `AutoPostBack` propriedade definida como **true**.</span><span class="sxs-lookup"><span data-stu-id="70391-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="70391-120">No entanto, os gatilhos também podem ser incluídos declarativamente usando marcação; Isso é feito dentro de `<triggers>` seção da declaração de controle UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="70391-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="70391-121">Embora os gatilhos podem ser acessados por meio de `Triggers` propriedade de coleção, é recomendável que você registre os disparadores de renderização parcial em tempo de execução (por exemplo, se um controle não está disponível em tempo de design) usando o `RegisterAsyncPostBackControl(Control)` método do ScriptManager objeto dentro de sua página de `Page_Load` eventos.</span><span class="sxs-lookup"><span data-stu-id="70391-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="70391-122">Lembre-se de que as páginas são sem monitoração de estado e assim você deve registrar novamente esses controles sempre que eles são criados.</span><span class="sxs-lookup"><span data-stu-id="70391-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="70391-123">Inclusão de gatilho automático filho também pode ser desabilitado (de forma que os controles filho que criar postbacks não disparam automaticamente renderiza parcial), definindo o `ChildrenAsTriggers` propriedade **false**.</span><span class="sxs-lookup"><span data-stu-id="70391-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="70391-124">Isso permite maior flexibilidade na atribuição de quais controles específicos pode invocar uma renderização de página e é recomendável, para que um desenvolvedor será participar para responder a um evento, em vez de tratar todos os eventos que podem surgir.</span><span class="sxs-lookup"><span data-stu-id="70391-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="70391-125">Observe que quando os controles do UpdatePanel são aninhados, quando o UpdateMode está definido como **condicional**, se o filho do UpdatePanel for disparado, mas o pai não for, somente o filho UpdatePanel será atualizado.</span><span class="sxs-lookup"><span data-stu-id="70391-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="70391-126">No entanto, se o UpdatePanel pai é atualizado, em seguida, o filho do UpdatePanel também serão atualizado.</span><span class="sxs-lookup"><span data-stu-id="70391-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="70391-127">*O &lt;gatilhos&gt; elemento*</span><span class="sxs-lookup"><span data-stu-id="70391-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="70391-128">Ao trabalhar no editor de marcação no Visual Studio, você pode perceber (de IntelliSense) que há dois elementos filho de um `UpdatePanel` controle.</span><span class="sxs-lookup"><span data-stu-id="70391-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="70391-129">O elemento mais frequentemente visto é o `<ContentTemplate>` elemento, que é essencialmente encapsula o conteúdo que será mantido pelo painel de atualização (o conteúdo para o qual estamos estiver habilitando o processamento parcial).</span><span class="sxs-lookup"><span data-stu-id="70391-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="70391-130">O outro elemento é o `<Triggers>` elemento, que especifica os controles na página (ou controle de usuário, se você estiver usando um) que acionará uma renderização parcial do controle UpdatePanel em que o &lt;gatilhos&gt; elemento reside.</span><span class="sxs-lookup"><span data-stu-id="70391-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="70391-131">O `<Triggers>` elemento pode conter qualquer número a cada dois nós filho: `<asp:AsyncPostBackTrigger>` e `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="70391-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="70391-132">Aceitar dois atributos, `ControlID` e `EventName`e pode especificar qualquer controle dentro da unidade atual do encapsulamento (por exemplo, se o controle UpdatePanel reside em um controle de usuário da Web, você não deve tentar fazer referência a um controle em a página em que o controle de usuário residem).</span><span class="sxs-lookup"><span data-stu-id="70391-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="70391-133">O `<asp:AsyncPostBackTrigger>` elemento é particularmente útil em que ele pode direcionar qualquer evento de um controle que existe como um filho de *qualquer* controle UpdatePanel na unidade de encapsulamento, não apenas o UpdatePanel sob a qual esse gatilho é um filho .</span><span class="sxs-lookup"><span data-stu-id="70391-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="70391-134">Portanto, qualquer controle pode ser feito para disparar uma atualização parcial de página.</span><span class="sxs-lookup"><span data-stu-id="70391-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="70391-135">Da mesma forma, o `<asp:PostBackTrigger>` elemento pode ser usado para renderizar uma página parcial de disparador, mas requer uma viagem completa para o servidor.</span><span class="sxs-lookup"><span data-stu-id="70391-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="70391-136">Este elemento de gatilho também pode ser usado para forçar uma renderização de página inteira quando um controle caso contrário, normalmente acionaria uma renderização de página parcial (por exemplo, quando um `Button` controle existe o `<ContentTemplate>` elemento de um controle UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="70391-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="70391-137">Novamente, o elemento PostBackTrigger pode especificar qualquer controle que é um filho de qualquer controle UpdatePanel na unidade atual de encapsulamento.</span><span class="sxs-lookup"><span data-stu-id="70391-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="70391-138">*&lt;Gatilhos&gt; referência de elemento*</span><span class="sxs-lookup"><span data-stu-id="70391-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="70391-139">*Marcação descendentes:*</span><span class="sxs-lookup"><span data-stu-id="70391-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="70391-140">**Tag**</span><span class="sxs-lookup"><span data-stu-id="70391-140">**Tag**</span></span> | <span data-ttu-id="70391-141">**Descrição**</span><span class="sxs-lookup"><span data-stu-id="70391-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="70391-142">&lt;asp:AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="70391-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="70391-143">Especifica um controle e o evento que fará com que uma atualização parcial de página para o UpdatePanel que contém esta referência de gatilho.</span><span class="sxs-lookup"><span data-stu-id="70391-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="70391-144">&lt;asp:PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="70391-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="70391-145">Especifica um controle e o evento que fará com que uma atualização de página inteira (uma atualização de página inteira).</span><span class="sxs-lookup"><span data-stu-id="70391-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="70391-146">Essa marca pode ser usada para forçar uma atualização completa quando um controle dispararia caso contrário, o processamento parcial.</span><span class="sxs-lookup"><span data-stu-id="70391-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="70391-147">*Passo a passo: UpdatePanel entre gatilhos*</span><span class="sxs-lookup"><span data-stu-id="70391-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="70391-148">Crie uma nova página ASP.NET com um objeto ScriptManager definido para permitir o processamento parcial.</span><span class="sxs-lookup"><span data-stu-id="70391-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="70391-149">Adicionar dois UpdatePanels a esta página - na primeira, incluem um controle de rótulo (Label1) e dois controles de botão (Button1 e Button2).</span><span class="sxs-lookup"><span data-stu-id="70391-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="70391-150">Button1 deve dizer clique para atualizar e Button2 deve dizer clique para atualizar esse ou algo semelhante.</span><span class="sxs-lookup"><span data-stu-id="70391-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="70391-151">No segundo UpdatePanel, incluir apenas um controle de rótulo (Label2), mas defina sua propriedade de cor de primeiro plano para algo diferente do padrão para diferenciá-la.</span><span class="sxs-lookup"><span data-stu-id="70391-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="70391-152">Defina a propriedade UpdateMode de ambas as marcas de UpdatePanel para **condicional**.</span><span class="sxs-lookup"><span data-stu-id="70391-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="70391-153">**Listando 1: A marcação de default.aspx:**</span><span class="sxs-lookup"><span data-stu-id="70391-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="70391-154">No manipulador de eventos de clique para Button1, definir Label1.Text e Label2.Text para algo dependentes de tempo (como DateTime.Now.ToLongTimeString()).</span><span class="sxs-lookup"><span data-stu-id="70391-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="70391-155">Para o manipulador de eventos para Button2, defina Label1.Text apenas com o valor de dependentes de tempo.</span><span class="sxs-lookup"><span data-stu-id="70391-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="70391-156">**Listando 2: Code-behind (cortado) em default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="70391-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="70391-157">Pressione F5 para compilar e executar o projeto.</span><span class="sxs-lookup"><span data-stu-id="70391-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="70391-158">Observe que, quando você clica em painéis de atualização de ambos, ambos os rótulos alterar texto; No entanto, quando você clica em um painel esta atualização, apenas Label1 atualizações.</span><span class="sxs-lookup"><span data-stu-id="70391-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="70391-159">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="70391-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>


## <a name="under-the-hood"></a><span data-ttu-id="70391-160">*Nos bastidores*</span><span class="sxs-lookup"><span data-stu-id="70391-160">*Under the Hood*</span></span>

<span data-ttu-id="70391-161">Utilizando o exemplo que acabou de criar, podemos pode dar uma olhada o ASP.NET AJAX e como funcionam os gatilhos de painel entre UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="70391-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="70391-162">Para fazer isso, trabalharemos com a origem da página gerado HTML, bem como a extensão Mozilla Firefox chamado FireBug - com, podemos examinar facilmente os postbacks AJAX.</span><span class="sxs-lookup"><span data-stu-id="70391-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="70391-163">Também, usaremos a ferramenta .NET Reflector por Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="70391-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="70391-164">Ambas as ferramentas estão disponíveis gratuitamente online e podem ser encontradas com uma pesquisa na internet.</span><span class="sxs-lookup"><span data-stu-id="70391-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="70391-165">Um exame do código-fonte página mostra quase nada fora do comum; os controles do UpdatePanel são renderizados como `<div>` contêineres e pode ver o recurso de script inclui fornecido pelo `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="70391-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="70391-166">Também há algumas novas chamadas de específico do AJAX para PageRequestManager internas para a biblioteca de script de cliente AJAX.</span><span class="sxs-lookup"><span data-stu-id="70391-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="70391-167">Por fim, podemos ver dois contêineres UpdatePanel - um com o renderizado `<input>` botões com os dois `<asp:Label>` controles renderizado como `<span>` contêineres.</span><span class="sxs-lookup"><span data-stu-id="70391-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="70391-168">(Se você inspecionar a árvore DOM FireBug, você observará que os rótulos estão esmaecidos para indicar que eles não estão produzindo conteúdo visível).</span><span class="sxs-lookup"><span data-stu-id="70391-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="70391-169">Clique no botão Painel esta atualização e observe que o superior UpdatePanel será atualizado com a hora atual do servidor.</span><span class="sxs-lookup"><span data-stu-id="70391-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="70391-170">No FireBug, escolha a guia Console de forma que você pode examinar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="70391-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="70391-171">Examine primeiro os parâmetros de solicitação POST:</span><span class="sxs-lookup"><span data-stu-id="70391-171">Examine the POST request parameters first:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="70391-172">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="70391-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>


<span data-ttu-id="70391-173">Observe que o UpdatePanel foi indicado para o código de AJAX do lado do servidor com precisão qual árvore de controle foi acionado por meio do parâmetro ScriptManager1: `Button1` do `UpdatePanel1` controle.</span><span class="sxs-lookup"><span data-stu-id="70391-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="70391-174">Agora, clique no botão de painéis tanto de atualização.</span><span class="sxs-lookup"><span data-stu-id="70391-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="70391-175">Em seguida, examinar a resposta, podemos ver uma série de delimitada de variáveis definidas em uma cadeia de caracteres; Especificamente, podemos ver que o UpdatePanel superior, `UpdatePanel1`, tem todo o HTML enviado ao navegador.</span><span class="sxs-lookup"><span data-stu-id="70391-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="70391-176">A biblioteca de script de cliente AJAX substitui original conteúdo em HTML do UpdatePanel com o novo conteúdo por meio de `.innerHTML` propriedade, e, portanto, o servidor envia o conteúdo alterado do servidor como HTML.</span><span class="sxs-lookup"><span data-stu-id="70391-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="70391-177">Agora, clique no botão painéis tanto de atualização e examine os resultados do servidor.</span><span class="sxs-lookup"><span data-stu-id="70391-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="70391-178">Os resultados são muito semelhantes - ambos os UpdatePanels receber o novo HTML do servidor.</span><span class="sxs-lookup"><span data-stu-id="70391-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="70391-179">Assim como acontece com o retorno de chamada anterior, o estado de página adicionais é enviado.</span><span class="sxs-lookup"><span data-stu-id="70391-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="70391-180">Como podemos ver, porque nenhum código especial é utilizado para executar um postback AJAX, a biblioteca de script de cliente AJAX é intercepte postbacks de formulário sem qualquer código adicional.</span><span class="sxs-lookup"><span data-stu-id="70391-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="70391-181">Controles de servidor utilizam JavaScript automaticamente para que eles não enviar automaticamente o formulário - ASP.NET automaticamente insere um código de validação do formulário e estado, principalmente obtido com a inclusão de recursos de script automático, a classe PostBackOptions e a classe ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="70391-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="70391-182">Por exemplo, considere um controle de caixa de seleção; Examine a desmontagem de classe no .NET Reflector.</span><span class="sxs-lookup"><span data-stu-id="70391-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="70391-183">Para fazer isso, certifique-se de que o assembly System. Web é aberto e navegue até o `System.Web.UI.WebControls.CheckBox` classe, abrindo o `RenderInputTag` método.</span><span class="sxs-lookup"><span data-stu-id="70391-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="70391-184">Procure uma condicional que verifica a `AutoPostBack` propriedade:</span><span class="sxs-lookup"><span data-stu-id="70391-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="70391-185">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="70391-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>


<span data-ttu-id="70391-186">Quando o postback automático está habilitado em um `CheckBox` controlar (via a propriedade AutoPostBack sendo verdadeiro), o resultante `<input>` marca, portanto, é renderizada com um script de manipulação de eventos do ASP.NET seu `onclick` atributo.</span><span class="sxs-lookup"><span data-stu-id="70391-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="70391-187">A interceptação de envio do formulário, em seguida, permite que o ASP.NET AJAX ao serem injetados na página nonintrusively, ajuda a evitar possíveis alterações de quebra que podem ocorrer com o uso de uma substituição de cadeia de caracteres possivelmente imprecisa.</span><span class="sxs-lookup"><span data-stu-id="70391-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="70391-188">Além disso, isso permite *qualquer* controle personalizado do ASP.NET para utilizar o poder do ASP.NET AJAX sem qualquer código adicional para dar suporte ao seu uso dentro de um contêiner de UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="70391-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="70391-189">O `<triggers>` funcionalidade corresponde aos valores inicializados na chamada PageRequestManager \_updateControls (Observe que a biblioteca de script de cliente ASP.NET AJAX utiliza a convenção de que nomes de campo que começam, métodos e eventos com um sublinhado são marcados como internos e não se destinam para uso fora da própria biblioteca).</span><span class="sxs-lookup"><span data-stu-id="70391-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="70391-190">Com ele, podemos pode observar quais controles devem causar postbacks AJAX.</span><span class="sxs-lookup"><span data-stu-id="70391-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="70391-191">Por exemplo, vamos adicionar dois controles adicionais para a página, deixando um controle fora os UpdatePanels inteiramente e deixando uma dentro de um UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="70391-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="70391-192">É adicionar um controle de caixa de seleção no UpdatePanel superior e descartar DropDownList com um número de cores definidas dentro da lista.</span><span class="sxs-lookup"><span data-stu-id="70391-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="70391-193">Aqui está a marcação novo:</span><span class="sxs-lookup"><span data-stu-id="70391-193">Here is the new markup:</span></span>

<span data-ttu-id="70391-194">**A listagem 3: Nova marcação**</span><span class="sxs-lookup"><span data-stu-id="70391-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="70391-195">E aqui está o code-behind novo:</span><span class="sxs-lookup"><span data-stu-id="70391-195">And here is the new code-behind:</span></span>

<span data-ttu-id="70391-196">**A listagem 4: code-behind**</span><span class="sxs-lookup"><span data-stu-id="70391-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="70391-197">A ideia por trás desta página é que a lista suspensa seleciona uma das três cores para mostrar o rótulo de segundo, que a caixa de seleção determina se ele está em negrito, e se os rótulos exibem a data, bem como o tempo.</span><span class="sxs-lookup"><span data-stu-id="70391-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="70391-198">A caixa de seleção não deve causar uma atualização AJAX, mas a lista suspensa deve, mesmo que ele não está hospedado em um UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="70391-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="70391-199">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="70391-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>


<span data-ttu-id="70391-200">Como é aparente na captura de tela acima, o botão mais recente para ser clicado era o botão direito do painel esta atualização, que atualizar o tempo superior, independentemente da hora inferior.</span><span class="sxs-lookup"><span data-stu-id="70391-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="70391-201">A data também foi desligada entre cliques, como a data é visível no rótulo da parte inferior.</span><span class="sxs-lookup"><span data-stu-id="70391-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="70391-202">Finalmente interesse é cor do rótulo inferior: ele foi atualizado mais recentemente do que o texto do rótulo, que demonstra que o estado de controle é importante, e os usuários esperam para ser preservada durante postbacks AJAX.</span><span class="sxs-lookup"><span data-stu-id="70391-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="70391-203">*No entanto*, o tempo não foi atualizado.</span><span class="sxs-lookup"><span data-stu-id="70391-203">*However*, the time was not updated.</span></span> <span data-ttu-id="70391-204">O tempo foi automaticamente preenchida novamente por meio de persistência do \_ \_campo VIEWSTATE da página seja interpretado pelo tempo de execução do ASP.NET quando o controle estava sendo processado novamente no servidor.</span><span class="sxs-lookup"><span data-stu-id="70391-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="70391-205">O código de servidor AJAX ASP.NET não reconhece em que os controles de métodos estão alterando o estado; ele simplesmente preenche do estado de exibição e, em seguida, executa os eventos que são apropriados.</span><span class="sxs-lookup"><span data-stu-id="70391-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="70391-206">Ele deve ser indicado, no entanto, que eu tivesse inicializado tempo dentro da página\_eventos de carga, o tempo poderia ter for incrementado corretamente.</span><span class="sxs-lookup"><span data-stu-id="70391-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="70391-207">Consequentemente, os desenvolvedores devem cuidado-se de que o código apropriado está sendo executado durante os manipuladores de eventos apropriado e evitar o uso da página\_carregar quando um manipulador de eventos do controle seria apropriado.</span><span class="sxs-lookup"><span data-stu-id="70391-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="70391-208">Resumo</span><span class="sxs-lookup"><span data-stu-id="70391-208">Summary</span></span>

<span data-ttu-id="70391-209">O controle UpdatePanel do ASP.NET AJAX Extensions versátil e pode usar vários métodos para identificar os eventos de controle que devem fazer com que ele seja atualizado.</span><span class="sxs-lookup"><span data-stu-id="70391-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="70391-210">Ele dá suporte a serem atualizados automaticamente por seus controles filhos, mas também pode responder a eventos de controle em outro lugar na página.</span><span class="sxs-lookup"><span data-stu-id="70391-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="70391-211">Para reduzir o potencial de carga de processamento do servidor, é recomendável que o `ChildrenAsTriggers` propriedade de um UpdatePanel ser definida como `false`, e que os eventos ser incluído-em vez de incluído por padrão.</span><span class="sxs-lookup"><span data-stu-id="70391-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="70391-212">Isso também impede que todos os eventos desnecessários causando efeitos potencialmente indesejado, inclusive validação e alterações para campos de entrada.</span><span class="sxs-lookup"><span data-stu-id="70391-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="70391-213">Esses tipos de erros podem ser difícil isolar, porque a página de atualizações de forma transparente para o usuário e, portanto, não é possível imediatamente óbvia.</span><span class="sxs-lookup"><span data-stu-id="70391-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="70391-214">Examinando o funcionamento interno do formulário ASP.NET AJAX após o modelo de interceptação, pudemos determinar que utiliza a estrutura já fornecida pelo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="70391-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="70391-215">Dessa forma, ele preserva a máxima compatibilidade com controles criados usando a mesma estrutura e minimamente atua em qualquer adicional JavaScript gravado para a página.</span><span class="sxs-lookup"><span data-stu-id="70391-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="70391-216">Bio</span><span class="sxs-lookup"><span data-stu-id="70391-216">Bio</span></span>

<span data-ttu-id="70391-217">Rob Paveza é um desenvolvedor de aplicativos .NET sênior em Terralever ([www.terralever.com](http://www.terralever.com)), uma empresa de marketing interativa líder em Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="70391-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="70391-218">Ele pode ser contatado em [ robpaveza@gmail.com ](mailto:robpaveza@gmail.com), e seu blog está localizado em [ http://geekswithblogs.net/robp/ ](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="70391-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="70391-219">Scott Cate trabalha com tecnologias Microsoft Web desde 1997 e é presidente da myKB.com ([www.myKB.com](http://www.myKB.com)) onde ele é especializada em escrever ASP.NET com base em aplicativos voltados para soluções de Software da Base de dados de Conhecimento.</span><span class="sxs-lookup"><span data-stu-id="70391-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="70391-220">Scott pode ser contatado via email em [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) ou em seu blog [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="70391-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="70391-221">[Anterior](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Próximo](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="70391-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
