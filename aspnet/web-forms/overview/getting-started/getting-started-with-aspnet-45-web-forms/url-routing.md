---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
title: Roteamento de URL | Microsoft Docs
author: Erikre
description: Esta série de tutorial irá ensiná-lo as Noções básicas de criação de um aplicativo de Web Forms do ASP.NET usando o ASP.NET 4.5 e o Microsoft Visual Studio Express 2013 para nós...
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 4f4bf092-c400-471f-a876-78fda0417890
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
msc.type: authoredcontent
ms.openlocfilehash: a195b36517bcae4bbeaf43fe7386e7787fd00212
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30886427"
---
<a name="url-routing"></a><span data-ttu-id="b6af3-103">Roteamento de URL</span><span class="sxs-lookup"><span data-stu-id="b6af3-103">URL Routing</span></span>
====================
<span data-ttu-id="b6af3-104">por [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="b6af3-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="b6af3-105">[Baixe o projeto de exemplo do Wingtip Toys (c#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) ou [baixar livro eletrônico (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="b6af3-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="b6af3-106">Esta série de tutorial irá ensiná-lo as Noções básicas de criação de um aplicativo de Web Forms do ASP.NET usando o ASP.NET 4.5 e o Microsoft Visual Studio Express 2013 para Web.</span><span class="sxs-lookup"><span data-stu-id="b6af3-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="b6af3-107">Um Visual Studio 2013 [projeto com o código-fonte c#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) está disponível para acompanhar esta série de tutoriais.</span><span class="sxs-lookup"><span data-stu-id="b6af3-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="b6af3-108">Neste tutorial, você modificará o aplicativo de exemplo do Wingtip Toys para oferecer suporte ao roteamento de URL.</span><span class="sxs-lookup"><span data-stu-id="b6af3-108">In this tutorial, you will modify the Wingtip Toys sample application to support URL routing.</span></span> <span data-ttu-id="b6af3-109">Roteamento permite que seu aplicativo web para usar URLs que são mais fáceis de lembrar, melhor com suporte por mecanismos de pesquisa e amigável.</span><span class="sxs-lookup"><span data-stu-id="b6af3-109">Routing enables your web application to use URLs that are friendly, easier to remember, and better supported by search engines.</span></span> <span data-ttu-id="b6af3-110">Este tutorial se baseia no tutorial anterior "Associação e administração" e faz parte da série tutorial Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="b6af3-110">This tutorial builds on the previous tutorial "Membership and Administration" and is part of the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="b6af3-111">O que você aprenderá:</span><span class="sxs-lookup"><span data-stu-id="b6af3-111">What you'll learn:</span></span>

- <span data-ttu-id="b6af3-112">Como registrar rotas para um aplicativo de Web Forms do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b6af3-112">How to register routes for an ASP.NET Web Forms application.</span></span>
- <span data-ttu-id="b6af3-113">Como adicionar rotas a uma página da web.</span><span class="sxs-lookup"><span data-stu-id="b6af3-113">How to add routes to a web page.</span></span>
- <span data-ttu-id="b6af3-114">Como selecionar dados de um banco de dados para dar suporte a rotas.</span><span class="sxs-lookup"><span data-stu-id="b6af3-114">How to select data from a database to support routes.</span></span>

## <a name="aspnet-routing-overview"></a><span data-ttu-id="b6af3-115">Visão geral sobre o roteamento do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b6af3-115">ASP.NET Routing Overview</span></span>

<span data-ttu-id="b6af3-116">Roteamento de URL permite que você configure um aplicativo para aceitar solicitações de URLs que não mapeiam para arquivos físicos.</span><span class="sxs-lookup"><span data-stu-id="b6af3-116">URL routing allows you to configure an application to accept request URLs that do not map to physical files.</span></span> <span data-ttu-id="b6af3-117">Uma URL de solicitação é simplesmente a URL de um usuário entra no seu navegador para localizar uma página no site da web.</span><span class="sxs-lookup"><span data-stu-id="b6af3-117">A request URL is simply the URL a user enters into their browser to find a page on your web site.</span></span> <span data-ttu-id="b6af3-118">Use o roteamento para definir URLs que são semanticamente significativo para usuários e que podem ajudar com o mecanismo de pesquisa SEO (otimização).</span><span class="sxs-lookup"><span data-stu-id="b6af3-118">You use routing to define URLs that are semantically meaningful to users and that can help with search-engine optimization (SEO).</span></span>

<span data-ttu-id="b6af3-119">Por padrão, o modelo de Web Forms inclui [URLs amigáveis do ASP.NET](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span><span class="sxs-lookup"><span data-stu-id="b6af3-119">By default, the Web Forms template includes [ASP.NET Friendly URLs](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span></span> <span data-ttu-id="b6af3-120">A maioria do trabalho roteamento básico será implementada usando *URLs amigáveis*.</span><span class="sxs-lookup"><span data-stu-id="b6af3-120">Much of the basic routing work will be implemented by using *Friendly URLs*.</span></span> <span data-ttu-id="b6af3-121">No entanto, neste tutorial, você irá adicionar recursos personalizados de roteamento.</span><span class="sxs-lookup"><span data-stu-id="b6af3-121">However, in this tutorial you will add customized routing capabilities.</span></span>

<span data-ttu-id="b6af3-122">Antes de personalizar o roteamento de URL, o aplicativo de exemplo Wingtip Toys pode vincular a um produto usando a seguinte URL:</span><span class="sxs-lookup"><span data-stu-id="b6af3-122">Before customizing URL routing, the Wingtip Toys sample application can link to a product using the following URL:</span></span>

`https://localhost:44300/ProductDetails.aspx?productID=2`

<span data-ttu-id="b6af3-123">Personalizando o roteamento de URL, o aplicativo de exemplo Wingtip Toys vinculará o mesmo produto usando um mais fáceis de ler a URL:</span><span class="sxs-lookup"><span data-stu-id="b6af3-123">By customizing URL routing, the Wingtip Toys sample application will link to the same product using an easier to read URL:</span></span>

`https://localhost:44300/Product/Convertible%20Car`

### <a name="routes"></a><span data-ttu-id="b6af3-124">Rotas</span><span class="sxs-lookup"><span data-stu-id="b6af3-124">Routes</span></span>

<span data-ttu-id="b6af3-125">Uma rota é um padrão de URL que é mapeado para um manipulador.</span><span class="sxs-lookup"><span data-stu-id="b6af3-125">A route is a URL pattern that is mapped to a handler.</span></span> <span data-ttu-id="b6af3-126">O identificador pode ser um arquivo físico, como um arquivo. aspx em um aplicativo de Web Forms.</span><span class="sxs-lookup"><span data-stu-id="b6af3-126">The handler can be a physical file, such as an .aspx file in a Web Forms application.</span></span> <span data-ttu-id="b6af3-127">Um manipulador também pode ser uma classe que processa a solicitação.</span><span class="sxs-lookup"><span data-stu-id="b6af3-127">A handler can also be a class that processes the request.</span></span> <span data-ttu-id="b6af3-128">Para definir uma rota, você pode criar uma instância da classe de rota, especificando o padrão de URL, o manipulador e, opcionalmente, um nome para a rota.</span><span class="sxs-lookup"><span data-stu-id="b6af3-128">To define a route, you create an instance of the Route class by specifying the URL pattern, the handler, and optionally a name for the route.</span></span>

<span data-ttu-id="b6af3-129">Adicionar a rota para o aplicativo adicionando o `Route` objeto estático `Routes` propriedade o `RouteTable` classe.</span><span class="sxs-lookup"><span data-stu-id="b6af3-129">You add the route to the application by adding the `Route` object to the static `Routes` property of the `RouteTable` class.</span></span> <span data-ttu-id="b6af3-130">A propriedade de rotas é uma `RouteCollection` objeto que armazena todas as rotas para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6af3-130">The Routes property is a `RouteCollection` object that stores all the routes for the application.</span></span>

### <a name="url-patterns"></a><span data-ttu-id="b6af3-131">Padrões de URL</span><span class="sxs-lookup"><span data-stu-id="b6af3-131">URL Patterns</span></span>

<span data-ttu-id="b6af3-132">Um padrão de URL pode conter valores literais e os espaços reservados de variável (conhecidos como parâmetros de URL).</span><span class="sxs-lookup"><span data-stu-id="b6af3-132">A URL pattern can contain literal values and variable placeholders (referred to as URL parameters).</span></span> <span data-ttu-id="b6af3-133">Os literais e os espaços reservados estão localizados em segmentos da URL que são delimitados por barra (`/`) caracteres.</span><span class="sxs-lookup"><span data-stu-id="b6af3-133">The literals and placeholders are located in segments of the URL which are delimited by the slash (`/`) character.</span></span>

<span data-ttu-id="b6af3-134">Quando é feita uma solicitação para o aplicativo da web, a URL é analisada em segmentos e espaços reservados e os valores das variáveis são fornecidos para o manipulador de solicitações.</span><span class="sxs-lookup"><span data-stu-id="b6af3-134">When a request to your web application is made, the URL is parsed into segments and placeholders, and the variable values are provided to the request handler.</span></span> <span data-ttu-id="b6af3-135">Esse processo é semelhante à forma como os dados em uma cadeia de caracteres de consulta são analisados e passados para o manipulador de solicitação.</span><span class="sxs-lookup"><span data-stu-id="b6af3-135">This process is similar to the way the data in a query string is parsed and passed to the request handler.</span></span> <span data-ttu-id="b6af3-136">Em ambos os casos, informações de variáveis são incluídas na URL e passadas para o manipulador na forma de pares chave-valor.</span><span class="sxs-lookup"><span data-stu-id="b6af3-136">In both cases, variable information is included in the URL and passed to the handler in the form of key-value pairs.</span></span> <span data-ttu-id="b6af3-137">Cadeias de caracteres de consulta, as chaves e os valores são na URL.</span><span class="sxs-lookup"><span data-stu-id="b6af3-137">For query strings, both the keys and the values are in the URL.</span></span> <span data-ttu-id="b6af3-138">Para rotas, as chaves são os nomes de espaço reservado definidos no padrão de URL e apenas os valores estão na URL.</span><span class="sxs-lookup"><span data-stu-id="b6af3-138">For routes, the keys are the placeholder names defined in the URL pattern, and only the values are in the URL.</span></span>

<span data-ttu-id="b6af3-139">Em um padrão de URL, você deve definir espaços reservados, colocando-os entre chaves ( `{` e `}` ).</span><span class="sxs-lookup"><span data-stu-id="b6af3-139">In a URL pattern, you define placeholders by enclosing them in braces ( `{` and `}` ).</span></span> <span data-ttu-id="b6af3-140">Você pode definir mais de um espaço reservado em um segmento, mas os espaços reservados que devem ser separados por um valor literal.</span><span class="sxs-lookup"><span data-stu-id="b6af3-140">You can define more than one placeholder in a segment, but the placeholders must be separated by a literal value.</span></span> <span data-ttu-id="b6af3-141">Por exemplo, `{language}-{country}/{action}` é um padrão de uma rota válida.</span><span class="sxs-lookup"><span data-stu-id="b6af3-141">For example, `{language}-{country}/{action}` is a valid route pattern.</span></span> <span data-ttu-id="b6af3-142">No entanto, `{language}{country}/{action}` não é um padrão válido, porque não há nenhum valor literal ou o delimitador entre os espaços reservados.</span><span class="sxs-lookup"><span data-stu-id="b6af3-142">However, `{language}{country}/{action}` is not a valid pattern, because there is no literal value or delimiter between the placeholders.</span></span> <span data-ttu-id="b6af3-143">Portanto, o roteamento não pode determinar onde separar o valor para o espaço reservado de idioma do valor do espaço reservado de país.</span><span class="sxs-lookup"><span data-stu-id="b6af3-143">Therefore, routing cannot determine where to separate the value for the language placeholder from the value for the country placeholder.</span></span>

### <a name="mapping-and-registering-routes"></a><span data-ttu-id="b6af3-144">Mapeamento e registrando rotas</span><span class="sxs-lookup"><span data-stu-id="b6af3-144">Mapping and Registering Routes</span></span>

<span data-ttu-id="b6af3-145">Antes de você pode incluir rotas para páginas do aplicativo de exemplo Wingtip Toys, você deve registrar as rotas quando o aplicativo for iniciado.</span><span class="sxs-lookup"><span data-stu-id="b6af3-145">Before you can include routes to pages of the Wingtip Toys sample application, you must register the routes when the application starts.</span></span> <span data-ttu-id="b6af3-146">Para registrar as rotas, você modificará o `Application_Start` manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="b6af3-146">To register the routes, you will modify the `Application_Start` event handler.</span></span>

1. <span data-ttu-id="b6af3-147">Em **Solution Explorer**do Visual Studio, localize e abra a *Global.asax.cs* arquivo.</span><span class="sxs-lookup"><span data-stu-id="b6af3-147">In **Solution Explorer**of Visual Studio, find and open the *Global.asax.cs* file.</span></span>
2. <span data-ttu-id="b6af3-148">Adicione o código realçado em amarelo para o *Global.asax.cs* arquivos da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="b6af3-148">Add the code highlighted in yellow to the *Global.asax.cs* file as follows:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample1.cs?highlight=30-31,34-46)]

<span data-ttu-id="b6af3-149">Quando inicia do aplicativo de exemplo Wingtip Toys, ele chama o `Application_Start` manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="b6af3-149">When the Wingtip Toys sample application starts, it calls the `Application_Start` event handler.</span></span> <span data-ttu-id="b6af3-150">No final do manipulador de eventos, o `RegisterCustomRoutes` método é chamado.</span><span class="sxs-lookup"><span data-stu-id="b6af3-150">At the end of this event handler, the `RegisterCustomRoutes` method is called.</span></span> <span data-ttu-id="b6af3-151">O `RegisterCustomRoutes` método adiciona cada rota chamando o `MapPageRoute` método o `RouteCollection` objeto.</span><span class="sxs-lookup"><span data-stu-id="b6af3-151">The `RegisterCustomRoutes` method adds each route by calling the `MapPageRoute` method of the `RouteCollection` object.</span></span> <span data-ttu-id="b6af3-152">Rotas são definidas usando um nome de rota, uma URL da rota e uma URL física.</span><span class="sxs-lookup"><span data-stu-id="b6af3-152">Routes are defined using a route name, a route URL and a physical URL.</span></span>

<span data-ttu-id="b6af3-153">O primeiro parâmetro ("`ProductsByCategoryRoute`") é o nome da rota.</span><span class="sxs-lookup"><span data-stu-id="b6af3-153">The first parameter ("`ProductsByCategoryRoute`") is the route name.</span></span> <span data-ttu-id="b6af3-154">Ele é usado para chamar a rota quando ela for necessária.</span><span class="sxs-lookup"><span data-stu-id="b6af3-154">It is used to call the route when it is needed.</span></span> <span data-ttu-id="b6af3-155">O segundo parâmetro ("`Category/{categoryName}`") define a URL que pode ser dinâmica com base no código de substituição amigável.</span><span class="sxs-lookup"><span data-stu-id="b6af3-155">The second parameter ("`Category/{categoryName}`") defines the friendly replacement URL that can be dynamic based on code.</span></span> <span data-ttu-id="b6af3-156">Você usa essa rota quando você estiver preenchendo um controle de dados com links que são gerados com base nos dados.</span><span class="sxs-lookup"><span data-stu-id="b6af3-156">You use this route when you are populating a data control with links that are generated based on data.</span></span> <span data-ttu-id="b6af3-157">Uma rota é mostrada a seguir:</span><span class="sxs-lookup"><span data-stu-id="b6af3-157">A route is shown as follows:</span></span>

[!code-csharp[Main](url-routing/samples/sample2.cs)]

<span data-ttu-id="b6af3-158">O segundo parâmetro da rota inclui um valor dinâmico especificado por chaves (`{ }`).</span><span class="sxs-lookup"><span data-stu-id="b6af3-158">The second parameter of the route includes a dynamic value specified by braces (`{ }`).</span></span> <span data-ttu-id="b6af3-159">Nesse caso, o `categoryName` é uma variável que será usada para determinar o caminho de roteamento adequado.</span><span class="sxs-lookup"><span data-stu-id="b6af3-159">In this case, the `categoryName` is a variable that will be used to determine the proper routing path.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b6af3-160">**Opcional**</span><span class="sxs-lookup"><span data-stu-id="b6af3-160">**Optional**</span></span>
> 
> <span data-ttu-id="b6af3-161">Talvez seja mais fácil de gerenciar seu código, movendo o `RegisterCustomRoutes` método para uma classe separada.</span><span class="sxs-lookup"><span data-stu-id="b6af3-161">You might find it easier to manage your code by moving the `RegisterCustomRoutes` method to a separate class.</span></span> <span data-ttu-id="b6af3-162">No *lógica* pasta, crie um separado `RouteActions` classe.</span><span class="sxs-lookup"><span data-stu-id="b6af3-162">In the *Logic* folder, create a separate `RouteActions` class.</span></span> <span data-ttu-id="b6af3-163">Mover acima `RegisterCustomRoutes` método a partir de *Global.asax.cs* arquivo para a nova `RoutesActions` classe.</span><span class="sxs-lookup"><span data-stu-id="b6af3-163">Move the above `RegisterCustomRoutes` method from the *Global.asax.cs* file into the new `RoutesActions` class.</span></span> <span data-ttu-id="b6af3-164">Use o `RoleActions` classe e o `createAdmin` método como um exemplo de como chamar o `RegisterCustomRoutes` método do *Global.asax.cs* arquivo.</span><span class="sxs-lookup"><span data-stu-id="b6af3-164">Use the `RoleActions` class and the `createAdmin` method as an example of how to call the `RegisterCustomRoutes` method from the *Global.asax.cs* file.</span></span>


<span data-ttu-id="b6af3-165">Você também deve ter notado o `RegisterRoutes` chamada de método usando o `RouteConfig` objeto no início do `Application_Start` manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="b6af3-165">You may also have noticed the `RegisterRoutes` method call using the `RouteConfig` object at the beginning of the `Application_Start` event handler.</span></span> <span data-ttu-id="b6af3-166">Esta chamada é feita para implementar roteamento padrão.</span><span class="sxs-lookup"><span data-stu-id="b6af3-166">This call is made to implement default routing.</span></span> <span data-ttu-id="b6af3-167">Foi incluída como código padrão quando você criou o aplicativo usando o modelo de formulários da Web do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b6af3-167">It was included as default code when you created the application using Visual Studio's Web Forms template.</span></span>

## <a name="retrieving-and-using-route-data"></a><span data-ttu-id="b6af3-168">Recuperar e usar dados de rota</span><span class="sxs-lookup"><span data-stu-id="b6af3-168">Retrieving and Using Route Data</span></span>

<span data-ttu-id="b6af3-169">Conforme mencionado acima, as rotas podem ser definidas.</span><span class="sxs-lookup"><span data-stu-id="b6af3-169">As mentioned above, routes can be defined.</span></span> <span data-ttu-id="b6af3-170">O código que você adicionou ao `Application_Start` manipulador de eventos de *Global.asax.cs* arquivo carrega as rotas definidas pelo.</span><span class="sxs-lookup"><span data-stu-id="b6af3-170">The code that you added to the `Application_Start` event handler in the *Global.asax.cs* file loads the definable routes.</span></span>

### <a name="setting-routes"></a><span data-ttu-id="b6af3-171">Configuração de rotas</span><span class="sxs-lookup"><span data-stu-id="b6af3-171">Setting Routes</span></span>

<span data-ttu-id="b6af3-172">Rotas exigem que você adicione código adicional.</span><span class="sxs-lookup"><span data-stu-id="b6af3-172">Routes require you to add additional code.</span></span> <span data-ttu-id="b6af3-173">Neste tutorial, você usará a associação de modelo para recuperar um `RouteValueDictionary` objeto que é usado ao gerar as rotas usando dados de um controle de dados.</span><span class="sxs-lookup"><span data-stu-id="b6af3-173">In this tutorial, you will use model binding to retrieve a `RouteValueDictionary` object that is used when generating the routes using data from a data control.</span></span> <span data-ttu-id="b6af3-174">O `RouteValueDictionary` objeto conterá uma lista de nomes de produtos que pertencem a uma categoria específica de produtos.</span><span class="sxs-lookup"><span data-stu-id="b6af3-174">The `RouteValueDictionary` object will contain a list of product names that belong to a specific category of products.</span></span> <span data-ttu-id="b6af3-175">Um link é criado para cada produto com base nos dados de rota.</span><span class="sxs-lookup"><span data-stu-id="b6af3-175">A link is created for each product based on the data and route.</span></span>

#### <a name="enable-routes-for-categories-and-products"></a><span data-ttu-id="b6af3-176">Habilitar rotas para categorias e produtos</span><span class="sxs-lookup"><span data-stu-id="b6af3-176">Enable Routes for Categories and Products</span></span>

<span data-ttu-id="b6af3-177">Em seguida, você atualizará o aplicativo para usar o `ProductsByCategoryRoute` para determinar a rota correta para incluir para cada link de categoria de produto.</span><span class="sxs-lookup"><span data-stu-id="b6af3-177">Next, you'll update the application to use the `ProductsByCategoryRoute` to determine the correct route to include for each product category link.</span></span> <span data-ttu-id="b6af3-178">Você também deverá atualizar o *ProductList. aspx* página para incluir um link roteado para cada produto.</span><span class="sxs-lookup"><span data-stu-id="b6af3-178">You'll also update the *ProductList.aspx* page to include a routed link for each product.</span></span> <span data-ttu-id="b6af3-179">Os links serão exibidos como estavam antes da alteração, no entanto, os links usará o roteamento de URL.</span><span class="sxs-lookup"><span data-stu-id="b6af3-179">The links will be displayed as they were before the change, however the links will now use URL routing.</span></span>

1. <span data-ttu-id="b6af3-180">Em **Solution Explorer**, abra o *Site.Master* página se ainda não estiver aberto.</span><span class="sxs-lookup"><span data-stu-id="b6af3-180">In **Solution Explorer**, open the *Site.Master* page if it is not already open.</span></span>
2. <span data-ttu-id="b6af3-181">Atualização de **ListView** controle chamado "`categoryList`" com as alterações destacadas em amarelo, portanto a marcação aparece da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="b6af3-181">Update the **ListView** control named "`categoryList`" with the changes highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample3.aspx?highlight=7-9)]
3. <span data-ttu-id="b6af3-182">Em **Solution Explorer**, abra o *ProductList. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="b6af3-182">In **Solution Explorer**, open the *ProductList.aspx* page.</span></span>
4. <span data-ttu-id="b6af3-183">Atualização de `ItemTemplate` elemento o *ProductList. aspx* página com as atualizações realçados em amarelo, então a marcação aparece da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="b6af3-183">Update the `ItemTemplate` element of the *ProductList.aspx* page with the updates highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample4.aspx?highlight=6-9,14-16)]
5. <span data-ttu-id="b6af3-184">Abra o code-behind de *ProductList.aspx.cs* e adicione o seguinte namespace como realçada em amarelo:</span><span class="sxs-lookup"><span data-stu-id="b6af3-184">Open the code-behind of *ProductList.aspx.cs* and add the following namespace as highlighted in yellow:</span></span>  

    [!code-csharp[Main](url-routing/samples/sample5.cs?highlight=9)]
6. <span data-ttu-id="b6af3-185">Substitua o `GetProducts` método de code-behind (*ProductList.aspx.cs*) com o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="b6af3-185">Replace the `GetProducts` method of the code-behind (*ProductList.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample6.cs)]

#### <a name="add-code-for-product-details"></a><span data-ttu-id="b6af3-186">Adicione código para obter detalhes do produto</span><span class="sxs-lookup"><span data-stu-id="b6af3-186">Add Code for Product Details</span></span>

<span data-ttu-id="b6af3-187">Agora, atualize o code-behind (*ProductDetails.aspx.cs*) para o *ProductDetails.aspx* página para usar dados de rota.</span><span class="sxs-lookup"><span data-stu-id="b6af3-187">Now, update the code-behind (*ProductDetails.aspx.cs*) for the *ProductDetails.aspx* page to use route data.</span></span> <span data-ttu-id="b6af3-188">Observe que o novo `GetProduct` método também aceita um valor de cadeia de caracteres de consulta para o caso em que o usuário tem um link de indicador que usa a URL amigável não, não roteado mais antiga.</span><span class="sxs-lookup"><span data-stu-id="b6af3-188">Notice that the new `GetProduct` method also accepts a query string value for the case where the user has a link bookmarked that uses the older non-friendly, non-routed URL.</span></span>

1. <span data-ttu-id="b6af3-189">Substitua o `GetProduct` método de code-behind (*ProductDetails.aspx.cs*) com o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="b6af3-189">Replace the `GetProduct` method of the code-behind (*ProductDetails.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample7.cs)]

## <a name="running-the-application"></a><span data-ttu-id="b6af3-190">Executando o aplicativo</span><span class="sxs-lookup"><span data-stu-id="b6af3-190">Running the Application</span></span>

<span data-ttu-id="b6af3-191">Você pode executar o aplicativo agora para ver as rotas atualizadas.</span><span class="sxs-lookup"><span data-stu-id="b6af3-191">You can run the application now to see the updated routes.</span></span>

1. <span data-ttu-id="b6af3-192">Pressione **F5** para executar o aplicativo de exemplo Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="b6af3-192">Press **F5** to run the Wingtip Toys sample application.</span></span>  
 <span data-ttu-id="b6af3-193">O navegador é aberto e mostra o *Default.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="b6af3-193">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="b6af3-194">Clique o **produtos** link na parte superior da página.</span><span class="sxs-lookup"><span data-stu-id="b6af3-194">Click the **Products** link at the top of the page.</span></span>  
 <span data-ttu-id="b6af3-195">Todos os produtos são exibidos na *ProductList. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="b6af3-195">All products are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="b6af3-196">A URL a seguir (usando o seu número de porta) é exibida para o navegador:</span><span class="sxs-lookup"><span data-stu-id="b6af3-196">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/ProductList`
3. <span data-ttu-id="b6af3-197">Em seguida, clique o **carros** link de categoria na parte superior da página.</span><span class="sxs-lookup"><span data-stu-id="b6af3-197">Next, click the **Cars** category link near the top of the page.</span></span>  
 <span data-ttu-id="b6af3-198">Somente carros são exibidos na *ProductList. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="b6af3-198">Only cars are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="b6af3-199">A URL a seguir (usando o seu número de porta) é exibida para o navegador:</span><span class="sxs-lookup"><span data-stu-id="b6af3-199">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Category/Cars`
4. <span data-ttu-id="b6af3-200">Clique no link que contém o nome do primeiro carro listado na página ("**conversíveis carro**") para exibir os detalhes do produto.</span><span class="sxs-lookup"><span data-stu-id="b6af3-200">Click the link containing the name of the first car listed on the page ("**Convertible Car**") to display the product details.</span></span>  
 <span data-ttu-id="b6af3-201">A URL a seguir (usando o seu número de porta) é exibida para o navegador:</span><span class="sxs-lookup"><span data-stu-id="b6af3-201">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Product/Convertible%20Car`
5. <span data-ttu-id="b6af3-202">Em seguida, insira a seguinte URL não roteado (usando o seu número de porta) no navegador:</span><span class="sxs-lookup"><span data-stu-id="b6af3-202">Next, enter the following non-routed URL (using your port number) into the browser:</span></span>  
    `https://localhost:44300/ProductDetails.aspx?productID=2`  
 <span data-ttu-id="b6af3-203">O código reconhece uma URL que inclui uma cadeia de caracteres de consulta, para o caso em que um usuário tem um link de indicador.</span><span class="sxs-lookup"><span data-stu-id="b6af3-203">The code still recognizes a URL that includes a query string, for the case where a user has a link bookmarked.</span></span>

## <a name="summary"></a><span data-ttu-id="b6af3-204">Resumo</span><span class="sxs-lookup"><span data-stu-id="b6af3-204">Summary</span></span>

<span data-ttu-id="b6af3-205">Neste tutorial, você adicionou rotas para categorias e produtos.</span><span class="sxs-lookup"><span data-stu-id="b6af3-205">In this tutorial, you have added routes for categories and products.</span></span> <span data-ttu-id="b6af3-206">Você aprendeu como rotas podem ser integradas com controles de dados que usam a associação de modelo.</span><span class="sxs-lookup"><span data-stu-id="b6af3-206">You have learned how routes can be integrated with data controls that use model binding.</span></span> <span data-ttu-id="b6af3-207">O seguinte tutorial, você implementará o tratamento de erro global.</span><span class="sxs-lookup"><span data-stu-id="b6af3-207">In the next tutorial, you will implement global error handling.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b6af3-208">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="b6af3-208">Additional Resources</span></span>

[<span data-ttu-id="b6af3-209">URLs amigáveis do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b6af3-209">ASP.NET Friendly URLs</span></span>](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/)  
[<span data-ttu-id="b6af3-210">Implantar um aplicativo de formulários da Web do ASP.NET seguro com associação, OAuth e o banco de dados SQL para serviço de aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="b6af3-210">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="b6af3-211">Microsoft Azure - versão de avaliação gratuita</span><span class="sxs-lookup"><span data-stu-id="b6af3-211">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

> [!div class="step-by-step"]
> <span data-ttu-id="b6af3-212">[Anterior](membership-and-administration.md)
> [Próximo](aspnet-error-handling.md)</span><span class="sxs-lookup"><span data-stu-id="b6af3-212">[Previous](membership-and-administration.md)
[Next](aspnet-error-handling.md)</span></span>
