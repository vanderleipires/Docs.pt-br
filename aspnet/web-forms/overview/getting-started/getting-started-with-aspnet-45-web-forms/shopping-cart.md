---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Carrinho de compras | Microsoft Docs
author: Erikre
description: Esta série de tutoriais ensinará os conceitos básicos da criação de um aplicativo de Web Forms do ASP.NET usando o ASP.NET 4.5 e do Microsoft Visual Studio Express 2013 para nós...
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 22253b8708efd9ce505c9fbeb9cb2e942588b37d
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37375772"
---
<a name="shopping-cart"></a><span data-ttu-id="8bf16-103">Carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-103">Shopping Cart</span></span>
====================
<span data-ttu-id="8bf16-104">por [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="8bf16-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="8bf16-105">[Baixe o projeto de exemplo do Wingtip Toys (c#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) ou [Baixe o livro eletrônico (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="8bf16-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="8bf16-106">Esta série de tutoriais ensinará os conceitos básicos da criação de um aplicativo de Web Forms do ASP.NET usando o ASP.NET 4.5 e do Microsoft Visual Studio Express 2013 para Web.</span><span class="sxs-lookup"><span data-stu-id="8bf16-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="8bf16-107">Um Visual Studio 2013 [projeto com código-fonte c#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) está disponível para acompanhar esta série de tutoriais.</span><span class="sxs-lookup"><span data-stu-id="8bf16-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="8bf16-108">Este tutorial descreve a lógica comercial necessária para adicionar um carrinho de compras para o aplicativo de Web Forms do ASP.NET de exemplo Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="8bf16-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="8bf16-109">Este tutorial se baseia no tutorial anterior "Exibir dados de itens e detalhes" e faz parte da série de tutoriais de Wingtip Toys Store.</span><span class="sxs-lookup"><span data-stu-id="8bf16-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="8bf16-110">Depois de concluir este tutorial, os usuários do seu aplicativo de exemplo será capazes de adicionar, remover e modificar os produtos no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="8bf16-111">O que você aprenderá:</span><span class="sxs-lookup"><span data-stu-id="8bf16-111">What you'll learn:</span></span>

1. <span data-ttu-id="8bf16-112">Como criar um carrinho de compras para o aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="8bf16-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="8bf16-113">Como habilitar usuários adicionar itens ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="8bf16-114">Como adicionar um [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) controle para exibir os detalhes de carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="8bf16-115">Como calcular e exibir o total do pedido.</span><span class="sxs-lookup"><span data-stu-id="8bf16-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="8bf16-116">Como remover e atualizar itens no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="8bf16-117">Como incluir um contador de carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="8bf16-118">Recursos de código neste tutorial:</span><span class="sxs-lookup"><span data-stu-id="8bf16-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="8bf16-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="8bf16-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="8bf16-120">Anotações de dados</span><span class="sxs-lookup"><span data-stu-id="8bf16-120">Data Annotations</span></span>
3. <span data-ttu-id="8bf16-121">Fortemente tipado a controles de dados</span><span class="sxs-lookup"><span data-stu-id="8bf16-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="8bf16-122">Associação de modelos</span><span class="sxs-lookup"><span data-stu-id="8bf16-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="8bf16-123">Criando um carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="8bf16-124">Anteriormente nesta série de tutoriais, você adicionou páginas e código para exibir dados de produto de um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="8bf16-125">Neste tutorial, você criará um carrinho de compras para gerenciar os produtos que os usuários estão interessados em comprar.</span><span class="sxs-lookup"><span data-stu-id="8bf16-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="8bf16-126">Os usuários poderão procurar e adicionar itens ao carrinho de compras, mesmo se eles são registrados ou não conectados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="8bf16-127">Para gerenciar o acesso de carrinho de compras, você atribuirá usuários um único `ID` usando um identificador global exclusivo (GUID) quando o usuário acessa o shopping cart pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="8bf16-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="8bf16-128">Você armazená-la `ID` usando o estado de sessão do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8bf16-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8bf16-129">O estado de sessão do ASP.NET é um local conveniente para armazenar informações específicas do usuário que irá expirar depois que o usuário deixar o site.</span><span class="sxs-lookup"><span data-stu-id="8bf16-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="8bf16-130">Embora o uso indevido do estado da sessão pode ter implicações de desempenho em sites maiores, claro do uso de sessão estado funciona bem para fins de demonstração.</span><span class="sxs-lookup"><span data-stu-id="8bf16-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="8bf16-131">O projeto de exemplo Wingtip Toys mostra como usar o estado de sessão sem um provedor externo, em que o estado de sessão é armazenado em processo no servidor web que hospeda o site.</span><span class="sxs-lookup"><span data-stu-id="8bf16-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="8bf16-132">Locais maiores que fornecem várias instâncias de um aplicativo ou para sites que executam várias instâncias de um aplicativo em diferentes servidores, considere usar **serviço de Cache do Windows Azure**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="8bf16-133">Esse serviço de Cache fornece um serviço de cache distribuído que é externo ao site da web e resolve o problema de usar o estado de sessão em processo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="8bf16-134">Para obter mais informações, consulte [como usar estado de sessão do ASP.NET com o Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="8bf16-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="8bf16-135">Adicionar CartItem como uma classe de modelo</span><span class="sxs-lookup"><span data-stu-id="8bf16-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="8bf16-136">Anteriormente nessa série de tutoriais, você definiu o esquema para os dados de categoria e produto, criando o `Category` e `Product` as classes a *modelos* pasta.</span><span class="sxs-lookup"><span data-stu-id="8bf16-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="8bf16-137">Agora, adicione uma nova classe para definir o esquema para o carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="8bf16-138">Mais tarde neste tutorial, você adicionará uma classe para tratar o acesso a dados para o `CartItem` tabela.</span><span class="sxs-lookup"><span data-stu-id="8bf16-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="8bf16-139">Essa classe fornece a lógica de negócios para adicionar, remover e atualizar itens no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="8bf16-140">Clique com botão direito do *modelos* pasta e selecione **Add**  - &gt; **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Carrinho de compras - Novo Item](shopping-cart/_static/image1.png)
2. <span data-ttu-id="8bf16-142">A caixa de diálogo **Adicionar Novo Item** é exibida.</span><span class="sxs-lookup"><span data-stu-id="8bf16-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="8bf16-143">Selecione **código**e, em seguida, selecione **classe**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-143">Select **Code**, and then select **Class**.</span></span> 

    ![-O carrinho de compras diálogo Adicionar Novo Item](shopping-cart/_static/image2.png)
3. <span data-ttu-id="8bf16-145">Nomeie essa nova classe *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="8bf16-146">Clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-146">Click **Add**.</span></span>  
   <span data-ttu-id="8bf16-147">O novo arquivo de classe é exibido no editor.</span><span class="sxs-lookup"><span data-stu-id="8bf16-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="8bf16-148">Substitua o código padrão pelo código a seguir:</span><span class="sxs-lookup"><span data-stu-id="8bf16-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="8bf16-149">O `CartItem` classe contém o esquema que define cada produto que um usuário adiciona ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="8bf16-150">Essa classe é semelhante a outras classes de esquema que você criou anteriormente na série de tutoriais.</span><span class="sxs-lookup"><span data-stu-id="8bf16-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="8bf16-151">Por convenção, espera Entity Framework Code First que a chave primária para o `CartItem` tabela será `CartItemId` ou `ID`.</span><span class="sxs-lookup"><span data-stu-id="8bf16-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="8bf16-152">No entanto, o código substitui o comportamento padrão usando a anotação de dados `[Key]` atributo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="8bf16-153">O `Key` atributo da propriedade ItemId Especifica que o `ItemID` propriedade é a chave primária.</span><span class="sxs-lookup"><span data-stu-id="8bf16-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="8bf16-154">O `CartId` propriedade especifica o `ID` do usuário que está associado com o item para comprar.</span><span class="sxs-lookup"><span data-stu-id="8bf16-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="8bf16-155">Você adicionará código para criar esse usuário `ID` quando o usuário acessa o carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="8bf16-156">Isso `ID` também será armazenada como uma variável de sessão do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8bf16-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="8bf16-157">Atualizar o contexto do produto</span><span class="sxs-lookup"><span data-stu-id="8bf16-157">Update the Product Context</span></span>

<span data-ttu-id="8bf16-158">Além de adicionar o `CartItem` classe, você precisará atualizar a classe de contexto do banco de dados que gerencia as classes de entidade e que fornece acesso a dados no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="8bf16-159">Para fazer isso, você adicionará o recém-criado `CartItem` modelo de classe para o `ProductContext` classe.</span><span class="sxs-lookup"><span data-stu-id="8bf16-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="8bf16-160">No **Gerenciador de soluções**, encontre e abra o *ProductContext.cs* arquivo o *modelos* pasta.</span><span class="sxs-lookup"><span data-stu-id="8bf16-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="8bf16-161">Adicione o código realçado para o *ProductContext.cs* arquivos da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8bf16-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="8bf16-162">Conforme mencionado anteriormente nessa série de tutoriais, o código a *ProductContext.cs* arquivo adiciona o `System.Data.Entity` namespace para que você tenha acesso a toda a funcionalidade de núcleo do Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="8bf16-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="8bf16-163">Essa funcionalidade inclui a capacidade de consultar, inserir, atualizar e excluir dados trabalhando com objetos com rigidez de tipos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="8bf16-164">O `ProductContext` classe adiciona o acesso ao recém-adicionada `CartItem` classe de modelo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="8bf16-165">Gerenciando a lógica de negócios compras do carrinho</span><span class="sxs-lookup"><span data-stu-id="8bf16-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="8bf16-166">Em seguida, você criará a `ShoppingCart` classe em uma nova *lógica* pasta.</span><span class="sxs-lookup"><span data-stu-id="8bf16-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="8bf16-167">O `ShoppingCart` classe controla o acesso a dados para o `CartItem` tabela.</span><span class="sxs-lookup"><span data-stu-id="8bf16-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="8bf16-168">A classe também incluirá a lógica de negócios para adicionar, remover e atualizar itens no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="8bf16-169">A lógica de carrinho de compras que você irá adicionar conterá a funcionalidade para gerenciar as seguintes ações:</span><span class="sxs-lookup"><span data-stu-id="8bf16-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="8bf16-170">Adicionando itens ao carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="8bf16-171">Removendo itens do carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="8bf16-172">Obtendo a ID de carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="8bf16-173">Recuperando itens do carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="8bf16-174">Totalizando o valor de todos os itens de carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="8bf16-175">Atualizando os dados do carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-175">Updating the shopping cart data</span></span>

<span data-ttu-id="8bf16-176">Uma página de compras (*ShoppingCart.aspx*) e a classe de carrinho de compras será usado em conjunto para acessar dados do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="8bf16-177">A página de carrinho de compras exibirá todos os itens que o usuário adiciona ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="8bf16-178">Além do carrinho de compras página e classe, você criará uma página (*AddToCart.aspx*) para adicionar produtos ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="8bf16-179">Você também adicionará código para o *ProductList. aspx* página e o *ProductDetails.aspx* página que fornecerá um link para o *AddToCart.aspx* de página, para que o usuário pode adicionar produtos ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="8bf16-180">O diagrama a seguir mostra o processo básico que ocorre quando o usuário adiciona um produto ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Carrinho de compras – adicionar ao carrinho de compras](shopping-cart/_static/image3.png)

<span data-ttu-id="8bf16-182">Quando o usuário clica o **adicionar ao carrinho** em um link da *ProductList. aspx* página ou o *ProductDetails.aspx* página, o aplicativo navegará para o *AddToCart.aspx* página e, em seguida, automaticamente para a *ShoppingCart.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="8bf16-183">O *AddToCart.aspx* página adicionará o selecionar o produto ao carrinho de compras, chamando um método na classe ShoppingCart.</span><span class="sxs-lookup"><span data-stu-id="8bf16-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="8bf16-184">O *ShoppingCart.aspx* página exibirá os produtos que foram adicionados ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="8bf16-185">Criando a classe de carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="8bf16-186">O `ShoppingCart` classe será adicionado a uma pasta separada no aplicativo para que haja uma distinção clara entre o modelo (pasta de modelos), as páginas (pasta raiz) e a lógica (pasta lógica).</span><span class="sxs-lookup"><span data-stu-id="8bf16-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="8bf16-187">No **Gerenciador de soluções**, clique com botão direito do **WingtipToys**do projeto e selecione **adicionar**-&gt;**nova pasta**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="8bf16-188">Nomeie a nova pasta *lógica*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="8bf16-189">Clique com botão direito do *lógica* pasta e, em seguida, selecione **Add**  - &gt; **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="8bf16-190">Adicionar um novo arquivo de classe chamado *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="8bf16-191">Substitua o código padrão pelo código a seguir:</span><span class="sxs-lookup"><span data-stu-id="8bf16-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="8bf16-192">O `AddToCart` método permite que os produtos individuais a serem incluídos no carrinho de compras com base no produto `ID`.</span><span class="sxs-lookup"><span data-stu-id="8bf16-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="8bf16-193">O produto é adicionado ao carrinho, ou se o carrinho já contém um item para o produto, a quantidade é incrementada.</span><span class="sxs-lookup"><span data-stu-id="8bf16-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="8bf16-194">O `GetCartId` método retorna o carrinho `ID` para o usuário.</span><span class="sxs-lookup"><span data-stu-id="8bf16-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="8bf16-195">O carrinho `ID` é usado para rastrear os itens que um usuário tem em seu carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="8bf16-196">Se o usuário não tiver um carrinho existente `ID`, um novo carrinho `ID` é criado para eles.</span><span class="sxs-lookup"><span data-stu-id="8bf16-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="8bf16-197">Se o usuário está conectado como um usuário registrado, o carrinho `ID` é definido como seu nome de usuário.</span><span class="sxs-lookup"><span data-stu-id="8bf16-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="8bf16-198">No entanto, se o usuário não está conectado no carrinho `ID` é definido como um valor exclusivo (um GUID).</span><span class="sxs-lookup"><span data-stu-id="8bf16-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="8bf16-199">Um GUID garante que apenas um carrinho é criado para cada usuário, com base em sessão.</span><span class="sxs-lookup"><span data-stu-id="8bf16-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="8bf16-200">O `GetCartItems` método retorna uma lista de itens para o usuário do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="8bf16-201">Mais tarde neste tutorial, você verá que a associação de modelo é usada para exibir os itens de carrinho de compras carrinho usando o `GetCartItems` método.</span><span class="sxs-lookup"><span data-stu-id="8bf16-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="8bf16-202">Criando a funcionalidade de adicionar ao carrinho</span><span class="sxs-lookup"><span data-stu-id="8bf16-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="8bf16-203">Como mencionado anteriormente, você criará uma página de processamento de chamada *AddToCart.aspx* que será usado para adicionar novos produtos ao carrinho de compras do usuário.</span><span class="sxs-lookup"><span data-stu-id="8bf16-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="8bf16-204">Esta página será chamada a `AddToCart` método no `ShoppingCart` classe que você acabou de criar.</span><span class="sxs-lookup"><span data-stu-id="8bf16-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="8bf16-205">O *AddToCart.aspx* página esperarão que um produto `ID` é passado para ele.</span><span class="sxs-lookup"><span data-stu-id="8bf16-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="8bf16-206">Este produto `ID` será usado ao chamar o `AddToCart` método o `ShoppingCart` classe.</span><span class="sxs-lookup"><span data-stu-id="8bf16-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8bf16-207">Vamos modificar o code-behind (*AddToCart.aspx.cs*) para essa página, não na página da interface do usuário (*AddToCart.aspx*).</span><span class="sxs-lookup"><span data-stu-id="8bf16-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="8bf16-208">Para criar o adicionar ao carrinho funcionalidade:</span><span class="sxs-lookup"><span data-stu-id="8bf16-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="8bf16-209">No **Gerenciador de soluções**, com o botão direito do **WingtipToys**do projeto, clique em **Add**  - &gt; **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="8bf16-210">A caixa de diálogo **Adicionar Novo Item** é exibida.</span><span class="sxs-lookup"><span data-stu-id="8bf16-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="8bf16-211">Adicionar uma nova página padrão (Web Form) para o aplicativo chamado *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![-O carrinho de compras Adicionar formulário da Web](shopping-cart/_static/image4.png)
3. <span data-ttu-id="8bf16-213">Na **Gerenciador de soluções**, clique com botão direito do *AddToCart.aspx* página e, em seguida, clique em **Exibir código**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="8bf16-214">O *AddToCart.aspx.cs* arquivo code-behind é aberto no editor.</span><span class="sxs-lookup"><span data-stu-id="8bf16-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="8bf16-215">Substitua o código existente na *AddToCart.aspx.cs* de lógica com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8bf16-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="8bf16-216">Quando o *AddToCart.aspx* página é carregada, o produto `ID` é recuperado da cadeia de consulta.</span><span class="sxs-lookup"><span data-stu-id="8bf16-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="8bf16-217">Em seguida, uma instância da classe de carrinho de compras é criada e usada para chamar o `AddToCart` método que você adicionou anteriormente neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="8bf16-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="8bf16-218">O `AddToCart` método, contido na *ShoppingCartActions.cs* de arquivos, que inclui a lógica para adicionar o produto selecionado ao carrinho de compras ou aumentar a quantidade de produtos do produto selecionado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="8bf16-219">Se o produto não tenha sido adicionado ao carrinho de compras, o produto é adicionado para o `CartItem` tabela do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="8bf16-220">Se o produto já foi adicionado ao carrinho de compras e o usuário adiciona um item adicional do mesmo produto, a quantidade de produtos é incrementada no `CartItem` tabela.</span><span class="sxs-lookup"><span data-stu-id="8bf16-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="8bf16-221">Por fim, a página redireciona de volta para o *ShoppingCart.aspx* página que você adicionará na próxima etapa, em que o usuário vê uma lista atualizada dos itens no carrinho.</span><span class="sxs-lookup"><span data-stu-id="8bf16-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="8bf16-222">Como mencionado anteriormente, um usuário `ID` é usado para identificar os produtos que estão associados um usuário específico.</span><span class="sxs-lookup"><span data-stu-id="8bf16-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="8bf16-223">Isso `ID` é adicionado a uma linha de `CartItem` cada vez que o usuário adiciona um produto ao carrinho de compras de tabela.</span><span class="sxs-lookup"><span data-stu-id="8bf16-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="8bf16-224">Criando o carrinho de compras da interface do usuário</span><span class="sxs-lookup"><span data-stu-id="8bf16-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="8bf16-225">O *ShoppingCart.aspx* página exibirá os produtos que o usuário foi adicionado ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="8bf16-226">Ele também fornecerá a capacidade de adicionar, remover e atualizar itens no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="8bf16-227">Na **Gerenciador de soluções**, clique com botão direito **WingtipToys**, clique em **Add**  - &gt; **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="8bf16-228">A caixa de diálogo **Adicionar Novo Item** é exibida.</span><span class="sxs-lookup"><span data-stu-id="8bf16-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="8bf16-229">Adicione uma nova página (formulário da Web) que inclui uma página mestra, selecionando **formulário da Web usando página mestra**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="8bf16-230">Nomeie a nova página *ShoppingCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="8bf16-231">Selecione **Master** anexar a página mestra recém-criado *. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="8bf16-232">No *ShoppingCart.aspx* página, substitua a marcação existente pela seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="8bf16-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="8bf16-233">O *ShoppingCart.aspx* página inclui uma **GridView** controle chamado `CartList`.</span><span class="sxs-lookup"><span data-stu-id="8bf16-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="8bf16-234">Esse controle usa associação de modelo para associar os dados do carrinho de compras do banco de dados para o **GridView** controle.</span><span class="sxs-lookup"><span data-stu-id="8bf16-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="8bf16-235">Quando você define o `ItemType` propriedade do **GridView** controlar, a expressão de associação de dados `Item` está disponível na marcação do controle e o controle torna-se com rigidez de tipos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="8bf16-236">Conforme mencionado anteriormente nesta série de tutoriais, você pode selecionar detalhes do `Item` usando o IntelliSense de objeto.</span><span class="sxs-lookup"><span data-stu-id="8bf16-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="8bf16-237">Para configurar um controle de dados para usar a associação de modelo para selecionar dados, defina o `SelectMethod` propriedade do controle.</span><span class="sxs-lookup"><span data-stu-id="8bf16-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="8bf16-238">Na marcação, você deve definir a `SelectMethod` usar o método GetShoppingCartItems que retorna uma lista de `CartItem` objetos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="8bf16-239">O **GridView** chama o método no momento apropriado no ciclo de vida da página de controle de dados e associa automaticamente os dados retornados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="8bf16-240">O `GetShoppingCartItems` método ainda deve ser adicionado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="8bf16-241">Recuperando os itens do carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="8bf16-242">Em seguida, adicione o código para o *ShoppingCart.aspx.cs* code-behind para recuperar e preencher a interface de usuário do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="8bf16-243">Na **Gerenciador de soluções**, clique com botão direito do *ShoppingCart.aspx* página e, em seguida, clique em **Exibir código**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="8bf16-244">O *ShoppingCart.aspx.cs* arquivo code-behind é aberto no editor.</span><span class="sxs-lookup"><span data-stu-id="8bf16-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="8bf16-245">Substitua o código existente pelo seguinte:</span><span class="sxs-lookup"><span data-stu-id="8bf16-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="8bf16-246">Conforme mencionado acima, o `GridView` chamadas de controle de dados a `GetShoppingCartItems` ciclo de método apropriado no momento o ciclo de vida da página e associa automaticamente os dados retornados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="8bf16-247">O `GetShoppingCartItems` método cria uma instância da `ShoppingCartActions` objeto.</span><span class="sxs-lookup"><span data-stu-id="8bf16-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="8bf16-248">Em seguida, o código usa essa instância para retornar os itens no carrinho chamando o `GetCartItems` método.</span><span class="sxs-lookup"><span data-stu-id="8bf16-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="8bf16-249">Adicionar produtos ao carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="8bf16-250">Quando ambos os *ProductList. aspx* ou o *ProductDetails.aspx* página for exibida, o usuário será capaz de adicionar o produto ao carrinho de compras usando um link.</span><span class="sxs-lookup"><span data-stu-id="8bf16-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="8bf16-251">Quando eles clicarem no link, o aplicativo navega para a página de processamento de chamada *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="8bf16-252">O *AddToCart.aspx* página chamará o `AddToCart` método no `ShoppingCart` classe que você adicionou anteriormente neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="8bf16-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="8bf16-253">Agora, você adicionará um **adicionar ao carrinho** link para ambos os *ProductList. aspx* página e o *ProductDetails.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="8bf16-254">Esse link incluirá o produto `ID` que é recuperado do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8bf16-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="8bf16-255">Na **Gerenciador de soluções**, encontre e abra a página chamada *ProductList. aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bf16-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="8bf16-256">Adicione a marcação realçada em amarelo para o *ProductList. aspx* página para que toda a página seja exibida da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8bf16-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="8bf16-257">Testando o carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="8bf16-258">Execute o aplicativo para ver como adicionar produtos ao carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="8bf16-259">Pressione **F5** para executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8bf16-260">Depois que o projeto recria o banco de dados, o navegador será aberto e mostrará os *default. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8bf16-261">Selecione **carros** no menu de navegação de categoria.</span><span class="sxs-lookup"><span data-stu-id="8bf16-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="8bf16-262">O *ProductList. aspx* página é exibida, mostrando apenas os produtos incluídos na categoria "Carros".</span><span class="sxs-lookup"><span data-stu-id="8bf16-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Carrinho de compras - carros](shopping-cart/_static/image5.png)
3. <span data-ttu-id="8bf16-264">Clique o **adicionar ao carrinho** link ao lado do primeiro produto listado (o carro conversível).</span><span class="sxs-lookup"><span data-stu-id="8bf16-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="8bf16-265">O *ShoppingCart.aspx* página for exibida, mostrando a seleção no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Carrinho - carrinho de compras](shopping-cart/_static/image6.png)
4. <span data-ttu-id="8bf16-267">Exibir produtos adicionais, selecionando **planos** no menu de navegação de categoria.</span><span class="sxs-lookup"><span data-stu-id="8bf16-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="8bf16-268">Clique o **adicionar ao carrinho** link ao lado do primeiro produto listado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="8bf16-269">O *ShoppingCart.aspx* página é exibida com o item adicional.</span><span class="sxs-lookup"><span data-stu-id="8bf16-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="8bf16-270">Feche o navegador.</span><span class="sxs-lookup"><span data-stu-id="8bf16-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="8bf16-271">Calcular e exibir o Total do pedido</span><span class="sxs-lookup"><span data-stu-id="8bf16-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="8bf16-272">Além de adicionar produtos ao carrinho de compras, você adicionará uma `GetTotal` método para o `ShoppingCart` de classe e exibir o valor total do pedido na página do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="8bf16-273">No **Gerenciador de soluções**, abra o *ShoppingCartActions.cs* arquivo o *lógica* pasta.</span><span class="sxs-lookup"><span data-stu-id="8bf16-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="8bf16-274">Adicione o seguinte `GetTotal` método realçado em amarelo para o `ShoppingCart` de classe, para que a classe aparece da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8bf16-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="8bf16-275">Primeiro, o `GetTotal` método obtém a ID do carrinho de compras para o usuário.</span><span class="sxs-lookup"><span data-stu-id="8bf16-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="8bf16-276">Em seguida, o método obtém o carrinho total multiplicando o preço do produto pela quantidade de produto para cada produto listado no carrinho.</span><span class="sxs-lookup"><span data-stu-id="8bf16-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8bf16-277">O código acima usa o tipo anulável "`int?`".</span><span class="sxs-lookup"><span data-stu-id="8bf16-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="8bf16-278">Tipos que permitem valor nulos podem representar todos os valores de um tipo subjacente e também como um valor nulo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="8bf16-279">Para obter mais informações, consulte [usando tipos anuláveis](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="8bf16-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="8bf16-280">Modificar a exibição de carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="8bf16-281">Em seguida, você modificará o código para o *ShoppingCart.aspx* página a ser chamada a `GetTotal` método e exibição total no *ShoppingCart.aspx* página quando a página for carregada.</span><span class="sxs-lookup"><span data-stu-id="8bf16-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="8bf16-282">Na **Gerenciador de soluções**, clique com botão direito do *ShoppingCart.aspx* página e selecione **Exibir código**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="8bf16-283">No *ShoppingCart.aspx.cs* do arquivo, atualize o `Page_Load` manipulador adicionando o seguinte código realçado em amarelo:</span><span class="sxs-lookup"><span data-stu-id="8bf16-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="8bf16-284">Quando o *ShoppingCart.aspx* página for carregada, ele carrega o objeto de carrinho de compras e, em seguida, recupera o total do carrinho de compras por meio da chamada a `GetTotal` método da `ShoppingCart` classe.</span><span class="sxs-lookup"><span data-stu-id="8bf16-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="8bf16-285">Se o carrinho de compras está vazio, uma mensagem para esse efeito será exibida.</span><span class="sxs-lookup"><span data-stu-id="8bf16-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="8bf16-286">Testando o Total do carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="8bf16-287">Execute o aplicativo agora para ver como você não só pode adicionar um produto ao carrinho de compras, mas você pode ver o total do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="8bf16-288">Pressione **F5** para executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8bf16-289">O navegador será aberto e mostrará os *default. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8bf16-290">Selecione **carros** no menu de navegação de categoria.</span><span class="sxs-lookup"><span data-stu-id="8bf16-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="8bf16-291">Clique o **adicionar ao carrinho** link ao lado do primeiro produto.</span><span class="sxs-lookup"><span data-stu-id="8bf16-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="8bf16-292">O *ShoppingCart.aspx* página é exibida com o total do pedido.</span><span class="sxs-lookup"><span data-stu-id="8bf16-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Total do carrinho de compras de carrinho-](shopping-cart/_static/image7.png)
4. <span data-ttu-id="8bf16-294">Adicione alguns outros produtos (por exemplo, um plano) ao carrinho.</span><span class="sxs-lookup"><span data-stu-id="8bf16-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="8bf16-295">O *ShoppingCart.aspx* página é exibida com um total atualizado para todos os produtos que você adicionou.</span><span class="sxs-lookup"><span data-stu-id="8bf16-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Carrinho de compras - vários produtos](shopping-cart/_static/image8.png)
6. <span data-ttu-id="8bf16-297">Interrompa o aplicativo em execução, fechando a janela do navegador.</span><span class="sxs-lookup"><span data-stu-id="8bf16-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="8bf16-298">Adicionar botões de check-out e a atualização ao carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="8bf16-299">Para permitir que os usuários modifiquem o carrinho de compras, você adicionará um **atualização** botão e uma **check-out** botão à página do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="8bf16-300">O **check-out** botão não é usado até que mais tarde nessa série de tutoriais.</span><span class="sxs-lookup"><span data-stu-id="8bf16-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="8bf16-301">Na **Gerenciador de soluções**, abra o *ShoppingCart.aspx* página na raiz do projeto de aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="8bf16-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="8bf16-302">Para adicionar o **atualização** botão e o **check-out** botão para o *ShoppingCart.aspx* página, adicione a marcação realçada em amarelo a marcação existente, conforme mostrado no o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="8bf16-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="8bf16-303">Quando o usuário clica o **atualização** botão, o `UpdateBtn_Click` manipulador de eventos será chamado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="8bf16-304">Esse manipulador de eventos chamará o código que você adicionará na próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="8bf16-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="8bf16-305">Em seguida, você pode atualizar o código contido na *ShoppingCart.aspx.cs* arquivo para executar um loop por meio de itens do carrinho e chamar o `RemoveItem` e `UpdateItem` métodos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="8bf16-306">Na **Gerenciador de soluções**, abra o *ShoppingCart.aspx.cs* arquivo na raiz do projeto de aplicativo da web.</span><span class="sxs-lookup"><span data-stu-id="8bf16-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="8bf16-307">Adicione as seguintes seções de código realçadas em amarelo para o *ShoppingCart.aspx.cs* arquivo:</span><span class="sxs-lookup"><span data-stu-id="8bf16-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="8bf16-308">Quando o usuário clica o **atualização** botão a *ShoppingCart.aspx* página, o método UpdateCartItems é chamado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="8bf16-309">O método UpdateCartItems obtém os valores atualizados para cada item no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="8bf16-310">Em seguida, chama o método UpdateCartItems o `UpdateShoppingCartDatabase` método (adicionado e explicado na próxima etapa) para adicionar ou remover itens do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="8bf16-311">Depois que o banco de dados foi atualizado para refletir as atualizações ao carrinho de compras, o **GridView** controle será atualizado na página do carrinho de compras por meio da chamada a `DataBind` método para o **GridView**.</span><span class="sxs-lookup"><span data-stu-id="8bf16-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="8bf16-312">Além disso, o valor total do pedido na página do carrinho de compras é atualizado para refletir a lista atualizada de itens.</span><span class="sxs-lookup"><span data-stu-id="8bf16-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="8bf16-313">Atualizar e remover itens do carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="8bf16-314">Sobre o *ShoppingCart.aspx* página, você pode ver os controles foram adicionados para a quantidade de um item de atualização e remoção de um item.</span><span class="sxs-lookup"><span data-stu-id="8bf16-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="8bf16-315">Agora, adicione o código que verifique esses controles funcionam.</span><span class="sxs-lookup"><span data-stu-id="8bf16-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="8bf16-316">No **Gerenciador de soluções**, abra o *ShoppingCartActions.cs* arquivo o *lógica* pasta.</span><span class="sxs-lookup"><span data-stu-id="8bf16-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="8bf16-317">Adicione o seguinte código realçado em amarelo para o *ShoppingCartActions.cs* arquivo de classe:</span><span class="sxs-lookup"><span data-stu-id="8bf16-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="8bf16-318">O `UpdateShoppingCartDatabase` método, chamado do `UpdateCartItems` método o *ShoppingCart.aspx.cs* de página, que contém a lógica para atualizar ou remover itens do carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="8bf16-319">O `UpdateShoppingCartDatabase` método percorre todas as linhas dentro da lista de carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="8bf16-320">Se um item do carrinho de compras foi marcado para ser removido ou a quantidade for menor que 1, o `RemoveItem` método é chamado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="8bf16-321">Caso contrário, o item do carrinho de compras é verificado para atualizações quando o `UpdateItem` método é chamado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="8bf16-322">Depois que o item do carrinho de compras foi removido ou atualizado, as alterações de banco de dados são salvos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="8bf16-323">O `ShoppingCartUpdates` estrutura é usada para manter todos os itens de carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="8bf16-324">O `UpdateShoppingCartDatabase` usa o `ShoppingCartUpdates` estrutura para determinar se qualquer um dos itens precisará ser atualizado ou removido.</span><span class="sxs-lookup"><span data-stu-id="8bf16-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="8bf16-325">O próximo tutorial, você aprenderá a usar o `EmptyCart` método para limpar as compras do carrinho após a compra de produtos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="8bf16-326">Mas por enquanto, você usará o `GetCount` método que você acabou de adicionar para o *ShoppingCartActions.cs* arquivo para determinar quantos itens estão no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="8bf16-327">Adicionar um contador de carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="8bf16-328">Para permitir que o usuário exibir o número total de itens no carrinho de compras, você irá adicionar um contador para o *Master* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="8bf16-329">Esse contador também atuará como um link para o carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="8bf16-330">Na **Gerenciador de soluções**, abra o *Master* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="8bf16-331">Modificar a marcação, adicionando o link de contador carrinho de compras, conforme mostrado em amarelo para a seção de navegação para que ele apareça da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8bf16-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="8bf16-332">Em seguida, atualize o code-behind do *Site.Master.cs* arquivo adicionando o código realçado em amarelo, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8bf16-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="8bf16-333">Antes da página é renderizada como HTML, o `Page_PreRender` é gerado.</span><span class="sxs-lookup"><span data-stu-id="8bf16-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="8bf16-334">No `Page_PreRender` manipulador, a contagem total de carrinho de compras é determinado pela chamada a `GetCount` método.</span><span class="sxs-lookup"><span data-stu-id="8bf16-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="8bf16-335">O valor retornado é adicionado para o `cartCount` span incluído na marcação do *Master* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="8bf16-336">O `<span>` marcas permite que os elementos internos sejam renderizados corretamente.</span><span class="sxs-lookup"><span data-stu-id="8bf16-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="8bf16-337">Quando qualquer página do site é exibida, o total do carrinho de compras será exibida.</span><span class="sxs-lookup"><span data-stu-id="8bf16-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="8bf16-338">O usuário também pode clicar com o total do carrinho de compras para exibir o carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="8bf16-339">Teste concluído carrinho de compras</span><span class="sxs-lookup"><span data-stu-id="8bf16-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="8bf16-340">Você pode executar o aplicativo agora para ver como você pode adicionar, exclusão e atualização de itens no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="8bf16-341">O total do carrinho de compras refletirá o custo total de todos os itens no carrinho de compras.</span><span class="sxs-lookup"><span data-stu-id="8bf16-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="8bf16-342">Pressione **F5** para executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8bf16-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8bf16-343">O navegador é aberta e mostra a *default. aspx* página.</span><span class="sxs-lookup"><span data-stu-id="8bf16-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8bf16-344">Selecione **carros** no menu de navegação de categoria.</span><span class="sxs-lookup"><span data-stu-id="8bf16-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="8bf16-345">Clique o **adicionar ao carrinho** link ao lado do primeiro produto.</span><span class="sxs-lookup"><span data-stu-id="8bf16-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="8bf16-346">O *ShoppingCart.aspx* página é exibida com o total do pedido.</span><span class="sxs-lookup"><span data-stu-id="8bf16-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="8bf16-347">Selecione **planos** no menu de navegação de categoria.</span><span class="sxs-lookup"><span data-stu-id="8bf16-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="8bf16-348">Clique o **adicionar ao carrinho** link ao lado do primeiro produto.</span><span class="sxs-lookup"><span data-stu-id="8bf16-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="8bf16-349">Defina a quantidade do primeiro item no carrinho de compras para 3 e selecione o **Remover Item** caixa de seleção do segundo item.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="8bf16-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="8bf16-350">Clique o **atualizar** botão para atualizar a página de carrinho de compras e exibir o novo total do pedido.</span><span class="sxs-lookup"><span data-stu-id="8bf16-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Carrinho de compras - atualização de carrinho](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="8bf16-352">Resumo</span><span class="sxs-lookup"><span data-stu-id="8bf16-352">Summary</span></span>

<span data-ttu-id="8bf16-353">Neste tutorial, você criou um carrinho de compras para o aplicativo de exemplo Wingtip Toys Web Forms.</span><span class="sxs-lookup"><span data-stu-id="8bf16-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="8bf16-354">Durante este tutorial, você usou Entity Framework Code First, as anotações de dados, controles de dados fortemente tipados e associação de modelos.</span><span class="sxs-lookup"><span data-stu-id="8bf16-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="8bf16-355">O carrinho de compras dá suporte a adicionar, excluir e atualizar itens que o usuário tiver selecionado para compra.</span><span class="sxs-lookup"><span data-stu-id="8bf16-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="8bf16-356">Além de implementar a funcionalidade de carrinho de compras, você aprendeu como exibir itens de carrinho de compras em uma **GridView** controlar e calcular o total do pedido.</span><span class="sxs-lookup"><span data-stu-id="8bf16-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="8bf16-357">Obter informações adicionais</span><span class="sxs-lookup"><span data-stu-id="8bf16-357">Addition Information</span></span>

[<span data-ttu-id="8bf16-358">Visão geral do estado de sessão ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8bf16-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="8bf16-359">[Anterior](display_data_items_and_details.md)
> [Próximo](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="8bf16-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
