---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
title: Mestre/detalhes filtragem com uma DropDownList (c#) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, podemos ver como exibir relatórios mestre/detalhes em uma única página da web usando DropDownLists para exibir os registros de 'mestres' e uma DataList para ex...
ms.author: aspnetcontent
ms.date: 07/18/2007
ms.assetid: 07fa47ae-e491-4a2f-b265-d342b9ddef46
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: ed2631e49786c81075099cca6941d98ba3b67e37
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/05/2018
ms.locfileid: "37818246"
---
<a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="3213e-103">Mestre/detalhes filtragem com uma DropDownList (c#)</span><span class="sxs-lookup"><span data-stu-id="3213e-103">Master/Detail Filtering With a DropDownList (C#)</span></span>
====================
<span data-ttu-id="3213e-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="3213e-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="3213e-105">[Baixe o aplicativo de exemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) ou [baixar PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="3213e-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span></span>

> <span data-ttu-id="3213e-106">Neste tutorial, podemos ver como exibir relatórios mestre/detalhes em uma única página da web usando DropDownLists para exibir os registros "mestres" e uma DataList para exibir os "Detalhes".</span><span class="sxs-lookup"><span data-stu-id="3213e-106">In this tutorial we see how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details".</span></span>


## <a name="introduction"></a><span data-ttu-id="3213e-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="3213e-107">Introduction</span></span>

<span data-ttu-id="3213e-108">O relatório de detalhes mestre, primeiro criamos usando um GridView no anterior [filtragem de mestre/detalhes com uma DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) início do tutorial, mostrando um conjunto de registros "mestres".</span><span class="sxs-lookup"><span data-stu-id="3213e-108">The master/detail report, which we first created using a GridView in the earlier [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial, begins by showing some set of "master" records.</span></span> <span data-ttu-id="3213e-109">O usuário pode, em seguida, fazer drill down em um dos registros mestres, assim, detalhes do registro mestre "."</span><span class="sxs-lookup"><span data-stu-id="3213e-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="3213e-110">Relatórios mestre/detalhes são uma opção ideal para visualizar relações um-para-muitos e para exibir informações detalhadas de tabelas particularmente "larga" (aqueles que têm muitas colunas).</span><span class="sxs-lookup"><span data-stu-id="3213e-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships and for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="3213e-111">Exploramos como implementar os relatórios mestre/detalhes usando os controles GridView e DetailsView nos tutoriais anteriores.</span><span class="sxs-lookup"><span data-stu-id="3213e-111">We've explored how to implement master/detail reports using the GridView and DetailsView controls in previous tutorials.</span></span> <span data-ttu-id="3213e-112">Neste tutorial e nas próximas duas, podemos vai reexaminar esses conceitos, mas o foco sobre como usar o DataList e Repeater controla em vez disso.</span><span class="sxs-lookup"><span data-stu-id="3213e-112">In this tutorial and the next two, we'll reexamine these concepts, but focus on using DataList and Repeater controls instead.</span></span>

<span data-ttu-id="3213e-113">Neste tutorial, vamos examinar usando DropDownList para conter os registros de "master", com os registros de "Detalhes" exibidos no DataList.</span><span class="sxs-lookup"><span data-stu-id="3213e-113">In this tutorial, we'll look at using a DropDownList to contain the "master" records, with the "details" records displayed in a DataList.</span></span>

## <a name="step-1-adding-the-masterdetail-tutorial-web-pages"></a><span data-ttu-id="3213e-114">Etapa 1: Adicionar as páginas da Web Tutorial de mestre/detalhes</span><span class="sxs-lookup"><span data-stu-id="3213e-114">Step 1: Adding the Master/Detail Tutorial Web Pages</span></span>

<span data-ttu-id="3213e-115">Antes de começar este tutorial, primeiro vamos adicionar a pasta e as páginas do ASP.NET, precisaremos para este tutorial e as próximas duas lidando com os relatórios mestre/detalhes usando os controles DataList e Repeater.</span><span class="sxs-lookup"><span data-stu-id="3213e-115">Before we start this tutorial, let's first take a moment to add the folder and ASP.NET pages we'll need for this tutorial and the next two dealing with master/detail reports using the DataList and Repeater controls.</span></span> <span data-ttu-id="3213e-116">Comece criando uma nova pasta no projeto chamado `DataListRepeaterFiltering`.</span><span class="sxs-lookup"><span data-stu-id="3213e-116">Start by creating a new folder in the project named `DataListRepeaterFiltering`.</span></span> <span data-ttu-id="3213e-117">Em seguida, adicione as seguintes páginas ASP.NET cinco nesta pasta, manter todos eles configurado para usar a página mestra `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="3213e-117">Next, add the following five ASP.NET pages to this folder, having all of them configured to use the master page `Site.master`:</span></span>

- `Default.aspx`
- `FilterByDropDownList.aspx`
- `CategoryListMaster.aspx`
- `ProductsForCategoryDetails.aspx`
- `CategoriesAndProducts.aspx`


![Crie uma pasta DataListRepeaterFiltering e adicione as páginas do Tutorial do ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image1.png)

<span data-ttu-id="3213e-119">**Figura 1**: criar um `DataListRepeaterFiltering` pasta e adicione as páginas do Tutorial do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="3213e-119">**Figure 1**: Create a `DataListRepeaterFiltering` Folder and Add the Tutorial ASP.NET Pages</span></span>


<span data-ttu-id="3213e-120">Em seguida, abra o `Default.aspx` da página e arraste o `SectionLevelTutorialListing.ascx` controle de usuário do `UserControls` pasta para a superfície de Design.</span><span class="sxs-lookup"><span data-stu-id="3213e-120">Next, open the `Default.aspx` page and drag the `SectionLevelTutorialListing.ascx` User Control from the `UserControls` folder onto the Design surface.</span></span> <span data-ttu-id="3213e-121">Esse controle de usuário que criamos na [páginas mestras e navegação no Site](../introduction/master-pages-and-site-navigation-cs.md) tutorial, enumera o mapa do site e exibe os tutoriais da seção atual em uma lista com marcadores.</span><span class="sxs-lookup"><span data-stu-id="3213e-121">This User Control, which we created in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial, enumerates the site map and displays the tutorials from the current section in a bulleted list.</span></span>


<span data-ttu-id="3213e-122">[![Adicionar o controle de usuário SectionLevelTutorialListing.ascx para default. aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-122">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span></span>

<span data-ttu-id="3213e-123">**Figura 2**: Adicione o `SectionLevelTutorialListing.ascx` controle de usuário `Default.aspx` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-123">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span></span>


<span data-ttu-id="3213e-124">Para ter a exibição de lista com marcadores os tutoriais de mestre/detalhes, criaremos, precisamos adicioná-los ao mapa do site.</span><span class="sxs-lookup"><span data-stu-id="3213e-124">In order to have the bulleted list display the master/detail tutorials we'll be creating, we need to add them to the site map.</span></span> <span data-ttu-id="3213e-125">Abra o `Web.sitemap` arquivo e adicione a marcação a seguir após a marcação de nó de mapa de site "Exibindo dados com o DataList e Repeater":</span><span class="sxs-lookup"><span data-stu-id="3213e-125">Open the `Web.sitemap` file and add the following markup after the "Displaying Data with the DataList and Repeater" site map node markup:</span></span>

[!code-xml[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample1.xml)]


![Atualizar o mapa de Site para incluir as novas páginas do ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image5.png)

<span data-ttu-id="3213e-127">**Figura 3**: atualizar o mapa de Site para incluir as novas páginas do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="3213e-127">**Figure 3**: Update the Site Map to Include the New ASP.NET Pages</span></span>


## <a name="step-2-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="3213e-128">Etapa 2: Exibindo as categorias na DropDownList</span><span class="sxs-lookup"><span data-stu-id="3213e-128">Step 2: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="3213e-129">Nosso relatório mestre/detalhes listará as categorias na DropDownList, com produtos do item de lista selecionado exibidos mais adiante na página em um DataList.</span><span class="sxs-lookup"><span data-stu-id="3213e-129">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a DataList.</span></span> <span data-ttu-id="3213e-130">A primeira tarefa à frente de nós, em seguida, é ter as categorias exibidas na DropDownList.</span><span class="sxs-lookup"><span data-stu-id="3213e-130">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="3213e-131">Comece abrindo o `FilterByDropDownList.aspx` página o `DataListRepeaterFiltering` pasta e arraste uma DropDownList da caixa de ferramentas para o designer da página.</span><span class="sxs-lookup"><span data-stu-id="3213e-131">Start by opening the `FilterByDropDownList.aspx` page in the `DataListRepeaterFiltering` folder and drag a DropDownList from the Toolbox onto the page's designer.</span></span> <span data-ttu-id="3213e-132">Em seguida, defina a DropDownList `ID` propriedade para `Categories`.</span><span class="sxs-lookup"><span data-stu-id="3213e-132">Next, set the DropDownList's `ID` property to `Categories`.</span></span> <span data-ttu-id="3213e-133">Clique no link na marca inteligente do DropDownList Escolher fonte de dados e criar um novo ObjectDataSource chamado `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="3213e-133">Click on the Choose Data Source link from the DropDownList's smart tag and create a new ObjectDataSource named `CategoriesDataSource`.</span></span>


<span data-ttu-id="3213e-134">[![Adicionar um novo ObjectDataSource chamado CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-134">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span></span>

<span data-ttu-id="3213e-135">**Figura 4**: adicionar um novo ObjectDataSource nomeado `CategoriesDataSource` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-135">**Figure 4**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span></span>


<span data-ttu-id="3213e-136">Configurar o novo ObjectDataSource, de modo que ele chama o `CategoriesBLL` da classe `GetCategories()` método.</span><span class="sxs-lookup"><span data-stu-id="3213e-136">Configure the new ObjectDataSource such that it invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span> <span data-ttu-id="3213e-137">Depois de configurar o ObjectDataSource ainda precisamos especificar qual campo de fonte de dados deve ser exibido na DropDownList e que um deve ser associado como o valor para cada item de lista.</span><span class="sxs-lookup"><span data-stu-id="3213e-137">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in the DropDownList and which one should be associated as the value for each list item.</span></span> <span data-ttu-id="3213e-138">Ter o `CategoryName` campo, como a exibição e `CategoryID` como o valor para cada item de lista.</span><span class="sxs-lookup"><span data-stu-id="3213e-138">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="3213e-139">[![Ter a exibição DropDownList CategoryName campo e Use CategoryID como o valor](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-139">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span></span>

<span data-ttu-id="3213e-140">**Figura 5**: têm a exibição DropDownList a `CategoryName` campo e Use `CategoryID` como o valor ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-140">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span></span>


<span data-ttu-id="3213e-141">Neste ponto, temos um controle DropDownList que é preenchido com os registros da `Categories` tabela (tudo feito em cerca de seis segundos).</span><span class="sxs-lookup"><span data-stu-id="3213e-141">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="3213e-142">Figura 6 mostra nosso progresso até o momento quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="3213e-142">Figure 6 shows our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="3213e-143">[![Uma lista suspensa lista as categorias atuais](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-143">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span></span>

<span data-ttu-id="3213e-144">**Figura 6**: um menu suspenso lista as categorias atual ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-144">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span></span>


## <a name="step-2-adding-the-products-datalist"></a><span data-ttu-id="3213e-145">Etapa 2: Adicionando DataList produtos</span><span class="sxs-lookup"><span data-stu-id="3213e-145">Step 2: Adding the Products DataList</span></span>

<span data-ttu-id="3213e-146">A última etapa do nosso relatório mestre/detalhes é listar os produtos associados a categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="3213e-146">The last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="3213e-147">Para fazer isso, adicione uma DataList à página e criar um novo ObjectDataSource chamado `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="3213e-147">To accomplish this, add a DataList to the page and create a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="3213e-148">Ter o `ProductsByCategoryDataSource` recuperar seus dados, controle de `ProductsBLL` da classe `GetProductsByCategoryID(categoryID)` método.</span><span class="sxs-lookup"><span data-stu-id="3213e-148">Have the `ProductsByCategoryDataSource` control retrieve its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="3213e-149">Como esse relatório mestre/detalhes é somente leitura, escolha a que opção nas guias de INSERT, UPDATE e DELETE (nenhum).</span><span class="sxs-lookup"><span data-stu-id="3213e-149">Since this master/detail report is read-only, choose the (None) option in the INSERT, UPDATE, and DELETE tabs.</span></span>


<span data-ttu-id="3213e-150">[![Selecione o método GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-150">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span></span>

<span data-ttu-id="3213e-151">**Figura 7**: selecione o `GetProductsByCategoryID(categoryID)` método ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-151">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span></span>


<span data-ttu-id="3213e-152">Depois de clicar em Avançar, o assistente ObjectDataSource nos solicita a origem do valor para o `GetProductsByCategoryID(categoryID)` do método *`categoryID`* parâmetro.</span><span class="sxs-lookup"><span data-stu-id="3213e-152">After clicking Next, the ObjectDataSource wizard prompts us for the source of the value for the `GetProductsByCategoryID(categoryID)` method's *`categoryID`* parameter.</span></span> <span data-ttu-id="3213e-153">Para usar o valor de selecionado `categories` DropDownList item define a origem do parâmetro ControlID para e de controle `Categories`.</span><span class="sxs-lookup"><span data-stu-id="3213e-153">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>


<span data-ttu-id="3213e-154">[![Defina o parâmetro categoryID como o valor de Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-154">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span></span>

<span data-ttu-id="3213e-155">**Figura 8**: defina o *`categoryID`* parâmetro para o valor da `Categories` DropDownList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-155">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span></span>


<span data-ttu-id="3213e-156">Após a conclusão do Assistente Configurar fonte de dados, o Visual Studio gerará automaticamente um `ItemTemplate` para DataList que exibe o nome e o valor de cada campo de dados.</span><span class="sxs-lookup"><span data-stu-id="3213e-156">Upon completing the Configure Data Source wizard, Visual Studio will automatically generate an `ItemTemplate` for the DataList that displays the name and value of each data field.</span></span> <span data-ttu-id="3213e-157">Vamos melhorar DataList em vez disso, usar um `ItemTemplate` que exibe apenas o nome do produto, categoria, fornecedor, quantidade por unidade e preço junto com um `SeparatorTemplate` que injeta um `<hr>` elemento entre cada item.</span><span class="sxs-lookup"><span data-stu-id="3213e-157">Let's enhance the DataList to instead use an `ItemTemplate` that displays just the product's name, category, supplier, quantity per unit, and price along with a `SeparatorTemplate` that injects an `<hr>` element between each item.</span></span> <span data-ttu-id="3213e-158">Vou usar o `ItemTemplate` de um exemplo na [exibindo dados com os controles DataList e Repeater](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) tutorial, mas fique à vontade para usar qualquer marcação de modelo que você encontre visualmente mais atraente.</span><span class="sxs-lookup"><span data-stu-id="3213e-158">I'm going to use the `ItemTemplate` from an example in the [Displaying Data with the DataList and Repeater Controls](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) tutorial, but feel free to use whatever template markup you find most visually appealing.</span></span>

<span data-ttu-id="3213e-159">Depois de fazer essas alterações, DataList e marcação do seu ObjectDataSource devem ser semelhantes ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="3213e-159">After making these changes, your DataList and its ObjectDataSource's markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="3213e-160">Reserve um tempo para fazer check-out de nosso progresso em um navegador.</span><span class="sxs-lookup"><span data-stu-id="3213e-160">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="3213e-161">Quando o primeiro visitando a página, os produtos que pertencem à categoria selecionada (Bebidas) são exibidos (conforme mostrado na Figura 9), mas alterar DropDownList não atualiza os dados.</span><span class="sxs-lookup"><span data-stu-id="3213e-161">When first visiting the page, those products belonging to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="3213e-162">Isso ocorre porque um postback deve ocorrer para DataList atualizar.</span><span class="sxs-lookup"><span data-stu-id="3213e-162">This is because a postback must occur for the DataList to update.</span></span> <span data-ttu-id="3213e-163">Para fazer isso, pode definir a DropDownList `AutoPostBack` propriedade para `true` ou adicionar um controle da Web de botão para a página.</span><span class="sxs-lookup"><span data-stu-id="3213e-163">To accomplish this we can either set the DropDownList's `AutoPostBack` property to `true` or add a Button Web control to the page.</span></span> <span data-ttu-id="3213e-164">Para este tutorial, optamos por para definir a DropDownList `AutoPostBack` propriedade para `true`.</span><span class="sxs-lookup"><span data-stu-id="3213e-164">For this tutorial, I've opted to set the DropDownList's `AutoPostBack` property to `true`.</span></span>

<span data-ttu-id="3213e-165">As figuras 9 e 10 ilustram o relatório mestre/detalhes em ação.</span><span class="sxs-lookup"><span data-stu-id="3213e-165">Figures 9 and 10 illustrate the master/detail report in action.</span></span>


<span data-ttu-id="3213e-166">[![Quando o primeiro visitando a página, os produtos de bebidas são exibidos](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-166">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span></span>

<span data-ttu-id="3213e-167">**Figura 9**: quando o primeiro visitando a página, os produtos de bebidas são exibidos ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-167">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span></span>


<span data-ttu-id="3213e-168">[![Selecionar um novo produto (produzir) automaticamente faz com que um PostBack, atualizando DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-168">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span></span>

<span data-ttu-id="3213e-169">**Figura 10**: seleção de um novo produto (produzir) automaticamente faz com que um PostBack, atualizando DataList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-169">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span></span>


## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="3213e-170">Adicionando um Item de lista "-- Escolha uma categoria –"</span><span class="sxs-lookup"><span data-stu-id="3213e-170">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="3213e-171">Ao visitar primeiro o `FilterByDropDownList.aspx` página categorias primeiro item da lista do DropDownList (Bebidas) é selecionado por padrão, mostrando os produtos de bebidas no DataList.</span><span class="sxs-lookup"><span data-stu-id="3213e-171">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the DataList.</span></span> <span data-ttu-id="3213e-172">No *filtragem de mestre/detalhes com uma DropDownList* tutorial que adicionamos uma opção "-- Escolha uma categoria –" DropDownList que foi selecionada por padrão e, quando selecionado, exibida *todos os* da produtos no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3213e-172">In the *Master/Detail Filtering With a DropDownList* tutorial we added a "-- Choose a Category --" option to the DropDownList that was selected by default and, when selected, displayed *all* of the products in the database.</span></span> <span data-ttu-id="3213e-173">Essa abordagem foi gerenciável ao listar os produtos em um GridView, pois cada linha de produto ocupou uma pequena quantidade de espaço na tela.</span><span class="sxs-lookup"><span data-stu-id="3213e-173">Such an approach was manageable when listing the products in a GridView, as each product row took up a small amount of screen real estate.</span></span> <span data-ttu-id="3213e-174">No entanto, com o DataList e informações de cada produto consome uma parte maior da tela.</span><span class="sxs-lookup"><span data-stu-id="3213e-174">With the DataList, however, each product's information consumes a much larger chunk of the screen.</span></span> <span data-ttu-id="3213e-175">Ainda vamos adicionar uma opção "-- Escolha uma categoria –" e que ele seja selecionada por padrão, mas em vez de precisá-lo Mostrar todos os produtos quando selecionado, vamos configurá-lo para que ele mostre nenhum produto.</span><span class="sxs-lookup"><span data-stu-id="3213e-175">Let's still add a "-- Choose a Category --" option and have it selected by default, but instead of having it show all products when selected, let's configure it so that it shows no products.</span></span>

<span data-ttu-id="3213e-176">Para adicionar um novo item de lista a DropDownList, vá para a janela Propriedades e clique nas elipses no `Items` propriedade.</span><span class="sxs-lookup"><span data-stu-id="3213e-176">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="3213e-177">Adicionar um novo item de lista com o `Text` "-- Escolha uma categoria –" e o `Value` `0`.</span><span class="sxs-lookup"><span data-stu-id="3213e-177">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `0`.</span></span>


![Adicionar um](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image27.png)

<span data-ttu-id="3213e-179">**Figura 11**: adicionar um Item de lista "-- Escolha uma categoria –"</span><span class="sxs-lookup"><span data-stu-id="3213e-179">**Figure 11**: Add a "-- Choose a Category --" List Item</span></span>


<span data-ttu-id="3213e-180">Como alternativa, você pode adicionar o item de lista, adicionando a seguinte marcação ao DropDownList:</span><span class="sxs-lookup"><span data-stu-id="3213e-180">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="3213e-181">Além disso, precisamos definir o controle de DropDownList `AppendDataBoundItems` à `true` porque se ele for definido como `false` (o padrão), quando as categorias são associadas ao DropDownList do ObjectDataSource elas vão substituir qualquer lista adicionados manualmente itens.</span><span class="sxs-lookup"><span data-stu-id="3213e-181">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to `true` because if it's set to `false` (the default), when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items.</span></span>


![Defina a propriedade AppendDataBoundItems como True](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image28.png)

<span data-ttu-id="3213e-183">**Figura 12**: defina o `AppendDataBoundItems` propriedade como True</span><span class="sxs-lookup"><span data-stu-id="3213e-183">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>


<span data-ttu-id="3213e-184">O motivo pelo qual escolhemos o valor `0` para obter a lista de "-- Escolha uma categoria –" item é porque não há nenhuma categoria no sistema com um valor de `0`, portanto, não há registros de produto serão retornados quando o item de lista "-- Escolha uma categoria –" está selecionado.</span><span class="sxs-lookup"><span data-stu-id="3213e-184">The reason we chose the value `0` for the "-- Choose a Category --" list item is because there are no categories in the system with a value of `0`, hence no product records will be returned when the "-- Choose a Category --" list item is selected.</span></span> <span data-ttu-id="3213e-185">Para confirmar isso, reserve um tempo para visitar a página por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="3213e-185">To confirm this, take a moment to visit the page through a browser.</span></span> <span data-ttu-id="3213e-186">Como mostra a Figura 13, quando inicialmente exibindo a página que o item de lista "-- Escolha uma categoria –" está selecionado e nenhum produto é exibido.</span><span class="sxs-lookup"><span data-stu-id="3213e-186">As Figure 13 shows, when initially viewing the page the "-- Choose a Category --" list item is selected and no products are displayed.</span></span>


<span data-ttu-id="3213e-187">[![Quando o](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="3213e-187">[![When the](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="3213e-188">**Figura 13**: quando o Item de lista "-- Escolha uma categoria –" é selecionado, os produtos não são exibidos ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="3213e-188">**Figure 13**: When the "-- Choose a Category --" List Item is Selected, No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span></span>


<span data-ttu-id="3213e-189">Se, em vez disso, exibiria *todos os* dos produtos quando a opção "-- Escolha uma categoria –" é selecionada, use um valor de `-1` em vez disso.</span><span class="sxs-lookup"><span data-stu-id="3213e-189">If you'd rather display *all* of the products when the "-- Choose a Category --" option is selected, use a value of `-1` instead.</span></span> <span data-ttu-id="3213e-190">O leitor astuto deve se lembrar que back na *filtragem de mestre/detalhes com uma DropDownList* tutorial, atualizamos o `ProductsBLL` da classe `GetProductsByCategoryID(categoryID)` método para que se um *`categoryID`* valor de `-1` foi passado no produto de todos os registros foram retornados.</span><span class="sxs-lookup"><span data-stu-id="3213e-190">The astute reader will recall that back in the *Master/Detail Filtering With a DropDownList* tutorial we updated the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method so that if a *`categoryID`* value of `-1` was passed in, all product records were returned.</span></span>

## <a name="summary"></a><span data-ttu-id="3213e-191">Resumo</span><span class="sxs-lookup"><span data-stu-id="3213e-191">Summary</span></span>

<span data-ttu-id="3213e-192">Ao exibir dados relacionados hierarquicamente, isso geralmente ajuda a apresentar os dados usando os relatórios mestre/detalhes, do qual o usuário pode começar a ler os dados da parte superior da hierarquia e fazer drill down nos detalhes.</span><span class="sxs-lookup"><span data-stu-id="3213e-192">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="3213e-193">Neste tutorial, examinamos a criação de um relatório simples mestre/detalhes mostrando produtos de uma determinada categoria.</span><span class="sxs-lookup"><span data-stu-id="3213e-193">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="3213e-194">Isso foi realizado usando DropDownList para a lista de categorias e uma DataList para os produtos que pertencem à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="3213e-194">This was accomplished by using a DropDownList for the list of categories and a DataList for the products belonging to the selected category.</span></span>

<span data-ttu-id="3213e-195">O próximo tutorial, examinaremos a separar os registros mestre e de detalhes em duas páginas.</span><span class="sxs-lookup"><span data-stu-id="3213e-195">In the next tutorial we'll look at separating the master and details records across two pages.</span></span> <span data-ttu-id="3213e-196">Na primeira página, uma lista de registros "mestres" será exibida, com um link para exibir os detalhes.</span><span class="sxs-lookup"><span data-stu-id="3213e-196">In the first page, a list of "master" records will be displayed, with a link to view the details.</span></span> <span data-ttu-id="3213e-197">Clicar no link, o usuário para a segunda página, que exibe os detalhes para o registro mestre selecionado será whisk.</span><span class="sxs-lookup"><span data-stu-id="3213e-197">Clicking on the link will whisk the user to the second page, which will display the details for the selected master record.</span></span>

<span data-ttu-id="3213e-198">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="3213e-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="3213e-199">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="3213e-199">About the Author</span></span>

<span data-ttu-id="3213e-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="3213e-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="3213e-201">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="3213e-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="3213e-202">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 2.0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="3213e-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="3213e-203">Ele pode ser contatado pelo [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="3213e-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="3213e-204">ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="3213e-204">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="3213e-205">Agradecimentos especiais a...</span><span class="sxs-lookup"><span data-stu-id="3213e-205">Special Thanks To…</span></span>

<span data-ttu-id="3213e-206">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="3213e-206">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="3213e-207">Revisor de avanço para este tutorial foi Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="3213e-207">Lead reviewer for this tutorial was Randy Schmidt.</span></span> <span data-ttu-id="3213e-208">Você está interessado na revisão Meus próximos artigos do MSDN?</span><span class="sxs-lookup"><span data-stu-id="3213e-208">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="3213e-209">Nesse caso, me descartar uma linha na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="3213e-209">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="3213e-210">Avançar</span><span class="sxs-lookup"><span data-stu-id="3213e-210">Next</span></span>](master-detail-filtering-acess-two-pages-datalist-cs.md)
