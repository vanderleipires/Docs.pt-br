---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
title: Configuração de permissões para o Team Build implantação | Microsoft Docs
author: jrjlee
description: Este tópico descreve como configurar permissões para permitir que o servidor de compilação implantar conteúdo em servidores web e servidores de banco de dados como parte de um b automatizado...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 2488a91e-b0a8-465a-b874-3233f724b56b
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
msc.type: authoredcontent
ms.openlocfilehash: f84e72bd5991b0407008ccdaff5243979cbb986e
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37384656"
---
<a name="configuring-permissions-for-team-build-deployment"></a><span data-ttu-id="a4c5e-103">Configuração de permissões para o Team Build de implantação</span><span class="sxs-lookup"><span data-stu-id="a4c5e-103">Configuring Permissions for Team Build Deployment</span></span>
====================
<span data-ttu-id="a4c5e-104">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="a4c5e-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="a4c5e-105">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="a4c5e-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="a4c5e-106">Este tópico descreve como configurar permissões para permitir que o servidor de compilação implantar conteúdo em servidores web e servidores de banco de dados como parte de um processo de compilação automatizado.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-106">This topic describes how to configure permissions to enable your build server to deploy content to web servers and database servers as part of an automated build process.</span></span>


<span data-ttu-id="a4c5e-107">Este tópico faz parte de uma série de tutoriais com base em torno de requisitos corporativos de implantação de uma empresa fictícia chamada Fabrikam, Inc. Esta série de tutoriais usa uma solução de exemplo&#x2014;o [entre em contato com o Gerenciador soluções](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;para representar um aplicativo web com um nível realista de complexidade, incluindo um aplicativo ASP.NET MVC 3, uma comunicação do Windows Serviço Foundation (WCF) e um projeto de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="a4c5e-108">O método de implantação no centro desses tutoriais se baseia a abordagem de arquivo de projeto divisão descrita [Noções básicas sobre o arquivo de projeto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), em que o processo de compilação é controlado por dois arquivos de projeto&#x2014;uma contendo instruções que se aplicam a todos os ambientes de destino e que contém configurações específicas do ambiente de compilação e implantação de build.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="a4c5e-109">No momento da compilação, o arquivo de projeto específicas do ambiente é mesclado no arquivo de projeto de ambiente independente para formar um conjunto completo de instruções de compilação.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="a4c5e-110">Visão geral da tarefa</span><span class="sxs-lookup"><span data-stu-id="a4c5e-110">Task Overview</span></span>

<span data-ttu-id="a4c5e-111">Quando você instala o serviço de compilação de 2010 do Team Foundation Server (TFS), você pode especificar a identidade com o qual você deseja que o serviço seja executado.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-111">When you install the Team Foundation Server (TFS) 2010 build service, you specify the identity with which you want the service to run.</span></span> <span data-ttu-id="a4c5e-112">Por padrão, essa é a conta de serviço de rede.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-112">By default, this is the Network Service account.</span></span> <span data-ttu-id="a4c5e-113">Como alternativa, você pode configurar o serviço de compilação para ser executado usando uma conta de domínio.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-113">Alternatively, you can configure the build service to run using a domain account.</span></span>

<span data-ttu-id="a4c5e-114">As tarefas de implantação que exigem a autenticação do Windows e que você pretende automatizar usando o Team Build, serão executado usando a identidade de serviço de compilação.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-114">Any deployment tasks that require Windows authentication, and that you plan to automate using Team Build, will run using the build service identity.</span></span> <span data-ttu-id="a4c5e-115">Como tal, você precisará conceder a identidade do serviço de compilação quaisquer permissões necessárias em seus servidores web e os servidores de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-115">As such, you'll need to grant the build service identity any required permissions on your web servers and your database servers.</span></span>

> [!NOTE]
> <span data-ttu-id="a4c5e-116">A conta de serviço de rede usa a conta do computador para autenticar em outros computadores.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-116">The Network Service account uses the machine account to authenticate to other computers.</span></span> <span data-ttu-id="a4c5e-117">Contas de computador assumem a forma * [nome do domínio]\[nome do computador] ***$**&#x2014;, por exemplo, **FABRIKAM\TFSBUILD$**.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-117">Machine accounts take the form *[domain name]\[machine name]***$**&#x2014;for example, **FABRIKAM\TFSBUILD$**.</span></span> <span data-ttu-id="a4c5e-118">Dessa forma, se seu serviço de compilação é executada usando a identidade do serviço de rede, você deve conceder as permissões necessárias para a identidade da conta de computador para seu servidor de compilação.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-118">As such, if your build service runs using the Network Service identity, you should grant any required permissions to the machine account identity for your build server.</span></span>


## <a name="configuring-web-server-permissions"></a><span data-ttu-id="a4c5e-119">Configurando permissões do servidor Web</span><span class="sxs-lookup"><span data-stu-id="a4c5e-119">Configuring Web Server Permissions</span></span>

<span data-ttu-id="a4c5e-120">Conforme descrito em [escolhendo a abordagem da direita para a implantação da Web](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), há duas abordagens principais que você pode usar para implantar pacotes da web em um servidor web remoto:</span><span class="sxs-lookup"><span data-stu-id="a4c5e-120">As described in [Choosing the Right Approach to Web Deployment](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), there are two main approaches you can use if you want to deploy web packages to a remote web server:</span></span>

- <span data-ttu-id="a4c5e-121">Implantar o aplicativo de um local remoto direcionando o *serviço de agente de implantação da Web* (também conhecido como o agente remoto) no servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-121">Deploy the application from a remote location by targeting the *Web Deployment Agent Service* (also known as the remote agent) on the destination server.</span></span>
- <span data-ttu-id="a4c5e-122">Implantar o aplicativo de um local remoto direcionando o *serviços de informações da Internet* (*IIS) Web implantar manipulador* no servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-122">Deploy the application from a remote location by targeting the *Internet Information Services* (*IIS) Web Deploy Handler* on the destination server.</span></span>

<span data-ttu-id="a4c5e-123">O agente remoto tem duas limitações importantes nesse caso:</span><span class="sxs-lookup"><span data-stu-id="a4c5e-123">The remote agent has two key limitations in this case:</span></span>

- <span data-ttu-id="a4c5e-124">O agente remoto oferece suporte somente a autenticação NTLM.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-124">The remote agent supports only NTLM authentication.</span></span> <span data-ttu-id="a4c5e-125">Em outras palavras, a implantação deve usar a identidade de serviço de compilação&#x2014;você não pode representar outra conta.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-125">In other words, the deployment must use the build service identity&#x2014;you can't impersonate another account.</span></span>
- <span data-ttu-id="a4c5e-126">Para usar o agente remoto, a conta que executa a implantação deve ser um administrador no servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-126">To use the remote agent, the account that performs the deployment must be an administrator on the target server.</span></span>

<span data-ttu-id="a4c5e-127">Juntas, essas duas limitações fazem a abordagem do agente remoto indesejável para uma implantação automatizada do Team Build.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-127">Together, these two limitations make the remote agent approach undesirable for an automated Team Build deployment.</span></span> <span data-ttu-id="a4c5e-128">Para usar essa abordagem, você precisa fazer o serviço de compilação um administrador de conta em qualquer servidor web de destino.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-128">To use this approach, you'd need to make the build service account an administrator on any target web servers.</span></span>

<span data-ttu-id="a4c5e-129">Por outro lado, a abordagem do manipulador de implantação da Web oferece várias vantagens:</span><span class="sxs-lookup"><span data-stu-id="a4c5e-129">In contrast, the Web Deploy Handler approach offers various advantages:</span></span>

- <span data-ttu-id="a4c5e-130">O manipulador de implantação da Web dá suporte à autenticação básica, via HTTPS, que permite que você passe as credenciais de uma conta alternativa para a ferramenta de implantação da Web de IIS (implantação da Web).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-130">The Web Deploy Handler supports basic authentication over HTTPS, which allows you to pass the credentials of an alternative account to the IIS Web Deployment Tool (Web Deploy).</span></span>
- <span data-ttu-id="a4c5e-131">Você pode configurar servidores de web de destino para permitir que os usuários não-administrador implantar conteúdo em sites específicos do IIS usando o manipulador de implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-131">You can configure target web servers to allow non-administrator users to deploy content to specific IIS websites using the Web Deploy Handler.</span></span>

<span data-ttu-id="a4c5e-132">Como resultado, é preferível claramente para o manipulador de implantação da Web de destino quando você automatiza a implantação de pacote de web do Team Build.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-132">As a result, it's clearly preferable to target the Web Deploy Handler when you automate web package deployment from Team Build.</span></span> <span data-ttu-id="a4c5e-133">Este é o processo recomendado:</span><span class="sxs-lookup"><span data-stu-id="a4c5e-133">This is the recommended process:</span></span>

1. <span data-ttu-id="a4c5e-134">Crie uma conta de domínio com poucos privilégios para usar para a implantação.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-134">Create a low-privileged domain account to use for the deployment.</span></span>
2. <span data-ttu-id="a4c5e-135">Configurar o manipulador de implantação da Web e conceda à conta as permissões necessárias para implantar conteúdo para um site do IIS específico, conforme descrito em [Configurando um servidor Web para publicação de implantação do Web (manipulador de implantação da Web)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-135">Configure the Web Deploy Handler and grant the account the required permissions to deploy content to a specific IIS website, as described in [Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span>
3. <span data-ttu-id="a4c5e-136">Invocar a implantação da Web e o manipulador de implantação da Web de destino, usando a autenticação básica e fornecendo as credenciais da conta de domínio que você criou, para executar a implantação.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-136">Invoke Web Deploy and target the Web Deploy Handler, using basic authentication and supplying the credentials of the domain account you created, to perform the deployment.</span></span>

<span data-ttu-id="a4c5e-137">No [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) exemplo de solução, você especifica o tipo de autenticação (básica ou NTLM), as credenciais de implantação da Web e o endereço do ponto de extremidade (agente remoto ou manipulador de implantação da Web) no arquivo de projeto específicas do ambiente.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-137">In the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution, you specify the authentication type (basic or NTLM), the Web Deploy credentials, and the endpoint address (remote agent or Web Deploy Handler) in the environment-specific project file.</span></span> <span data-ttu-id="a4c5e-138">Esses valores são usados para formular e executar um comando de implantação da Web quando o arquivo de projeto é executado.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-138">These values are used to formulate and run a Web Deploy command when the project file is executed.</span></span> <span data-ttu-id="a4c5e-139">Para obter mais informações, consulte [Implantando pacotes da Web](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-139">For more information, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>

<span data-ttu-id="a4c5e-140">Para obter mais informações sobre como configurar o manipulador implantar de Web, incluindo como configurar permissões, consulte [Configurando um servidor Web para publicação de implantação do Web (manipulador de implantação da Web)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-140">For more information on configuring the Web Deploy Handler, including how to configure permissions, see [Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span> <span data-ttu-id="a4c5e-141">Para obter mais informações sobre como configurar o agente remoto, consulte [Configurando um servidor Web para publicação de implantação do Web (agente remoto)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-141">For more information on configuring the remote agent, see [Configuring a Web Server for Web Deploy Publishing (Remote Agent)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span></span>

## <a name="configuring-database-server-permissions"></a><span data-ttu-id="a4c5e-142">Configurando permissões de servidor de banco de dados</span><span class="sxs-lookup"><span data-stu-id="a4c5e-142">Configuring Database Server Permissions</span></span>

<span data-ttu-id="a4c5e-143">Para implantar um banco de dados do SQL Server, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="a4c5e-143">To deploy a database to SQL Server, you must:</span></span>

- <span data-ttu-id="a4c5e-144">Crie um logon para a conta de implantação na instância do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-144">Create a login for the deploying account on the SQL Server instance.</span></span>
- <span data-ttu-id="a4c5e-145">Concede ao logon **DBCreator** permissões na instância do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-145">Grant the login **DBCreator** permissions on the SQL Server instance.</span></span>
- <span data-ttu-id="a4c5e-146">Após a implantação inicial, adicione o logon para o **db\_proprietário** no banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-146">After the initial deployment, add the login to the **db\_owner** role on the target database.</span></span> <span data-ttu-id="a4c5e-147">Isso é necessário porque em implantações subsequentes, você está modificando um banco de dados existente em vez de criar um novo banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-147">This is required because on subsequent deployments, you're modifying an existing database rather than creating a new database.</span></span>

<span data-ttu-id="a4c5e-148">Você pode autenticar em uma instância do SQL Server usando a autenticação NTLM ou autenticação do SQL Server:</span><span class="sxs-lookup"><span data-stu-id="a4c5e-148">You can authenticate to a SQL Server instance using either NTLM authentication or SQL Server authentication:</span></span>

- <span data-ttu-id="a4c5e-149">Se você usar a autenticação NTLM, você precisa conceder as permissões descritas acima para a conta de serviço de compilação.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-149">If you use NTLM authentication, you need to grant the permissions described above to the build service account.</span></span>
- <span data-ttu-id="a4c5e-150">Se você usar a autenticação do SQL Server, você precisa conceder as permissões descritas acima para a conta do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-150">If you use SQL Server authentication, you need to grant the permissions described above to the SQL Server account.</span></span> <span data-ttu-id="a4c5e-151">Você também precisa incluir o nome de usuário do SQL Server e a senha na cadeia de conexão que você usa para implantar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-151">You also need to include the SQL Server user name and password in the connection string you use to deploy the database.</span></span>

<span data-ttu-id="a4c5e-152">Para obter detalhes passo a passo sobre como configurar permissões para a implantação de banco de dados, consulte [Configurando um servidor de banco de dados para publicação de implantação na Web](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-152">For step-by-step details on how to configure permissions for database deployment, see [Configuring a Database Server for Web Deploy Publishing](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="a4c5e-153">Conclusão</span><span class="sxs-lookup"><span data-stu-id="a4c5e-153">Conclusion</span></span>

<span data-ttu-id="a4c5e-154">Neste ponto, você deve compreender as permissões necessárias, junto com as opções de autenticação abertas para você, quando você automatizar implantações de aplicativo e o banco de dados da web do Team Build.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-154">At this point, you should understand the permissions required, together with the authentication options open to you, when you automate web application and database deployments from Team Build.</span></span> <span data-ttu-id="a4c5e-155">Você também deve ser capaz de implementar as permissões necessárias nos servidores web IIS e servidores de banco de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a4c5e-155">You should also be able to implement the necessary permissions on IIS web servers and SQL Server database servers.</span></span>

## <a name="further-reading"></a><span data-ttu-id="a4c5e-156">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="a4c5e-156">Further Reading</span></span>

<span data-ttu-id="a4c5e-157">Para obter mais informações sobre como configurar ambientes de servidor do Windows para dar suporte à implantação remota, consulte [Configurando ambientes de servidor para implantação da Web](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="a4c5e-157">For more information on configuring Windows server environments to support remote deployment, see [Configuring Server Environments for Web Deployment](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a4c5e-158">Anterior</span><span class="sxs-lookup"><span data-stu-id="a4c5e-158">Previous</span></span>](deploying-a-specific-build.md)
