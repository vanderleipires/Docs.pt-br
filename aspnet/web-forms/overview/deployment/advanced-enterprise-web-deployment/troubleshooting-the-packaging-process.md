---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
title: O processo de empacotamento da solução de problemas | Microsoft Docs
author: jrjlee
description: Este tópico descreve como você pode coletar informações detalhadas sobre o processo de empacotamento, usando a propriedade EnablePackageProcessLoggingAndAssert no M...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 794bd819-00fc-47e2-876d-fc5d15e0de1c
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
msc.type: authoredcontent
ms.openlocfilehash: 22086d3c154214457fe35794998accdf6109471c
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37384138"
---
<a name="troubleshooting-the-packaging-process"></a><span data-ttu-id="86b2e-103">O processo de empacotamento da solução de problemas</span><span class="sxs-lookup"><span data-stu-id="86b2e-103">Troubleshooting the Packaging Process</span></span>
====================
<span data-ttu-id="86b2e-104">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="86b2e-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="86b2e-105">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="86b2e-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="86b2e-106">Este tópico descreve como você pode coletar informações detalhadas sobre o processo de empacotamento usando o **EnablePackageProcessLoggingAndAssert** propriedade no Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="86b2e-106">This topic describes how you can collect detailed information about the packaging process by using the **EnablePackageProcessLoggingAndAssert** property in the Microsoft Build Engine (MSBuild).</span></span>
> 
> <span data-ttu-id="86b2e-107">Quando você define o **EnablePackageProcessLoggingAndAssert** propriedade **verdadeiro**, MSBuild será:</span><span class="sxs-lookup"><span data-stu-id="86b2e-107">When you set the **EnablePackageProcessLoggingAndAssert** property to **true**, MSBuild will:</span></span>
> 
> - <span data-ttu-id="86b2e-108">Adicione informações adicionais sobre o processo de empacotamento para os logs de build.</span><span class="sxs-lookup"><span data-stu-id="86b2e-108">Add additional information about the packaging process to the build logs.</span></span>
> - <span data-ttu-id="86b2e-109">Registrar erros em determinadas condições, por exemplo, se os arquivos duplicados são encontrados na lista de empacotamento.</span><span class="sxs-lookup"><span data-stu-id="86b2e-109">Log errors under certain conditions, for example, if duplicate files are found in the packaging list.</span></span>
> - <span data-ttu-id="86b2e-110">Crie um diretório de Log na *NomeDoProjeto*\_pasta do pacote e usá-la para registrar informações sobre os arquivos que você está Empacotando.</span><span class="sxs-lookup"><span data-stu-id="86b2e-110">Create a Log directory in the *ProjectName*\_Package folder and use it to record information about the files you're packaging.</span></span>
> 
> <span data-ttu-id="86b2e-111">Se o processo de empacotamento está falhando, ou os pacotes de implantação da web não contêm os arquivos que você espera, você pode usar essas informações para solucionar problemas de pinpoint e processo em que as coisas estão indo erradas.</span><span class="sxs-lookup"><span data-stu-id="86b2e-111">If the packaging process is failing, or your web deployment packages don't contain the files that you expect, you can use this information to troubleshoot the process and pinpoint where things are going wrong.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="86b2e-112">O **EnablePackageProcessLoggingAndAssert** propriedade só funciona se você compilar seu projeto usando o **depurar** configuração.</span><span class="sxs-lookup"><span data-stu-id="86b2e-112">The **EnablePackageProcessLoggingAndAssert** property only works if you build your project using the **Debug** configuration.</span></span> <span data-ttu-id="86b2e-113">A propriedade é ignorada em outras configurações.</span><span class="sxs-lookup"><span data-stu-id="86b2e-113">The property is ignored in other configurations.</span></span>


<span data-ttu-id="86b2e-114">Este tópico faz parte de uma série de tutoriais com base em torno de requisitos corporativos de implantação de uma empresa fictícia chamada Fabrikam, Inc. Esta série de tutoriais usa uma solução de exemplo&#x2014;o [entre em contato com o Gerenciador soluções](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;para representar um aplicativo web com um nível realista de complexidade, incluindo um aplicativo ASP.NET MVC 3, uma comunicação do Windows Serviço Foundation (WCF) e um projeto de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="86b2e-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="86b2e-115">O método de implantação no centro desses tutoriais se baseia a abordagem de arquivo de projeto divisão descrita [Noções básicas sobre o arquivo de projeto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), em que o processo de compilação é controlado por dois arquivos de projeto&#x2014;uma contendo instruções que se aplicam a todos os ambientes de destino e que contém configurações específicas do ambiente de compilação e implantação de build.</span><span class="sxs-lookup"><span data-stu-id="86b2e-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="86b2e-116">No momento da compilação, o arquivo de projeto específicas do ambiente é mesclado no arquivo de projeto de ambiente independente para formar um conjunto completo de instruções de compilação.</span><span class="sxs-lookup"><span data-stu-id="86b2e-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="understanding-the-enablepackageprocessloggingandassert-property"></a><span data-ttu-id="86b2e-117">Compreendendo a propriedade EnablePackageProcessLoggingAndAssert</span><span class="sxs-lookup"><span data-stu-id="86b2e-117">Understanding the EnablePackageProcessLoggingAndAssert Property</span></span>

<span data-ttu-id="86b2e-118">[Compilação e empacotamento Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) descrito como o Pipeline de publicação de Web (WPP) fornece um conjunto de destinos do MSBuild que estendem a funcionalidade do MSBuild e habilitá-lo para integrar com a Web de serviços de informações da Internet (IIS) Ferramenta de implantação (implantação da Web).</span><span class="sxs-lookup"><span data-stu-id="86b2e-118">[Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) described how the Web Publishing Pipeline (WPP) provides a set of MSBuild targets that extend the functionality of MSBuild and enable it to integrate with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="86b2e-119">Ao empacotar um projeto de aplicativo web, você invoca os destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="86b2e-119">When you package a web application project, you're invoking WPP targets.</span></span>

<span data-ttu-id="86b2e-120">Muitos desses destinos WPP incluem lógica condicional que registra em log informações adicionais quando o **EnablePackageProcessLoggingAndAssert** estiver definida como **verdadeiro**.</span><span class="sxs-lookup"><span data-stu-id="86b2e-120">Lots of these WPP targets include conditional logic that logs additional information when the **EnablePackageProcessLoggingAndAssert** property is set to **true**.</span></span> <span data-ttu-id="86b2e-121">Por exemplo, se você examinar a **pacote** destino, você pode ver que ele cria um diretório de log adicionais e grava uma lista de arquivos em um arquivo de texto se **EnablePackageProcessLoggingAndAssert** é igual a **verdadeira**.</span><span class="sxs-lookup"><span data-stu-id="86b2e-121">For example, if you review the **Package** target, you can see that it creates an additional log directory and writes a list of files to a text file if **EnablePackageProcessLoggingAndAssert** is equal to **true**.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample1.xml)]


> [!NOTE]
> <span data-ttu-id="86b2e-122">Os destinos WPP são definidos na *Microsoft.Web.Publishing.targets* arquivo na pasta % PROGRAMFILES (x86) %\MSBuild\Microsoft\VisualStudio\v10.0\Web.</span><span class="sxs-lookup"><span data-stu-id="86b2e-122">The WPP targets are defined in the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span> <span data-ttu-id="86b2e-123">Você pode abrir esse arquivo e examine os destinos no Visual Studio 2010 ou em qualquer editor de XML.</span><span class="sxs-lookup"><span data-stu-id="86b2e-123">You can open this file and review the targets in Visual Studio 2010 or any XML editor.</span></span> <span data-ttu-id="86b2e-124">Tome cuidado para não modificar o conteúdo do arquivo.</span><span class="sxs-lookup"><span data-stu-id="86b2e-124">Take care not to modify the contents of the file.</span></span>


## <a name="enabling-the-additional-logging"></a><span data-ttu-id="86b2e-125">Habilitando o registro em log adicional</span><span class="sxs-lookup"><span data-stu-id="86b2e-125">Enabling the Additional Logging</span></span>

<span data-ttu-id="86b2e-126">Você pode fornecer um valor para o **EnablePackageProcessLoggingAndAssert** propriedade de várias maneiras, dependendo de como você compila seu projeto.</span><span class="sxs-lookup"><span data-stu-id="86b2e-126">You can supply a value for the **EnablePackageProcessLoggingAndAssert** property in various ways, depending on how you build your project.</span></span>

<span data-ttu-id="86b2e-127">Se você compilar seu projeto a partir da linha de comando, você pode fornecer um valor para o **EnablePackageProcessLoggingAndAssert** a propriedade como um argumento de linha de comando:</span><span class="sxs-lookup"><span data-stu-id="86b2e-127">If you build your project from the command line, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property as a command-line argument:</span></span>


[!code-console[Main](troubleshooting-the-packaging-process/samples/sample2.cmd)]


<span data-ttu-id="86b2e-128">Se você estiver usando um arquivo de projeto personalizados para compilar seus projetos, você pode incluir a **EnablePackageProcessLoggingAndAssert** o valor a **propriedades** atributo do **MSBuild**tarefa:</span><span class="sxs-lookup"><span data-stu-id="86b2e-128">If you're using a custom project file to build your projects, you can include the **EnablePackageProcessLoggingAndAssert** value in the **Properties** attribute of the **MSBuild** task:</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample3.xml)]


<span data-ttu-id="86b2e-129">Se você estiver usando uma definição de compilação do Team Foundation Server (TFS) para compilar seus projetos, você pode fornecer um valor para o **EnablePackageProcessLoggingAndAssert** propriedade no **argumentos do MSBuild** linha:![](troubleshooting-the-packaging-process/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="86b2e-129">If you're using a Team Foundation Server (TFS) build definition to build your projects, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property in the **MSBuild Arguments** row:![](troubleshooting-the-packaging-process/_static/image1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="86b2e-130">Para obter mais informações sobre como criar e configurar as definições de compilação, consulte [criação de uma implantação de dá suporte a que definição de compilação](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="86b2e-130">For more information on creating and configuring build definitions, see [Creating a Build Definition That Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>


<span data-ttu-id="86b2e-131">Como alternativa, se você quiser incluir o pacote em cada compilação, você pode modificar o arquivo de projeto do projeto de aplicativo da web definir a **EnablePackageProcessLoggingAndAssert** propriedade **verdadeiro**.</span><span class="sxs-lookup"><span data-stu-id="86b2e-131">Alternatively, if you want to include the package in every build, you can modify the project file for your web application project to set the **EnablePackageProcessLoggingAndAssert** property to **true**.</span></span> <span data-ttu-id="86b2e-132">Você deve adicionar a propriedade para a primeira **PropertyGroup** elemento dentro do seu arquivo. csproj ou. vbproj.</span><span class="sxs-lookup"><span data-stu-id="86b2e-132">You should add the property to the first **PropertyGroup** element within your .csproj or .vbproj file.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample4.xml)]


## <a name="reviewing-the-log-files"></a><span data-ttu-id="86b2e-133">Revisando os arquivos de Log</span><span class="sxs-lookup"><span data-stu-id="86b2e-133">Reviewing the Log Files</span></span>

<span data-ttu-id="86b2e-134">Quando você compilar e empacotar um projeto de aplicativo web com **EnablePackageProcessLoggingAndAssert** definido como **verdadeiro**, MSBuild cria uma pasta adicional chamada Login o *ProjectName* \_Pasta do pacote.</span><span class="sxs-lookup"><span data-stu-id="86b2e-134">When you build and package a web application project with **EnablePackageProcessLoggingAndAssert** set to **true**, MSBuild creates an additional folder named Log in the *ProjectName*\_Package folder.</span></span> <span data-ttu-id="86b2e-135">A pasta de Log contém vários arquivos:</span><span class="sxs-lookup"><span data-stu-id="86b2e-135">The Log folder contains various files:</span></span>

![](troubleshooting-the-packaging-process/_static/image2.png)

<span data-ttu-id="86b2e-136">A lista de arquivos que você vê variam de acordo com as coisas em seu projeto e o processo de compilação.</span><span class="sxs-lookup"><span data-stu-id="86b2e-136">The list of files that you see will vary according to the things in your project and your build process.</span></span> <span data-ttu-id="86b2e-137">No entanto, esses arquivos normalmente são usados para gravar a lista de arquivos que o WPP está coletando para empacotamento em vários estágios do processo:</span><span class="sxs-lookup"><span data-stu-id="86b2e-137">However, these files are typically used to record the list of files that the WPP is collecting for packaging, at various stages of the process:</span></span>

- <span data-ttu-id="86b2e-138">O *PreExcludePipelineCollectFilesPhaseFileList.txt* arquivo lista os arquivos que a coleta de MSBuild para criação de pacotes antes de todos os arquivos que são especificados para exclusão são removidos.</span><span class="sxs-lookup"><span data-stu-id="86b2e-138">The *PreExcludePipelineCollectFilesPhaseFileList.txt* file lists the files that MSBuild collects for packaging before any files that are specified for exclusion are removed.</span></span>
- <span data-ttu-id="86b2e-139">O *AfterExcludeFilesFilesList.txt* arquivo contém a lista de arquivos modificados depois que todos os arquivos que são especificados para exclusão são removidos.</span><span class="sxs-lookup"><span data-stu-id="86b2e-139">The *AfterExcludeFilesFilesList.txt* file contains the modified file list after any files that are specified for exclusion are removed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="86b2e-140">Para obter mais informações sobre como excluir arquivos e pastas do processo de empacotamento, consulte [excluindo arquivos e pastas de implantação](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="86b2e-140">For more information on excluding files and folders from the packaging process, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>
- <span data-ttu-id="86b2e-141">O *AfterTransformWebConfig.txt* arquivo de lista os arquivos coletados para empacotamento após qualquer *Web. config* transformações foram realizadas.</span><span class="sxs-lookup"><span data-stu-id="86b2e-141">The *AfterTransformWebConfig.txt* file lists the files collected for packaging after any *Web.config* transforms have been performed.</span></span> <span data-ttu-id="86b2e-142">Nessa lista, qualquer configuração específica *Web. config* transformar arquivos, como *Debug* e *Release*, são excluídos da lista de arquivos para empacotamento.</span><span class="sxs-lookup"><span data-stu-id="86b2e-142">In this list, any configuration-specific *Web.config* transform files, like *Web.Debug.config* and *Web.Release.config*, are excluded from the list of files for packaging.</span></span> <span data-ttu-id="86b2e-143">Um único transformado *Web. config* está incluído em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="86b2e-143">A single transformed *Web.config* is included in their place.</span></span>
- <span data-ttu-id="86b2e-144">O *PostAutoParameterizationWebConfigConnectionStrings.txt* arquivo contém a lista de arquivos após as cadeias de caracteres de conexão na *Web. config* arquivo foram parametrizados.</span><span class="sxs-lookup"><span data-stu-id="86b2e-144">The *PostAutoParameterizationWebConfigConnectionStrings.txt* file contains the list of files after the connection strings in the *Web.config* file have been parameterized.</span></span> <span data-ttu-id="86b2e-145">Este é o processo que permite que você substitua as cadeias de conexão com as configurações corretas para o seu ambiente de destino quando você implanta o pacote.</span><span class="sxs-lookup"><span data-stu-id="86b2e-145">This is the process that lets you replace your connection strings with the right settings for your target environment when you deploy the package.</span></span>
- <span data-ttu-id="86b2e-146">O *Prepackage.txt* arquivo contém a lista de pré-build finalizada de arquivos a serem incluídos no pacote.</span><span class="sxs-lookup"><span data-stu-id="86b2e-146">The *Prepackage.txt* file contains the finalized pre-build list of files to be included in the package.</span></span>

> [!NOTE]
> <span data-ttu-id="86b2e-147">Normalmente, os nomes dos arquivos de log adicionais correspondem aos destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="86b2e-147">The names of the additional log files typically correspond to WPP targets.</span></span> <span data-ttu-id="86b2e-148">Você pode examinar esses destinos examinando os *Microsoft.Web.Publishing.targets* arquivo na pasta % PROGRAMFILES (x86) %\MSBuild\Microsoft\VisualStudio\v10.0\Web.</span><span class="sxs-lookup"><span data-stu-id="86b2e-148">You can review these targets by examining the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


<span data-ttu-id="86b2e-149">Se o conteúdo do pacote da web não forem os esperados, examinar esses arquivos pode ser uma maneira útil para identificar em que ponto em que as coisas de processo não deu certo.</span><span class="sxs-lookup"><span data-stu-id="86b2e-149">If the contents of your web package aren't what you expected, reviewing these files can be a useful way to identify at what point in the process things went wrong.</span></span>

## <a name="conclusion"></a><span data-ttu-id="86b2e-150">Conclusão</span><span class="sxs-lookup"><span data-stu-id="86b2e-150">Conclusion</span></span>

<span data-ttu-id="86b2e-151">Este tópico descreveu como você pode usar o **EnablePackageProcessLoggingAndAssert** propriedade do MSBuild para solucionar problemas do processo de empacotamento.</span><span class="sxs-lookup"><span data-stu-id="86b2e-151">This topic described how you can use the **EnablePackageProcessLoggingAndAssert** property in MSBuild to troubleshoot the packaging process.</span></span> <span data-ttu-id="86b2e-152">Ele explicou as diferentes maneiras em que você pode fornecer o valor da propriedade para o processo de compilação e descreveu as informações adicionais que são registradas quando você definir a propriedade como **verdadeira**.</span><span class="sxs-lookup"><span data-stu-id="86b2e-152">It explained the different ways in which you can supply the property value to the build process, and it described the additional information that is recorded when you set the property to **true**.</span></span>

## <a name="further-reading"></a><span data-ttu-id="86b2e-153">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="86b2e-153">Further Reading</span></span>

<span data-ttu-id="86b2e-154">Para obter mais informações sobre como usar arquivos de projeto personalizados do MSBuild para controlar o processo de implantação, consulte [Noções básicas sobre o arquivo de projeto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) e [Noções básicas sobre o processo de compilação](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="86b2e-154">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="86b2e-155">Para obter mais informações sobre o WPP e como ele gerencia o processo de empacotamento, consulte [compilação e empacotamento Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="86b2e-155">For more information on the WPP and how it manages the packaging process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="86b2e-156">Para obter orientação sobre como excluir arquivos e pastas específicos de pacotes de implantação da web, consulte [excluindo arquivos e pastas de implantação](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="86b2e-156">For guidance on how to exclude specific files and folders from web deployment packages, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="86b2e-157">Anterior</span><span class="sxs-lookup"><span data-stu-id="86b2e-157">Previous</span></span>](running-windows-powershell-scripts-from-msbuild-project-files.md)
