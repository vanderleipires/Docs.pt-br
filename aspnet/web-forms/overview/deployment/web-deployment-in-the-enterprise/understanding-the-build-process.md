---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
title: Noções básicas sobre o processo de Build | Microsoft Docs
author: jrjlee
description: Este tópico fornece um passo a passo de um processo de compilação e implantação de escala empresarial. A abordagem descrita neste tópico usa Engin personalizado do Microsoft Build...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 5b982451-547b-4a2f-a5dc-79bc64d84d40
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
msc.type: authoredcontent
ms.openlocfilehash: 9df145b281b086f546c55d0b26a8b0e44e896bb0
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/16/2018
ms.locfileid: "41833079"
---
<a name="understanding-the-build-process"></a><span data-ttu-id="83a79-104">Noções básicas sobre o processo de compilação</span><span class="sxs-lookup"><span data-stu-id="83a79-104">Understanding the Build Process</span></span>
====================
<span data-ttu-id="83a79-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="83a79-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="83a79-106">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="83a79-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="83a79-107">Este tópico fornece um passo a passo de um processo de compilação e implantação de escala empresarial.</span><span class="sxs-lookup"><span data-stu-id="83a79-107">This topic provides a walkthrough of an enterprise-scale build and deployment process.</span></span> <span data-ttu-id="83a79-108">A abordagem descrita neste tópico usa arquivos de projeto personalizados do Microsoft Build Engine (MSBuild) para fornecer controle refinado sobre todos os aspectos do processo.</span><span class="sxs-lookup"><span data-stu-id="83a79-108">The approach described in this topic uses custom Microsoft Build Engine (MSBuild) project files to provide fine-grained control over every aspect of the process.</span></span> <span data-ttu-id="83a79-109">Nos arquivos de projeto, os destinos do MSBuild personalizados são usados para executar utilitários de implantação, como a ferramenta de implantação da Web do Internet Information Services (IIS) (MSDeploy.exe) e o utilitário de implantação de banco de dados VSDBCMD.exe.</span><span class="sxs-lookup"><span data-stu-id="83a79-109">Within the project files, custom MSBuild targets are used to run deployment utilities like the Internet Information Services (IIS) Web Deployment Tool (MSDeploy.exe) and the database deployment utility VSDBCMD.exe.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="83a79-110">O tópico anterior [Noções básicas sobre o arquivo de projeto](understanding-the-project-file.md), descritos os principais componentes de um arquivo de projeto do MSBuild e introduziu o conceito de divisão de arquivos de projeto para dar suporte à implantação em vários ambientes de destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-110">The previous topic, [Understanding the Project File](understanding-the-project-file.md), described the key components of an MSBuild project file and introduced the concept of split project files to support deployment to multiple target environments.</span></span> <span data-ttu-id="83a79-111">Se você não ainda estiver familiarizado com esses conceitos, leia [Noções básicas sobre o arquivo de projeto](understanding-the-project-file.md) antes de trabalhar por meio deste tópico.</span><span class="sxs-lookup"><span data-stu-id="83a79-111">If you're not already familiar with these concepts, you should review [Understanding the Project File](understanding-the-project-file.md) before you work through this topic.</span></span>


<span data-ttu-id="83a79-112">Este tópico faz parte de uma série de tutoriais com base em torno de requisitos corporativos de implantação de uma empresa fictícia chamada Fabrikam, Inc. Esta série de tutoriais usa uma solução de exemplo&#x2014;o [entre em contato com o Gerenciador soluções](the-contact-manager-solution.md)&#x2014;para representar um aplicativo web com um nível realista de complexidade, incluindo um aplicativo ASP.NET MVC 3, uma comunicação do Windows Serviço Foundation (WCF) e um projeto de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="83a79-112">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="83a79-113">O método de implantação no centro desses tutoriais se baseia a abordagem de arquivo de projeto divisão descrita [Noções básicas sobre o arquivo de projeto](understanding-the-project-file.md), em que o processo de compilação é controlado por dois arquivos de projeto&#x2014;uma contendo instruções que se aplicam a todos os ambientes de destino e que contém configurações específicas do ambiente de compilação e implantação de build.</span><span class="sxs-lookup"><span data-stu-id="83a79-113">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="83a79-114">No momento da compilação, o arquivo de projeto específicas do ambiente é mesclado no arquivo de projeto de ambiente independente para formar um conjunto completo de instruções de compilação.</span><span class="sxs-lookup"><span data-stu-id="83a79-114">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="build-and-deployment-overview"></a><span data-ttu-id="83a79-115">Compilação e visão geral da implantação</span><span class="sxs-lookup"><span data-stu-id="83a79-115">Build and Deployment Overview</span></span>

<span data-ttu-id="83a79-116">No [entre em contato com o Gerenciador soluções](the-contact-manager-solution.md), três arquivos de controlam o processo de compilação e implantação:</span><span class="sxs-lookup"><span data-stu-id="83a79-116">In the [Contact Manager solution](the-contact-manager-solution.md), three files control the build and deployment process:</span></span>

- <span data-ttu-id="83a79-117">Um *arquivo de projeto universal* (*Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="83a79-117">A *universal project file* (*Publish.proj*).</span></span> <span data-ttu-id="83a79-118">Isso contém instruções de compilação e implantação que não são alterados entre ambientes de destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-118">This contains build and deployment instructions that do not change between destination environments.</span></span>
- <span data-ttu-id="83a79-119">Uma *arquivo de projeto específicas do ambiente* (*Env Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="83a79-119">An *environment-specific project file* (*Env-Dev.proj*).</span></span> <span data-ttu-id="83a79-120">Isso contém as configurações de compilação e implantação que são específicas para um ambiente de destino específico.</span><span class="sxs-lookup"><span data-stu-id="83a79-120">This contains build and deployment settings that are specific to a particular destination environment.</span></span> <span data-ttu-id="83a79-121">Por exemplo, você pode usar o *Env Dev.proj* arquivo para fornecer configurações para um ambiente de teste ou de desenvolvedor e criar um arquivo alternativo nomeado *Stage.proj Env* para fornecer configurações para um preparo ambiente.</span><span class="sxs-lookup"><span data-stu-id="83a79-121">For example, you could use the *Env-Dev.proj* file to provide settings for a developer or test environment and create an alternative file named *Env-Stage.proj* to provide settings for a staging environment.</span></span>
- <span data-ttu-id="83a79-122">Um *arquivo de comando* (*Publish-Dev.cmd*).</span><span class="sxs-lookup"><span data-stu-id="83a79-122">A *command file* (*Publish-Dev.cmd*).</span></span> <span data-ttu-id="83a79-123">Isso contém um MSBuild.exe comando que especifica qual projeto arquivos que você deseja executar.</span><span class="sxs-lookup"><span data-stu-id="83a79-123">This contains an MSBuild.exe command that specifies which project files you want to execute.</span></span> <span data-ttu-id="83a79-124">Você pode criar um arquivo de comando para cada ambiente de destino, em que cada arquivo contém um comando MSBuild.exe que especifica um arquivo de projeto diferente do ambiente específico.</span><span class="sxs-lookup"><span data-stu-id="83a79-124">You can create a command file for every destination environment, where each file contains an MSBuild.exe command that specifies a different environment-specific project file.</span></span> <span data-ttu-id="83a79-125">Isso permite ao desenvolvedor implantar em ambientes diferentes, executando o arquivo de comando apropriado.</span><span class="sxs-lookup"><span data-stu-id="83a79-125">This lets the developer deploy to different environments simply by running the appropriate command file.</span></span>

<span data-ttu-id="83a79-126">Na solução de exemplo, você pode encontrar esses três arquivos na pasta da solução de publicação.</span><span class="sxs-lookup"><span data-stu-id="83a79-126">In the sample solution, you can find these three files in the Publish solution folder.</span></span>

![](understanding-the-build-process/_static/image1.png)

<span data-ttu-id="83a79-127">Antes de examinar esses arquivos em mais detalhes, vamos dar uma olhada em como o processo geral de compilação funciona quando você usa essa abordagem.</span><span class="sxs-lookup"><span data-stu-id="83a79-127">Before you look at these files in more detail, let's take a look at how the overall build process works when you use this approach.</span></span> <span data-ttu-id="83a79-128">Em um alto nível, o processo de compilação e implantação tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="83a79-128">At a high level, the build and deployment process looks like this:</span></span>

![](understanding-the-build-process/_static/image2.png)

<span data-ttu-id="83a79-129">A primeira coisa que acontece é que os dois arquivos de projeto&#x2014;que contém instruções de compilação e implantação universais e uma que contém configurações específicas do ambiente&#x2014;são mesclados em um único arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-129">The first thing that happens is that the two project files&#x2014;one containing universal build and deployment instructions, and one containing environment-specific settings&#x2014;are merged into a single project file.</span></span> <span data-ttu-id="83a79-130">MSBuild funciona, em seguida, as instruções no arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-130">MSBuild then works through the instructions in the project file.</span></span> <span data-ttu-id="83a79-131">Ele cria cada um dos projetos na solução, usando o arquivo de projeto para cada projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-131">It builds each of the projects in the solution, using the project file for each project.</span></span> <span data-ttu-id="83a79-132">Ele, em seguida, chama o utilitário VSDBCMD para implantar o conteúdo da web e bancos de dados para o ambiente de destino e de outras ferramentas, como (MSDeploy.exe) de implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="83a79-132">It then calls out to other tools, like Web Deploy (MSDeploy.exe) and the VSDBCMD utility to deploy your web content and databases to the target environment.</span></span>

<span data-ttu-id="83a79-133">Do início ao fim, o processo de compilação e implantação executa as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="83a79-133">From start to finish, the build and deployment process performs these tasks:</span></span>

1. <span data-ttu-id="83a79-134">Ele exclui o conteúdo do diretório de saída, em preparação para uma nova compilação.</span><span class="sxs-lookup"><span data-stu-id="83a79-134">It deletes the contents of the output directory, in preparation for a fresh build.</span></span>
2. <span data-ttu-id="83a79-135">Ele compila cada projeto na solução:</span><span class="sxs-lookup"><span data-stu-id="83a79-135">It builds each project in the solution:</span></span>

    1. <span data-ttu-id="83a79-136">Para projetos da web&#x2014;nesse caso, um aplicativo web ASP.NET MVC e um WCF web service&#x2014;o processo de compilação cria um pacote de implantação da web para cada projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-136">For web projects&#x2014;in this case, an ASP.NET MVC web application and a WCF web service&#x2014;the build process creates a web deployment package for each project.</span></span>
    2. <span data-ttu-id="83a79-137">Para projetos de banco de dados, o processo de compilação cria um manifesto de implantação (arquivo .deploymanifest) para cada projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-137">For database projects, the build process creates a deployment manifest (.deploymanifest file) for each project.</span></span>
3. <span data-ttu-id="83a79-138">Ele usa o utilitário VSDBCMD.exe para implantar cada projeto na solução, usando várias propriedades dos arquivos de projeto de banco de dados&#x2014;uma cadeia de caracteres de conexão de destino e um nome de banco de dados&#x2014;junto com o arquivo .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="83a79-138">It uses the VSDBCMD.exe utility to deploy each database project in the solution, using various properties from the project files&#x2014;a target connection string and a database name&#x2014;together with the .deploymanifest file.</span></span>
4. <span data-ttu-id="83a79-139">Ele usa o utilitário MSDeploy.exe para implantar cada projeto da web na solução, usando várias propriedades dos arquivos de projeto para controlar o processo de implantação.</span><span class="sxs-lookup"><span data-stu-id="83a79-139">It uses the MSDeploy.exe utility to deploy each web project in the solution, using various properties from the project files to control the deployment process.</span></span>

<span data-ttu-id="83a79-140">Você pode usar a solução de exemplo para rastrear esse processo em mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="83a79-140">You can use the sample solution to trace this process in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="83a79-141">Para obter orientação sobre como personalizar os arquivos de projeto de ambiente específicas para seus próprios ambientes de servidor, consulte [configurar propriedades de implantação para um ambiente de destino](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="83a79-141">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>


## <a name="invoking-the-build-and-deployment-process"></a><span data-ttu-id="83a79-142">Invocar o processo de implantação e compilação</span><span class="sxs-lookup"><span data-stu-id="83a79-142">Invoking the Build and Deployment Process</span></span>

<span data-ttu-id="83a79-143">Para implantar a solução de Gerenciador de contatos em um ambiente de teste do desenvolvedor, o desenvolvedor é executado o *Dev.cmd publicar* arquivo de comando.</span><span class="sxs-lookup"><span data-stu-id="83a79-143">To deploy the Contact Manager solution to a developer test environment, the developer runs the *Publish-Dev.cmd* command file.</span></span> <span data-ttu-id="83a79-144">Isso invoca MSBuild.exe, especificando *Publish.proj* como o arquivo de projeto para executar e *Dev.proj Env* como um valor de parâmetro.</span><span class="sxs-lookup"><span data-stu-id="83a79-144">This invokes MSBuild.exe, specifying *Publish.proj* as the project file to execute and *Env-Dev.proj* as a parameter value.</span></span>


[!code-console[Main](understanding-the-build-process/samples/sample1.cmd)]


> [!NOTE]
> <span data-ttu-id="83a79-145">O **/fl** alternar (abreviação de **/fileLogger**) registra a saída da compilação em um arquivo denominado *MSBuild* no diretório atual.</span><span class="sxs-lookup"><span data-stu-id="83a79-145">The **/fl** switch (short for **/fileLogger**) logs the build output to a file named *msbuild.log* in the current directory.</span></span> <span data-ttu-id="83a79-146">Para obter mais informações, consulte o [referência de linha de comando do MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="83a79-146">For more information, see the [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>


<span data-ttu-id="83a79-147">Neste ponto, o MSBuild começa a ser executado, carrega o *Publish.proj* arquivo e começará a processar as instruções dentro dele.</span><span class="sxs-lookup"><span data-stu-id="83a79-147">At this point, MSBuild starts running, loads the *Publish.proj* file, and starts processing the instructions within it.</span></span> <span data-ttu-id="83a79-148">A primeira instrução informa ao MSBuild para importar o projeto de arquivos que o **TargetEnvPropsFile** parâmetro especifica.</span><span class="sxs-lookup"><span data-stu-id="83a79-148">The first instruction tells MSBuild to import the project file that the **TargetEnvPropsFile** parameter specifies.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample2.xml)]


<span data-ttu-id="83a79-149">O **TargetEnvPropsFile** parâmetro especifica o *Env Dev.proj* arquivo, para que o MSBuild mescla o conteúdo da *Env Dev.proj* o arquivo no  *Publish.proj* arquivo.</span><span class="sxs-lookup"><span data-stu-id="83a79-149">The **TargetEnvPropsFile** parameter specifies the *Env-Dev.proj* file, so MSBuild merges the contents of the *Env-Dev.proj* file into the *Publish.proj* file.</span></span>

<span data-ttu-id="83a79-150">Os próximos elementos MSBuild encontra no arquivo de projeto mescladas são grupos de propriedade.</span><span class="sxs-lookup"><span data-stu-id="83a79-150">The next elements that MSBuild encounters in the merged project file are property groups.</span></span> <span data-ttu-id="83a79-151">Propriedades são processadas na ordem em que aparecem no arquivo.</span><span class="sxs-lookup"><span data-stu-id="83a79-151">Properties are processed in the order in which they appear in the file.</span></span> <span data-ttu-id="83a79-152">MSBuild cria um par chave-valor para cada propriedade, fornecendo que quaisquer condições especificadas são atendidas.</span><span class="sxs-lookup"><span data-stu-id="83a79-152">MSBuild creates a key-value pair for each property, providing that any specified conditions are met.</span></span> <span data-ttu-id="83a79-153">As propriedades definidas posteriormente no arquivo substituirá todas as propriedades com o mesmo nome definido anteriormente no arquivo.</span><span class="sxs-lookup"><span data-stu-id="83a79-153">Properties defined later in the file will overwrite any properties with the same name defined earlier in the file.</span></span> <span data-ttu-id="83a79-154">Por exemplo, considere a **OutputRoot** propriedades.</span><span class="sxs-lookup"><span data-stu-id="83a79-154">For example, consider the **OutputRoot** properties.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample3.xml)]


<span data-ttu-id="83a79-155">Quando o MSBuild processa o primeiro **OutputRoot** elemento, fornecendo um parâmetro nomeado da mesma forma não foi fornecido, ele define o valor da **OutputRoot** propriedade **... \Publish\Out**. Quando ele encontra o segundo **OutputRoot** elemento, se a condição for avaliada como **verdadeiro**, ele substituirá o valor da **OutputRoot** propriedade com o valor da **OutDir** parâmetro.</span><span class="sxs-lookup"><span data-stu-id="83a79-155">When MSBuild processes the first **OutputRoot** element, providing a similarly named parameter has not been provided, it sets the value of the **OutputRoot** property to **..\Publish\Out**. When it encounters the second **OutputRoot** element, if the condition evaluates to **true**, it will overwrite the value of the **OutputRoot** property with the value of the **OutDir** parameter.</span></span>

<span data-ttu-id="83a79-156">O próximo elemento MSBuild encontra é um grupo único item, que contém um item denominado **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="83a79-156">The next element that MSBuild encounters is a single item group, containing an item named **ProjectsToBuild**.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample4.xml)]


<span data-ttu-id="83a79-157">MSBuild processa essa instrução, criando uma lista de itens chamada **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="83a79-157">MSBuild processes this instruction by building an item list named **ProjectsToBuild**.</span></span> <span data-ttu-id="83a79-158">Nesse caso, a lista de itens contiver um único valor&#x2014;o caminho e o nome do arquivo de solução.</span><span class="sxs-lookup"><span data-stu-id="83a79-158">In this case, the item list contains a single value&#x2014;the path and filename of the solution file.</span></span>

<span data-ttu-id="83a79-159">Neste ponto, os elementos restantes são alvos.</span><span class="sxs-lookup"><span data-stu-id="83a79-159">At this point, the remaining elements are targets.</span></span> <span data-ttu-id="83a79-160">Destinos são processados de forma diferente de propriedades e itens de&#x2014;essencialmente, destinos não são processados, a menos que eles explicitamente são especificados pelo usuário ou invocados por outra construção dentro do arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-160">Targets are processed differently from properties and items&#x2014;essentially, targets are not processed unless they are either explicitly specified by the user or invoked by another construct within the project file.</span></span> <span data-ttu-id="83a79-161">Lembre-se de que a abertura **Project** marca inclui um **DefaultTargets** atributo.</span><span class="sxs-lookup"><span data-stu-id="83a79-161">Recall that the opening **Project** tag includes a **DefaultTargets** attribute.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample5.xml)]


<span data-ttu-id="83a79-162">Isso instrui o MSBuild para invocar o **FullPublish** de destino, se os destinos não são especificado quando MSBuild.exe é invocado.</span><span class="sxs-lookup"><span data-stu-id="83a79-162">This instructs MSBuild to invoke the **FullPublish** target, if targets are not specified when MSBuild.exe is invoked.</span></span> <span data-ttu-id="83a79-163">O **FullPublish** destino não contém quaisquer tarefas; em vez disso, ele simplesmente especifica uma lista de dependências.</span><span class="sxs-lookup"><span data-stu-id="83a79-163">The **FullPublish** target doesn't contain any tasks; instead it simply specifies a list of dependencies.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample6.xml)]


<span data-ttu-id="83a79-164">Essa dependência informa ao MSBuild que a fim de executar o **FullPublish** destino, ele precisa chamar essa lista de destinos na ordem fornecida:</span><span class="sxs-lookup"><span data-stu-id="83a79-164">This dependency tells MSBuild that in order to execute the **FullPublish** target, it needs to invoke this list of targets in the order provided:</span></span>

1. <span data-ttu-id="83a79-165">Ele deve invocar o **Clean** destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-165">It must invoke the **Clean** target.</span></span>
2. <span data-ttu-id="83a79-166">Ele deve invocar o **BuildProjects** destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-166">It must invoke the **BuildProjects** target.</span></span>
3. <span data-ttu-id="83a79-167">Ele deve invocar o **GatherPackagesForPublishing** destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-167">It must invoke the **GatherPackagesForPublishing** target.</span></span>
4. <span data-ttu-id="83a79-168">Ele deve invocar o **PublishDbPackages** destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-168">It must invoke the **PublishDbPackages** target.</span></span>
5. <span data-ttu-id="83a79-169">Ele deve invocar o **PublishWebPackages** destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-169">It must invoke the **PublishWebPackages** target.</span></span>

### <a name="the-clean-target"></a><span data-ttu-id="83a79-170">O destino limpar</span><span class="sxs-lookup"><span data-stu-id="83a79-170">The Clean Target</span></span>

<span data-ttu-id="83a79-171">O **Clean** destino basicamente exclui o diretório de saída e todo seu conteúdo, como preparação para uma nova compilação.</span><span class="sxs-lookup"><span data-stu-id="83a79-171">The **Clean** target basically deletes the output directory and all its contents, as preparation for a fresh build.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample7.xml)]


<span data-ttu-id="83a79-172">Observe que o destino inclui um **ItemGroup** elemento.</span><span class="sxs-lookup"><span data-stu-id="83a79-172">Notice that the target includes an **ItemGroup** element.</span></span> <span data-ttu-id="83a79-173">Quando você define propriedades ou itens dentro de um **destino** elemento, você está criando *dinâmico* itens e propriedades.</span><span class="sxs-lookup"><span data-stu-id="83a79-173">When you define properties or items within a **Target** element, you're creating *dynamic* properties and items.</span></span> <span data-ttu-id="83a79-174">Em outras palavras, as propriedades ou itens não são processados até que o destino é executado.</span><span class="sxs-lookup"><span data-stu-id="83a79-174">In other words, the properties or items aren't processed until the target is executed.</span></span> <span data-ttu-id="83a79-175">O diretório de saída talvez não existe ou contém arquivos de até que o processo de build é iniciado, portanto, não é possível criar o  **\_FilesToDelete** lista como um item estático; você precisa esperar até que a execução está em andamento.</span><span class="sxs-lookup"><span data-stu-id="83a79-175">The output directory might not exist or contain any files until the build process begins, so you can't build the **\_FilesToDelete** list as a static item; you have to wait until execution is underway.</span></span> <span data-ttu-id="83a79-176">Como tal, você deve criar a lista como um item dinâmico no destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-176">As such, you build the list as a dynamic item within the target.</span></span>

> [!NOTE]
> <span data-ttu-id="83a79-177">Nesse caso, porque o **Clean** destino seja o primeiro a ser executado, não é necessário usar um grupo de item dinâmico real.</span><span class="sxs-lookup"><span data-stu-id="83a79-177">In this case, because the **Clean** target is the first to be executed, there's no real need to use a dynamic item group.</span></span> <span data-ttu-id="83a79-178">No entanto, é recomendável usar as propriedades dinâmicas e itens nesse tipo de cenário, como você talvez queira executar destinos em uma ordem diferente em algum momento.</span><span class="sxs-lookup"><span data-stu-id="83a79-178">However, it's good practice to use dynamic properties and items in this type of scenario, as you might want to execute targets in a different order at some point.</span></span>  
> <span data-ttu-id="83a79-179">Você também deve ter como objetivo evitar declarar itens que nunca serão usados.</span><span class="sxs-lookup"><span data-stu-id="83a79-179">You should also aim to avoid declaring items that will never be used.</span></span> <span data-ttu-id="83a79-180">Se você tiver itens que serão usados apenas para um destino específico, considere colocá-los dentro do destino para remover qualquer sobrecarga desnecessária no processo de compilação.</span><span class="sxs-lookup"><span data-stu-id="83a79-180">If you have items that will only be used by a specific target, consider placing them inside the target to remove any unnecessary overhead on the build process.</span></span>


<span data-ttu-id="83a79-181">Dynamic itens à parte, o **Clean** destino é bastante simples e utiliza o interno **mensagem**, **excluir**, e **RemoveDir**tarefas para:</span><span class="sxs-lookup"><span data-stu-id="83a79-181">Dynamic items aside, the **Clean** target is fairly straightforward and makes use of the built-in **Message**, **Delete**, and **RemoveDir** tasks to:</span></span>

1. <span data-ttu-id="83a79-182">Envie uma mensagem para o agente de log.</span><span class="sxs-lookup"><span data-stu-id="83a79-182">Send a message to the logger.</span></span>
2. <span data-ttu-id="83a79-183">Crie uma lista de arquivos a serem excluídos.</span><span class="sxs-lookup"><span data-stu-id="83a79-183">Build a list of files to delete.</span></span>
3. <span data-ttu-id="83a79-184">Exclua os arquivos.</span><span class="sxs-lookup"><span data-stu-id="83a79-184">Delete the files.</span></span>
4. <span data-ttu-id="83a79-185">Remova o diretório de saída.</span><span class="sxs-lookup"><span data-stu-id="83a79-185">Remove the output directory.</span></span>

### <a name="the-buildprojects-target"></a><span data-ttu-id="83a79-186">O destino BuildProjects</span><span class="sxs-lookup"><span data-stu-id="83a79-186">The BuildProjects Target</span></span>

<span data-ttu-id="83a79-187">O **BuildProjects** destino basicamente cria todos os projetos na solução de exemplo.</span><span class="sxs-lookup"><span data-stu-id="83a79-187">The **BuildProjects** target basically builds all the projects in the sample solution.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample8.xml)]


<span data-ttu-id="83a79-188">Esse destino foi descrito em detalhes no tópico anterior [Noções básicas sobre o arquivo de projeto](understanding-the-project-file.md), para ilustrar como destinos e tarefas referenciarem itens e propriedades.</span><span class="sxs-lookup"><span data-stu-id="83a79-188">This target was described in some detail in the previous topic, [Understanding the Project File](understanding-the-project-file.md), to illustrate how tasks and targets reference properties and items.</span></span> <span data-ttu-id="83a79-189">Neste ponto, você está interessado principalmente a **MSBuild** tarefa.</span><span class="sxs-lookup"><span data-stu-id="83a79-189">At this point, you're mainly interested in the **MSBuild** task.</span></span> <span data-ttu-id="83a79-190">Você pode usar essa tarefa para criar vários projetos.</span><span class="sxs-lookup"><span data-stu-id="83a79-190">You can use this task to build multiple projects.</span></span> <span data-ttu-id="83a79-191">A tarefa não cria uma nova instância da MSBuild.exe; Ele usa a instância em execução atual para compilar cada projeto.</span><span class="sxs-lookup"><span data-stu-id="83a79-191">The task does not create a new instance of MSBuild.exe; it uses the current running instance to build each project.</span></span> <span data-ttu-id="83a79-192">Os pontos principais de interesse neste exemplo são as propriedades de implantação:</span><span class="sxs-lookup"><span data-stu-id="83a79-192">The key points of interest in this example are the deployment properties:</span></span>

- <span data-ttu-id="83a79-193">O **DeployOnBuild** propriedade instrui o MSBuild a executar quaisquer instruções de implantação nas configurações do projeto quando a compilação de cada projeto estiver concluída.</span><span class="sxs-lookup"><span data-stu-id="83a79-193">The **DeployOnBuild** property instructs MSBuild to run any deployment instructions in the project settings when the build of each project is complete.</span></span>
- <span data-ttu-id="83a79-194">O **DeployTarget** propriedade identifica o destino que você deseja invocar depois que o projeto é compilado.</span><span class="sxs-lookup"><span data-stu-id="83a79-194">The **DeployTarget** property identifies the target that you want to invoke after the project is built.</span></span> <span data-ttu-id="83a79-195">Nesse caso, o **pacote** destino cria a saída do projeto em um pacote implantável de web.</span><span class="sxs-lookup"><span data-stu-id="83a79-195">In this case, the **Package** target builds the project output into a deployable web package.</span></span>

> [!NOTE]
> <span data-ttu-id="83a79-196">O **pacote** destino invoca o Web Publishing Pipeline (WPP), que fornece a integração entre o MSBuild e a implantação da Web.</span><span class="sxs-lookup"><span data-stu-id="83a79-196">The **Package** target invokes the Web Publishing Pipeline (WPP), which provides integration between MSBuild and Web Deploy.</span></span> <span data-ttu-id="83a79-197">Se você quiser dar uma olhada os destinos internos que fornece o WPP, examine os *Microsoft.Web.Publishing.targets* arquivo na pasta % PROGRAMFILES (x86) %\MSBuild\Microsoft\VisualStudio\v10.0\Web.</span><span class="sxs-lookup"><span data-stu-id="83a79-197">If you want to take a look at the built-in targets that the WPP provides, review the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


### <a name="the-gatherpackagesforpublishing-target"></a><span data-ttu-id="83a79-198">O destino GatherPackagesForPublishing</span><span class="sxs-lookup"><span data-stu-id="83a79-198">The GatherPackagesForPublishing Target</span></span>

<span data-ttu-id="83a79-199">Se você estude o **GatherPackagesForPublishing** destino, você observará que ele realmente não contém quaisquer tarefas.</span><span class="sxs-lookup"><span data-stu-id="83a79-199">If you study the **GatherPackagesForPublishing** target, you'll notice that it doesn't actually contain any tasks.</span></span> <span data-ttu-id="83a79-200">Em vez disso, ele contém um grupo de item único que define três itens dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="83a79-200">Instead, it contains a single item group that defines three dynamic items.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample9.xml)]


<span data-ttu-id="83a79-201">Esses itens se referem aos pacotes de implantação que foram criados quando o **BuildProjects** destino foi executado.</span><span class="sxs-lookup"><span data-stu-id="83a79-201">These items refer to the deployment packages that were created when the **BuildProjects** target was executed.</span></span> <span data-ttu-id="83a79-202">Você não foi possível definir esses itens estaticamente no arquivo de projeto, pois os arquivos ao qual se referem os itens não existem até que o **BuildProjects** destino é executado.</span><span class="sxs-lookup"><span data-stu-id="83a79-202">You couldn't define these items statically in the project file, because the files to which the items refer don't exist until the **BuildProjects** target is executed.</span></span> <span data-ttu-id="83a79-203">Em vez disso, os itens devem ser definidos dinamicamente dentro de um destino que não será chamado até depois que o **BuildProjects** destino é executado.</span><span class="sxs-lookup"><span data-stu-id="83a79-203">Instead, the items must be defined dynamically within a target that is not invoked until after the **BuildProjects** target is executed.</span></span>

<span data-ttu-id="83a79-204">Os itens não são usados dentro desse destino&#x2014;este destino simplesmente cria os itens e os metadados associados a cada valor do item.</span><span class="sxs-lookup"><span data-stu-id="83a79-204">The items are not used within this target&#x2014;this target simply builds the items and the metadata associated with each item value.</span></span> <span data-ttu-id="83a79-205">Depois que esses elementos são processados, o **PublishPackages** item conterá dois valores, o caminho para o *ContactManager.Mvc.deploy.cmd* arquivo e o caminho para o  *ContactManager.Service.deploy.cmd* arquivo.</span><span class="sxs-lookup"><span data-stu-id="83a79-205">Once these elements are processed, the **PublishPackages** item will contain two values, the path to the *ContactManager.Mvc.deploy.cmd* file and the path to the *ContactManager.Service.deploy.cmd* file.</span></span> <span data-ttu-id="83a79-206">A implantação da Web cria esses arquivos como parte do pacote da web para cada projeto, e esses são os arquivos que você deve chamar no servidor de destino para implantar os pacotes.</span><span class="sxs-lookup"><span data-stu-id="83a79-206">Web Deploy creates these files as part of the web package for each project, and these are the files that you must invoke on the destination server in order to deploy the packages.</span></span> <span data-ttu-id="83a79-207">Se você abrir um desses arquivos, basicamente, você verá um comando MSDeploy.exe com vários valores de parâmetro de compilação específica.</span><span class="sxs-lookup"><span data-stu-id="83a79-207">If you open up one of these files, you'll basically see an MSDeploy.exe command with various build-specific parameter values.</span></span>

<span data-ttu-id="83a79-208">O **DbPublishPackages** item conterá um único valor, o caminho para o *ContactManager.Database.deploymanifest* arquivo.</span><span class="sxs-lookup"><span data-stu-id="83a79-208">The **DbPublishPackages** item will contain a single value, the path to the *ContactManager.Database.deploymanifest* file.</span></span>

> [!NOTE]
> <span data-ttu-id="83a79-209">Um arquivo .deploymanifest é gerado quando você compila um projeto de banco de dados e usa o mesmo esquema como um arquivo de projeto MSBuild.</span><span class="sxs-lookup"><span data-stu-id="83a79-209">A .deploymanifest file is generated when you build a database project, and it uses the same schema as an MSBuild project file.</span></span> <span data-ttu-id="83a79-210">Ele contém todas as informações necessárias para implantar um banco de dados, incluindo o local do esquema de banco de dados (.dbschema) e detalhes de quaisquer scripts de pré-implantação e pós-implantação.</span><span class="sxs-lookup"><span data-stu-id="83a79-210">It contains all the information required to deploy a database, including the location of the database schema (.dbschema) and details of any pre-deployment and post-deployment scripts.</span></span> <span data-ttu-id="83a79-211">Para obter mais informações, consulte [visão geral de um de banco de dados de compilação e implantação do](https://msdn.microsoft.com/library/aa833165.aspx).</span><span class="sxs-lookup"><span data-stu-id="83a79-211">For more information, see [An Overview of Database Build and Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span></span>


<span data-ttu-id="83a79-212">Você aprenderá mais sobre como pacotes de implantação e manifestos de implantação de banco de dados são criados e usados no [compilação e empacotamento Web Application Projects](building-and-packaging-web-application-projects.md) e [Implantando projetos de banco de dados](deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="83a79-212">You'll learn more about how deployment packages and database deployment manifests are created and used in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Deploying Database Projects](deploying-database-projects.md).</span></span>

### <a name="the-publishdbpackages-target"></a><span data-ttu-id="83a79-213">O destino PublishDbPackages</span><span class="sxs-lookup"><span data-stu-id="83a79-213">The PublishDbPackages Target</span></span>

<span data-ttu-id="83a79-214">Falando resumidamente, o **PublishDbPackages** destino invoca o utilitário VSDBCMD para implantar o **ContactManager** banco de dados para um ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-214">Briefly speaking, the **PublishDbPackages** target invokes the VSDBCMD utility to deploy the **ContactManager** database to a target environment.</span></span> <span data-ttu-id="83a79-215">Configurando a implantação de banco de dados envolve muitas decisões e nuances, e você aprenderá mais sobre isso em [implantar projetos de banco de dados](deploying-database-projects.md) e [Personalizando as implantações de banco de dados para vários ambientes](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="83a79-215">Configuring database deployment involves lots of decisions and nuances, and you'll learn more about this in [Deploying Database Projects](deploying-database-projects.md) and [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="83a79-216">Neste tópico, vamos nos concentrar em como esse destino realmente funciona.</span><span class="sxs-lookup"><span data-stu-id="83a79-216">In this topic, we'll focus on how this target actually functions.</span></span>

<span data-ttu-id="83a79-217">Primeiro, observe que a marca de abertura inclui um **saídas** atributo.</span><span class="sxs-lookup"><span data-stu-id="83a79-217">First, notice that the opening tag includes an **Outputs** attribute.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample10.xml)]


<span data-ttu-id="83a79-218">Este é um exemplo da *envio em lote de destino*.</span><span class="sxs-lookup"><span data-stu-id="83a79-218">This is an example of *target batching*.</span></span> <span data-ttu-id="83a79-219">Em arquivos de projeto do MSBuild, o envio em lote é uma técnica para iterar em coleções.</span><span class="sxs-lookup"><span data-stu-id="83a79-219">In MSBuild project files, batching is a technique for iterating over collections.</span></span> <span data-ttu-id="83a79-220">O valor da **saídas** atributo, **"% (DbPublishPackages.Identity)"**, refere-se ao **identidade** propriedade de metadados do **DbPublishPackages**  lista de itens.</span><span class="sxs-lookup"><span data-stu-id="83a79-220">The value of the **Outputs** attribute, **"%(DbPublishPackages.Identity)"**, refers to the **Identity** metadata property of the **DbPublishPackages** item list.</span></span> <span data-ttu-id="83a79-221">Essa notação **Outputs=%***(ItemList.ItemMetadataName)*, é convertido como:</span><span class="sxs-lookup"><span data-stu-id="83a79-221">This notation, **Outputs=%***(ItemList.ItemMetadataName)*, is translated as:</span></span>

- <span data-ttu-id="83a79-222">Dividir os itens na **DbPublishPackages** em lotes de itens que contêm os mesmos **identidade** valor de metadados.</span><span class="sxs-lookup"><span data-stu-id="83a79-222">Split the items in **DbPublishPackages** into batches of items that contain the same **Identity** metadata value.</span></span>
- <span data-ttu-id="83a79-223">Execute o destino de uma vez por lote.</span><span class="sxs-lookup"><span data-stu-id="83a79-223">Execute the target once per batch.</span></span>

> [!NOTE]
> <span data-ttu-id="83a79-224">**Identidade** é um dos [os valores de metadados internos](https://msdn.microsoft.com/library/ms164313.aspx) que é atribuído a cada item na criação.</span><span class="sxs-lookup"><span data-stu-id="83a79-224">**Identity** is one of the [built-in metadata values](https://msdn.microsoft.com/library/ms164313.aspx) that is assigned to every item on creation.</span></span> <span data-ttu-id="83a79-225">Refere-se ao valor da **Include** atributo na **Item** elemento&#x2014;em outras palavras, o caminho e o nome do item.</span><span class="sxs-lookup"><span data-stu-id="83a79-225">It refers to the value of the **Include** attribute in the **Item** element&#x2014;in other words, the path and filename of the item.</span></span>


<span data-ttu-id="83a79-226">Nesse caso, porque nunca deverá haver mais de um item com o mesmo caminho e nome de arquivo, essencialmente, trabalhamos com tamanhos de lote de um.</span><span class="sxs-lookup"><span data-stu-id="83a79-226">In this case, because there should never be more than one item with the same path and filename, we're essentially working with batch sizes of one.</span></span> <span data-ttu-id="83a79-227">O destino é executado uma vez para cada pacote de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="83a79-227">The target is executed once for every database package.</span></span>

<span data-ttu-id="83a79-228">Você pode ver uma notação semelhante na  **\_Cmd** propriedade, que cria um comando VSDBCMD com as opções apropriadas.</span><span class="sxs-lookup"><span data-stu-id="83a79-228">You can see a similar notation in the **\_Cmd** property, which builds a VSDBCMD command with the appropriate switches.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample11.xml)]


<span data-ttu-id="83a79-229">Nesse caso, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, e **%(DbPublishPackages.FullPath)** todas se referem a valores de metadados do **DbPublishPackages** coleção de itens.</span><span class="sxs-lookup"><span data-stu-id="83a79-229">In this case, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, and **%(DbPublishPackages.FullPath)** all refer to metadata values of the **DbPublishPackages** item collection.</span></span> <span data-ttu-id="83a79-230">O  **\_Cmd** propriedade é usada pelo **Exec** tarefa, que chama o comando.</span><span class="sxs-lookup"><span data-stu-id="83a79-230">The **\_Cmd** property is used by the **Exec** task, which invokes the command.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample12.xml)]


<span data-ttu-id="83a79-231">Como resultado dessa notação, o **Exec** tarefa será criar lotes com base em combinações exclusivas da **DatabaseConnectionString**, **TargetDatabase**e **FullPath** valores de metadados e a tarefa serão executada uma vez para cada lote.</span><span class="sxs-lookup"><span data-stu-id="83a79-231">As a result of this notation, the **Exec** task will create batches based on unique combinations of the **DatabaseConnectionString**, **TargetDatabase**, and **FullPath** metadata values, and the task will execute once for each batch.</span></span> <span data-ttu-id="83a79-232">Este é um exemplo da *lote de tarefas*.</span><span class="sxs-lookup"><span data-stu-id="83a79-232">This is an example of *task batching*.</span></span> <span data-ttu-id="83a79-233">No entanto, porque o nível de destino envio em lote já foi dividido nossa coleção de itens em lotes de item único, o **Exec** tarefa será executada apenas uma vez para cada iteração do destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-233">However, because the target-level batching has already divided our item collection into single-item batches, the **Exec** task will run once and only once for each iteration of the target.</span></span> <span data-ttu-id="83a79-234">Em outras palavras, essa tarefa invoca o utilitário VSDBCMD uma vez para cada pacote de banco de dados na solução.</span><span class="sxs-lookup"><span data-stu-id="83a79-234">In other words, this task invokes the VSDBCMD utility once for each database package in the solution.</span></span>

> [!NOTE]
> <span data-ttu-id="83a79-235">Para obter mais informações sobre o destino e o lote de tarefas, consulte MSBuild [envio em lote](https://msdn.microsoft.com/library/ms171473.aspx), [metadados do Item no lote de destino](https://msdn.microsoft.com/library/ms228229.aspx), e [metadados do Item no lote de tarefas](https://msdn.microsoft.com/library/ms171474.aspx).</span><span class="sxs-lookup"><span data-stu-id="83a79-235">For more information on target and task batching, see MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [Item Metadata in Target Batching](https://msdn.microsoft.com/library/ms228229.aspx), and [Item Metadata in Task Batching](https://msdn.microsoft.com/library/ms171474.aspx).</span></span>


### <a name="the-publishwebpackages-target"></a><span data-ttu-id="83a79-236">O destino PublishWebPackages</span><span class="sxs-lookup"><span data-stu-id="83a79-236">The PublishWebPackages Target</span></span>

<span data-ttu-id="83a79-237">Nesse ponto, você invocou a **BuildProjects** destino, que gera um pacote de implantação da web para cada projeto na solução de exemplo.</span><span class="sxs-lookup"><span data-stu-id="83a79-237">By this point, you've invoked the **BuildProjects** target, which generates a web deployment package for each project in the sample solution.</span></span> <span data-ttu-id="83a79-238">Que acompanha cada pacote é um *Deploy. cmd* arquivo, que contém os comandos de MSDeploy.exe necessários para implantar o pacote para o ambiente de destino, e uma *SetParameters.xml* arquivo, que especifica o detalhes necessários do ambiente de destino.</span><span class="sxs-lookup"><span data-stu-id="83a79-238">Accompanying each package is a *deploy.cmd* file, which contains the MSDeploy.exe commands required to deploy the package to the target environment, and a *SetParameters.xml* file, which specifies the necessary details of the target environment.</span></span> <span data-ttu-id="83a79-239">Você invocou também o **GatherPackagesForPublishing** destino, que gera uma coleção de item que contém o *Deploy. cmd* arquivos que você está interessado.</span><span class="sxs-lookup"><span data-stu-id="83a79-239">You've also invoked the **GatherPackagesForPublishing** target, which generates an item collection containing the *deploy.cmd* files you're interested in.</span></span> <span data-ttu-id="83a79-240">Essencialmente, o **PublishWebPackages** destino realiza as seguintes funções:</span><span class="sxs-lookup"><span data-stu-id="83a79-240">Essentially, the **PublishWebPackages** target performs these functions:</span></span>

- <span data-ttu-id="83a79-241">Ela manipula a *SetParameters.xml* arquivo para cada pacote incluir os detalhes corretos para o ambiente de destino, usando o **XmlPoke** tarefa.</span><span class="sxs-lookup"><span data-stu-id="83a79-241">It manipulates the *SetParameters.xml* file for each package to include the correct details for the target environment, using the **XmlPoke** task.</span></span>
- <span data-ttu-id="83a79-242">Ele invoca o *Deploy. cmd* arquivo para cada pacote, usando as opções apropriadas.</span><span class="sxs-lookup"><span data-stu-id="83a79-242">It invokes the *deploy.cmd* file for each package, using the appropriate switches.</span></span>

<span data-ttu-id="83a79-243">Assim como o **PublishDbPackages** destino, o **PublishWebPackages** destino usa o envio em lote de destino para garantir que o destino seja executado uma vez para cada pacote de web.</span><span class="sxs-lookup"><span data-stu-id="83a79-243">Just like the **PublishDbPackages** target, the **PublishWebPackages** target uses target batching to ensure that the target is executed once for each web package.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample13.xml)]


<span data-ttu-id="83a79-244">Dentro do destino, o **Exec** tarefa é usada para executar o *Deploy. cmd* arquivo para cada pacote da web.</span><span class="sxs-lookup"><span data-stu-id="83a79-244">Within the target, the **Exec** task is used to run the *deploy.cmd* file for each web package.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample14.xml)]


<span data-ttu-id="83a79-245">Para obter mais informações sobre como configurar a implantação de pacotes da web, consulte [compilação e empacotamento Web Application Projects](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="83a79-245">For more information on configuring the deployment of web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="83a79-246">Conclusão</span><span class="sxs-lookup"><span data-stu-id="83a79-246">Conclusion</span></span>

<span data-ttu-id="83a79-247">Este tópico forneceu um passo a passo de como os arquivos de projeto de divisão são usados para controlar o processo de compilação e implantação do início ao fim para a solução de exemplo do Gerenciador de contatos.</span><span class="sxs-lookup"><span data-stu-id="83a79-247">This topic provided a walkthrough of how split project files are used to control the build and deployment process from start to finish for the Contact Manager sample solution.</span></span> <span data-ttu-id="83a79-248">Usando essa abordagem permite que você execute complexas, implantações de grande porte em uma etapa única, repetível, executando um arquivo de comando específicas do ambiente.</span><span class="sxs-lookup"><span data-stu-id="83a79-248">Using this approach lets you run complex, enterprise-scale deployments in a single, repeatable step, simply by running an environment-specific command file.</span></span>

## <a name="further-reading"></a><span data-ttu-id="83a79-249">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="83a79-249">Further Reading</span></span>

<span data-ttu-id="83a79-250">Para obter uma introdução mais detalhada dos arquivos de projeto e o WPP, consulte [dentro do Microsoft Build Engine: usando MSBuild e o Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi e William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="83a79-250">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="83a79-251">[Anterior](understanding-the-project-file.md)
> [Próximo](building-and-packaging-web-application-projects.md)</span><span class="sxs-lookup"><span data-stu-id="83a79-251">[Previous](understanding-the-project-file.md)
[Next](building-and-packaging-web-application-projects.md)</span></span>
