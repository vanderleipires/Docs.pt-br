---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/single-sign-on
title: Logon único (Criando aplicativos de nuvem do mundo Real com o Azure) | Microsoft Docs
author: MikeWasson
description: Os aplicativos de nuvem construção Real World com o livro eletrônico do Azure baseia-se em uma apresentação desenvolvida por Scott Guthrie. Ele explica 13 padrões e práticas recomendadas que podem a ele...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 7d82d5e9-0619-4f22-9e03-32a6d52940a5
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/single-sign-on
msc.type: authoredcontent
ms.openlocfilehash: 22ef4c2908783e513bfb6fb63364e71378cb8719
ms.sourcegitcommit: 7b4e3936feacb1a8fcea7802aab3e2ea9c8af5b4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/04/2018
ms.locfileid: "48578426"
---
<a name="single-sign-on-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="e9091-104">O logon único (Criando aplicativos de nuvem do mundo Real com o Azure)</span><span class="sxs-lookup"><span data-stu-id="e9091-104">Single Sign-On (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="e9091-105">por [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e9091-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="e9091-106">[Download corrigi-lo Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) ou [Baixe o livro eletrônico](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="e9091-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="e9091-107">O **aos aplicativos de nuvem Real mundo de construção com o Azure** livro eletrônico se baseia em uma apresentação desenvolvida por Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="e9091-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="e9091-108">Ele explica 13 padrões e práticas recomendadas que podem ajudá-lo a ser bem-sucedido no desenvolvimento de aplicativos web para a nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="e9091-109">Para obter informações sobre o livro eletrônico, consulte [o primeiro capítulo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e9091-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="e9091-110">Há muitos problemas de segurança para pensar quando você estiver desenvolvendo um aplicativo de nuvem, mas para esta série nos concentraremos em apenas um: logon único.</span><span class="sxs-lookup"><span data-stu-id="e9091-110">There are many security issues to think about when you're developing a cloud app, but for this series we'll focus on just one: single sign-on.</span></span> <span data-ttu-id="e9091-111">Pessoas uma pergunta geralmente perguntam é: "Estou principalmente criando aplicativos para os funcionários da minha empresa; como hospedar esses aplicativos na nuvem e ainda permitir que eles usam o mesmo modelo de segurança que Meus funcionários conhecem e usam no ambiente local quando eles estão executando aplicativos que são hospedados dentro do firewall?"</span><span class="sxs-lookup"><span data-stu-id="e9091-111">A question people often ask is this: "I'm primarily building apps for the employees of my company; how do I host these apps in the cloud and still enable them to use the same security model that my employees know and use in the on-premises environment when they're running apps that are hosted inside the firewall?"</span></span> <span data-ttu-id="e9091-112">Uma das maneiras em que podemos habilitar esse cenário é chamada Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="e9091-112">One of the ways we enable this scenario is called Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="e9091-113">Azure AD permite que você disponibilizar enterprise linha de negócios (LOB) aplicativos pela Internet e permite que você disponibilizar esses aplicativos para parceiros de negócios também.</span><span class="sxs-lookup"><span data-stu-id="e9091-113">Azure AD enables you to make enterprise line-of-business (LOB) apps available over the Internet, and it enables you to make these apps available to business partners as well.</span></span>

## <a name="introduction-to-azure-ad"></a><span data-ttu-id="e9091-114">Introdução ao Azure AD</span><span class="sxs-lookup"><span data-stu-id="e9091-114">Introduction to Azure AD</span></span>

<span data-ttu-id="e9091-115">[Azure AD](https://docs.microsoft.com/azure/active-directory/) fornece [do Active Directory](https://msdn.microsoft.com/library/windows/desktop/aa746492.aspx) na nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-115">[Azure AD](https://docs.microsoft.com/azure/active-directory/) provides [Active Directory](https://msdn.microsoft.com/library/windows/desktop/aa746492.aspx) in the cloud.</span></span> <span data-ttu-id="e9091-116">Principais recursos incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e9091-116">Key features include the following:</span></span>

- <span data-ttu-id="e9091-117">Ele se integra com o Active Directory no local.</span><span class="sxs-lookup"><span data-stu-id="e9091-117">It integrates with on-premises Active Directory.</span></span>
- <span data-ttu-id="e9091-118">Ele habilita o logon único com seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="e9091-118">It enables single sign-on with your apps.</span></span>
- <span data-ttu-id="e9091-119">Ele dá suporte a padrões abertos, como [SAML](http://en.wikipedia.org/wiki/SAML_2.0), [WS-Fed](http://en.wikipedia.org/wiki/WS-Federation), e [OAuth 2.0](http://oauth.net/2/).</span><span class="sxs-lookup"><span data-stu-id="e9091-119">It supports open standards such as [SAML](http://en.wikipedia.org/wiki/SAML_2.0), [WS-Fed](http://en.wikipedia.org/wiki/WS-Federation), and [OAuth 2.0](http://oauth.net/2/).</span></span>
- <span data-ttu-id="e9091-120">Ele dá suporte ao Enterprise [Graph REST API](https://msdn.microsoft.com/library/hh974476.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9091-120">It supports Enterprise [Graph REST API](https://msdn.microsoft.com/library/hh974476.aspx).</span></span>

<span data-ttu-id="e9091-121">Suponha que você tenha um ambiente do Windows Server Active Directory local que você usa para permitir que os funcionários entrar aplicativos de Intranet:</span><span class="sxs-lookup"><span data-stu-id="e9091-121">Suppose you have an on-premises Windows Server Active Directory environment that you use to enable employees to sign on to Intranet apps:</span></span>

![](single-sign-on/_static/image1.png)

<span data-ttu-id="e9091-122">O que o AD do Azure permite fazer é criar um diretório na nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-122">What Azure AD enables you to do is create a directory in the cloud.</span></span> <span data-ttu-id="e9091-123">Ele é um recurso gratuito e fácil de configurar.</span><span class="sxs-lookup"><span data-stu-id="e9091-123">It's a free feature and easy to set up.</span></span>

<span data-ttu-id="e9091-124">Ele pode ser totalmente independente do seu local no Active Directory; Você pode colocar qualquer pessoa que você deseja nele e autenticá-los em aplicativos de Internet.</span><span class="sxs-lookup"><span data-stu-id="e9091-124">It can be entirely independent from your on-premises Active Directory; you can put anyone you want in it and authenticate them in Internet apps.</span></span>

![Windows Azure Active Directory](single-sign-on/_static/image2.png)

<span data-ttu-id="e9091-126">Ou você pode integrá-lo com suas instalações AD.</span><span class="sxs-lookup"><span data-stu-id="e9091-126">Or you can integrate it with your on-premises AD.</span></span>

![AD e a integração do WAAD](single-sign-on/_static/image3.png)

<span data-ttu-id="e9091-128">Agora todos os funcionários que podem se autenticar no local também podem autenticar pela Internet – sem ter que abrir um firewall ou implantar novos servidores no seu data center.</span><span class="sxs-lookup"><span data-stu-id="e9091-128">Now all the employees who can authenticate on-premises can also authenticate over the Internet – without you having to open up a firewall or deploy any new servers in your data center.</span></span> <span data-ttu-id="e9091-129">Você pode continuar a aproveitar todos os o ambiente existente do Active Directory que você conhece e usa hoje para fornecer seu logon único de aplicativos internos no recurso.</span><span class="sxs-lookup"><span data-stu-id="e9091-129">You can continue to leverage all the existing Active Directory environment that you know and use today to give your internal apps single-sign on capability.</span></span>

<span data-ttu-id="e9091-130">Depois que você fez essa conexão entre o AD e o Azure AD, você também pode habilitar seus aplicativos web e seus dispositivos móveis para autenticar os funcionários na nuvem e você pode permitir que aplicativos de terceiros, como aplicativos do Office 365, SalesForce.com ou do Google, para aceitar sua credenciais de funcionários.</span><span class="sxs-lookup"><span data-stu-id="e9091-130">Once you've made this connection between AD and Azure AD, you can also enable your web apps and your mobile devices to authenticate your employees in the cloud, and you can enable third-party apps, such as Office 365, SalesForce.com, or Google apps, to accept your employees' credentials.</span></span> <span data-ttu-id="e9091-131">Se você estiver usando o Office 365, você já configurá-lo com o Azure AD como o Office 365 usa o Azure AD para autenticação e autorização.</span><span class="sxs-lookup"><span data-stu-id="e9091-131">If you're using Office 365, you're already set up with Azure AD because Office 365 uses Azure AD for authentication and authorization.</span></span>

![3º aplicativos de terceiros](single-sign-on/_static/image4.png)

<span data-ttu-id="e9091-133">A vantagem dessa abordagem é que, sempre que sua organização adiciona ou exclui um usuário ou um usuário altera uma senha, use o mesmo processo que você usa atualmente no seu ambiente local.</span><span class="sxs-lookup"><span data-stu-id="e9091-133">The beauty of this approach is that any time your organization adds or deletes a user, or a user changes a password, you use the same process that you use today in your on-premises environment.</span></span> <span data-ttu-id="e9091-134">Todos os de suas instalações AD alterações são propagadas automaticamente para o ambiente de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-134">All of your on-premises AD changes are automatically propagated to the cloud environment.</span></span>

<span data-ttu-id="e9091-135">Se sua empresa está usando ou mover para o Office 365, a boa notícia é que você terá configurado automaticamente como Office 365 usa o Azure AD para autenticação de AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9091-135">If your company is using or moving to Office 365, the good news is that you'll have Azure AD set up automatically because Office 365 uses Azure AD for authentication.</span></span> <span data-ttu-id="e9091-136">Portanto, você pode facilmente usar em seus próprios aplicativos a mesma autenticação que usa o Office 365.</span><span class="sxs-lookup"><span data-stu-id="e9091-136">So you can easily use in your own apps the same authentication that Office 365 uses.</span></span>

## <a name="set-up-an-azure-ad-tenant"></a><span data-ttu-id="e9091-137">Configurar um locatário do AD do Azure</span><span class="sxs-lookup"><span data-stu-id="e9091-137">Set up an Azure AD tenant</span></span>

<span data-ttu-id="e9091-138">um diretório do AD do Azure é chamado de Azure AD [locatário](https://technet.microsoft.com/library/jj573650.aspx), e a configuração de um locatário é muito fácil.</span><span class="sxs-lookup"><span data-stu-id="e9091-138">an Azure AD directory is called an Azure AD [tenant](https://technet.microsoft.com/library/jj573650.aspx), and setting up a tenant is pretty easy.</span></span> <span data-ttu-id="e9091-139">Vamos mostrar como isso é feito no Portal de gerenciamento para ilustrar os conceitos, mas claro, como as outras funções de portal você pode também fazê-lo usando um script ou a API de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="e9091-139">We'll show you how it's done in the Azure Management Portal in order to illustrate the concepts, but of course like the other portal functions you can also do it by using a script or management API.</span></span>

<span data-ttu-id="e9091-140">No portal de gerenciamento, clique na guia do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e9091-140">In the management portal click the Active Directory tab.</span></span>

![WAAD no portal](single-sign-on/_static/image5.png)

<span data-ttu-id="e9091-142">Você tem um locatário do Azure AD automaticamente para sua conta do Azure, e você pode clicar o **adicionar** botão na parte inferior da página para criar diretórios adicionais.</span><span class="sxs-lookup"><span data-stu-id="e9091-142">You automatically have one Azure AD tenant for your Azure account, and you can click the **Add** button at the bottom of the page to create additional directories.</span></span> <span data-ttu-id="e9091-143">Talvez você queira um para um ambiente de teste e outro para produção, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="e9091-143">You might want one for a test environment and one for production, for example.</span></span> <span data-ttu-id="e9091-144">Pense cuidadosamente sobre o que você nomear um novo diretório.</span><span class="sxs-lookup"><span data-stu-id="e9091-144">Think carefully about what you name a new directory.</span></span> <span data-ttu-id="e9091-145">Se você usar seu nome para o diretório e, em seguida, você usa o nome novamente por um dos usuários, que pode ser confuso.</span><span class="sxs-lookup"><span data-stu-id="e9091-145">If you use your name for the directory and then you use your name again for one of the users, that can be confusing.</span></span>

![Adicionar diretório](single-sign-on/_static/image6.png)

<span data-ttu-id="e9091-147">O portal tem suporte completo para criar, excluir e gerenciar usuários nesse ambiente.</span><span class="sxs-lookup"><span data-stu-id="e9091-147">The portal has full support for creating, deleting, and managing users within this environment.</span></span> <span data-ttu-id="e9091-148">Por exemplo, para adicionar um usuário, vá para o **os usuários** guia e clique no **adicionar usuário** botão.</span><span class="sxs-lookup"><span data-stu-id="e9091-148">For example, to add a user go to the **Users** tab and click the **Add User** button.</span></span>

![Botão Adicionar usuário](single-sign-on/_static/image7.png)

![Adicionar caixa de diálogo usuário](single-sign-on/_static/image8.png)

<span data-ttu-id="e9091-151">Você pode criar um novo usuário que existe somente nesse diretório, ou você pode registrar uma Account da Microsoft como um usuário nesse diretório, ou o registro ou um usuário de outro diretório do AD do Azure como um usuário neste diretório.</span><span class="sxs-lookup"><span data-stu-id="e9091-151">You can create a new user who exists only in this directory, or you can register a Microsoft Account as a user in this directory, or register or a user from another Azure AD directory as a user in this directory.</span></span> <span data-ttu-id="e9091-152">(Em um diretório real, o domínio padrão seria ContosoTest.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="e9091-152">(In a real directory, the default domain would be ContosoTest.onmicrosoft.com.</span></span> <span data-ttu-id="e9091-153">Você também pode usar um domínio de sua escolha, como contoso.com.)</span><span class="sxs-lookup"><span data-stu-id="e9091-153">You can also use a domain of your own choosing, like contoso.com.)</span></span>

![Tipos de usuário](single-sign-on/_static/image9.png)

![Adicionar caixa de diálogo usuário](single-sign-on/_static/image10.png)

<span data-ttu-id="e9091-156">Você pode atribuir o usuário a uma função.</span><span class="sxs-lookup"><span data-stu-id="e9091-156">You can assign the user to a role.</span></span>

![Perfil de usuário](single-sign-on/_static/image11.png)

<span data-ttu-id="e9091-158">E a conta é criada com uma senha temporária.</span><span class="sxs-lookup"><span data-stu-id="e9091-158">And the account is created with a temporary password.</span></span>

![Senha temporária](single-sign-on/_static/image12.png)

<span data-ttu-id="e9091-160">Os usuários que você cria dessa forma imediatamente podem fazer logon em seus aplicativos web usando esse diretório na nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-160">The users you create this way can immediately log in to your web apps using this cloud directory.</span></span>

<span data-ttu-id="e9091-161">O que é ótimo de enterprise single sign-on, no entanto, é o **integração de diretórios** guia:</span><span class="sxs-lookup"><span data-stu-id="e9091-161">What's great for enterprise single sign-on, though, is the **Directory Integration** tab:</span></span>

![Guia de integração de diretório](single-sign-on/_static/image13.png)

<span data-ttu-id="e9091-163">Se você habilitar a integração de diretório, e [baixar uma ferramenta](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx), você pode sincronizar esse diretório na nuvem com seu existente no Active Directory local que você já estiver usando dentro da sua organização.</span><span class="sxs-lookup"><span data-stu-id="e9091-163">If you enable directory integration, and [download a tool](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx), you can sync this cloud directory with your existing on-premises Active Directory that you're already using inside your organization.</span></span> <span data-ttu-id="e9091-164">Em seguida, todos os usuários armazenados no seu diretório aparecerá nesse diretório de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-164">Then all of the users stored in your directory will show up in this cloud directory.</span></span> <span data-ttu-id="e9091-165">Seus aplicativos de nuvem agora podem se autenticar todos os seus funcionários usando suas credenciais existentes do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e9091-165">Your cloud apps can now authenticate all of your employees using their existing Active Directory credentials.</span></span> <span data-ttu-id="e9091-166">E tudo isso é gratuito – a ferramenta de sincronização e o Azure AD em si.</span><span class="sxs-lookup"><span data-stu-id="e9091-166">And all this is free – both the sync tool and Azure AD itself.</span></span>

<span data-ttu-id="e9091-167">A ferramenta é um assistente que é fácil de usar, como você pode ver nessas capturas de tela.</span><span class="sxs-lookup"><span data-stu-id="e9091-167">The tool is a wizard that is easy to use, as you can see from these screen shots.</span></span> <span data-ttu-id="e9091-168">Esses não são instruções completas, apenas um exemplo que mostra o processo básico.</span><span class="sxs-lookup"><span data-stu-id="e9091-168">These are not complete instructions, just an example showing you the basic process.</span></span> <span data-ttu-id="e9091-169">Para obter mais informações de how-to--it, consulte os links a [recursos](#resources) seção no final deste capítulo.</span><span class="sxs-lookup"><span data-stu-id="e9091-169">For more detailed how-to-do-it information, see the links in the [Resources](#resources) section at the end of the chapter.</span></span>

![Assistente de configuração de ferramenta de sincronização de WAAD](single-sign-on/_static/image14.png)

<span data-ttu-id="e9091-171">Clique em **próxima**e, em seguida, insira suas credenciais do Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9091-171">Click **Next**, and then enter your Azure Active Directory credentials.</span></span>

![Assistente de configuração de ferramenta de sincronização de WAAD](single-sign-on/_static/image15.png)

<span data-ttu-id="e9091-173">Clique em **próxima**e, em seguida, insira seu local as credenciais do AD.</span><span class="sxs-lookup"><span data-stu-id="e9091-173">Click **Next**, and then enter your on-premises AD credentials.</span></span>

![Assistente de configuração de ferramenta de sincronização de WAAD](single-sign-on/_static/image16.png)

<span data-ttu-id="e9091-175">Clique em **próxima**e, em seguida, indique se deseja armazenar um hash de suas senhas do AD na nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-175">Click **Next**, and then indicate if you want to store a hash of your AD passwords in the cloud.</span></span>

![Assistente de configuração de ferramenta de sincronização de WAAD](single-sign-on/_static/image17.png)

<span data-ttu-id="e9091-177">O hash de senha que você pode armazenar na nuvem é um hash unidirecional; as senhas reais nunca são armazenadas no AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9091-177">The password hash that you can store in the cloud is a one-way hash; actual passwords are never stored in Azure AD.</span></span> <span data-ttu-id="e9091-178">Se você decidir não armazenar hashes na nuvem, você terá que usar [serviços de Federação do Active Directory](https://technet.microsoft.com/library/hh831502.aspx) (ADFS).</span><span class="sxs-lookup"><span data-stu-id="e9091-178">If you decide against storing hashes in the cloud, you'll have to use [Active Directory Federation Services](https://technet.microsoft.com/library/hh831502.aspx) (ADFS).</span></span> <span data-ttu-id="e9091-179">Também há [outros fatores a serem considerados ao escolher se deseja ou não usar o ADFS](https://technet.microsoft.com/library/jj573653.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9091-179">There are also [other factors to consider when choosing whether or not to use ADFS](https://technet.microsoft.com/library/jj573653.aspx).</span></span> <span data-ttu-id="e9091-180">A opção de ADFS exige algumas etapas de configuração adicional.</span><span class="sxs-lookup"><span data-stu-id="e9091-180">The ADFS option requires a few additional configuration steps.</span></span>

<span data-ttu-id="e9091-181">Se você optar por armazenar hashes na nuvem, você terminou e a ferramenta inicia a sincronização de diretórios quando você clica **próxima**.</span><span class="sxs-lookup"><span data-stu-id="e9091-181">If you choose to store hashes in the cloud, you're done, and the tool starts synchronizing directories when you click **Next**.</span></span>

![Assistente de configuração de ferramenta de sincronização de WAAD](single-sign-on/_static/image18.png)

<span data-ttu-id="e9091-183">E, em alguns minutos você está pronto.</span><span class="sxs-lookup"><span data-stu-id="e9091-183">And in a few minutes you're done.</span></span>

![Assistente de configuração de ferramenta de sincronização de WAAD](single-sign-on/_static/image19.png)

<span data-ttu-id="e9091-185">Você só precisa executar isso em um controlador de domínio da organização, no Windows 2003 ou superior.</span><span class="sxs-lookup"><span data-stu-id="e9091-185">You only have to run this on one domain controller in the organization, on Windows 2003 or higher.</span></span> <span data-ttu-id="e9091-186">E não há necessidade de reiniciar.</span><span class="sxs-lookup"><span data-stu-id="e9091-186">And no need to reboot.</span></span> <span data-ttu-id="e9091-187">Quando você terminar, todos os seus usuários estão na nuvem e você pode fazer o logon único de qualquer aplicativo web ou móvel, usando SAML, OAuth ou WS-Fed.</span><span class="sxs-lookup"><span data-stu-id="e9091-187">When you're done, all of your users are in the cloud and you can do single sign-on from any web or mobile application, using SAML, OAuth, or WS-Fed.</span></span>

<span data-ttu-id="e9091-188">Às vezes, nos fazemos essa pergunta sobre como proteger, isso é – Microsoft usá-lo para seus próprios dados corporativos confidenciais?</span><span class="sxs-lookup"><span data-stu-id="e9091-188">Sometimes we get asked about how secure this is – does Microsoft use it for their own sensitive business data?</span></span> <span data-ttu-id="e9091-189">E a resposta for Sim, que podemos fazer.</span><span class="sxs-lookup"><span data-stu-id="e9091-189">And the answer is yes we do.</span></span> <span data-ttu-id="e9091-190">Por exemplo, se você for para o site do Microsoft SharePoint interno no [ https://microsoft.sharepoint.com/ ](https://microsoft.sharepoint.com/), obter ser solicitado a fazer logon.</span><span class="sxs-lookup"><span data-stu-id="e9091-190">For example, if you go to the internal Microsoft SharePoint site at [https://microsoft.sharepoint.com/](https://microsoft.sharepoint.com/), you get prompted to log in.</span></span>

![Entrar no Office 365](single-sign-on/_static/image20.png)

<span data-ttu-id="e9091-192">Microsoft tiver habilitado o ADFS, portanto, quando você insere uma ID da Microsoft, será redirecionado para uma página de logon do ADFS.</span><span class="sxs-lookup"><span data-stu-id="e9091-192">Microsoft has enabled ADFS, so when you enter a Microsoft ID, you get redirected to an ADFS log-in page.</span></span>

![Entrada do AD FS](single-sign-on/_static/image21.png)

<span data-ttu-id="e9091-194">E, depois que você insira as credenciais armazenadas em uma conta interna do Microsoft AD, você tem acesso a esse aplicativo interno.</span><span class="sxs-lookup"><span data-stu-id="e9091-194">And once you enter credentials stored in an internal Microsoft AD account, you have access to this internal application.</span></span>

![Site do SharePoint do MS](single-sign-on/_static/image22.png)

<span data-ttu-id="e9091-196">Estamos usando um servidor de entrada do AD principalmente porque já tínhamos ADFS configurar antes do AD do Azure se tornou disponível, mas o processo de log é feito por meio de um diretório do AD do Azure na nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-196">We're using an AD sign-in server mainly because we already had ADFS set up before Azure AD became available, but the log-in process is going through an Azure AD directory in the cloud.</span></span> <span data-ttu-id="e9091-197">Podemos colocar nossos documentos importantes, controle do código-fonte, arquivos de gerenciamento de desempenho, relatórios de vendas e obter mais informações, na nuvem e estiver usando essa mesma solução exata para protegê-los.</span><span class="sxs-lookup"><span data-stu-id="e9091-197">We put our important documents, source control, performance management files, sales reports, and more, in the cloud and are using this exact same solution to secure them.</span></span>

## <a name="create-an-aspnet-app-that-uses-azure-ad-for-single-sign-on"></a><span data-ttu-id="e9091-198">Criar um aplicativo ASP.NET que usa o Azure AD para logon único</span><span class="sxs-lookup"><span data-stu-id="e9091-198">Create an ASP.NET app that uses Azure AD for single sign-on</span></span>

<span data-ttu-id="e9091-199">Visual Studio torna muito fácil criar um aplicativo que usa o Azure AD para logon único, como você pode ver no algumas capturas de tela.</span><span class="sxs-lookup"><span data-stu-id="e9091-199">Visual Studio makes it really easy to create an app that uses Azure AD for single sign-on, as you can see from a few screen shots.</span></span>

<span data-ttu-id="e9091-200">Quando você cria um novo aplicativo ASP.NET, MVC ou Web Forms, o método de autenticação padrão é a identidade do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e9091-200">When you create a new ASP.NET application, either MVC or Web Forms, the default authentication method is ASP.NET Identity.</span></span> <span data-ttu-id="e9091-201">Para alterar isso para o Azure AD, você clica em um **alterar autenticação** botão.</span><span class="sxs-lookup"><span data-stu-id="e9091-201">To change that to Azure AD, you click a **Change Authentication** button.</span></span>

![Alterar autenticação](single-sign-on/_static/image23.png)

<span data-ttu-id="e9091-203">Selecione as contas organizacionais, insira seu nome de domínio e, em seguida, selecione o logon único.</span><span class="sxs-lookup"><span data-stu-id="e9091-203">Select Organizational Accounts, enter your domain name, and then select Single Sign On.</span></span>

![Configurar a caixa de diálogo de autenticação](single-sign-on/_static/image24.png)

<span data-ttu-id="e9091-205">Você pode também fornecer o aplicativo de leitura ou leitura/gravação permissão para dados do diretório.</span><span class="sxs-lookup"><span data-stu-id="e9091-205">You can also give the app read or read/write permission for directory data.</span></span> <span data-ttu-id="e9091-206">Se você fizer isso, ele pode usar o [do Azure Graph REST API](https://msdn.microsoft.com/library/windowsazure/hh974476.aspx) para consultar o número de telefone dos usuários, descubra se estiverem no escritório, quando o último logon ativa, etc.</span><span class="sxs-lookup"><span data-stu-id="e9091-206">If you do that, it can use the [Azure Graph REST API](https://msdn.microsoft.com/library/windowsazure/hh974476.aspx) to look up users' phone number, find out if they're in the office, when they last logged on, etc.</span></span>

<span data-ttu-id="e9091-207">Isso é tudo o que você precisa fazer - Visual Studio solicitará as credenciais de um administrador para seu locatário do Azure AD e, em seguida, ele configura seu projeto e o locatário do Azure AD para o novo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e9091-207">That's all you have to do - Visual Studio asks for the credentials for an administrator for your Azure AD tenant, and then it configures both your project and your Azure AD tenant for the new application.</span></span>

<span data-ttu-id="e9091-208">Quando você executa o projeto, você verá uma página de entrada, e você pode entrar com credenciais de um usuário no diretório do AD do Azure.</span><span class="sxs-lookup"><span data-stu-id="e9091-208">When you run the project, you'll see a sign-in page, and you can sign in with credentials of a user in your Azure AD directory.</span></span>

![Entrada na organização conta](single-sign-on/_static/image25.png)

![Conectado](single-sign-on/_static/image26.png)

<span data-ttu-id="e9091-211">Quando você implanta o aplicativo no Azure, tudo o que você precisa fazer é selecionar um **habilitar autenticação organizacional** caixa de seleção e, mais uma vez o Visual Studio cuida de toda a configuração para você.</span><span class="sxs-lookup"><span data-stu-id="e9091-211">When you deploy the app to Azure, all you have to do is select an **Enable Organizational Authentication** check box, and once again Visual Studio takes care of all the configuration for you.</span></span>

![Publicar na Web](single-sign-on/_static/image27.png)

<span data-ttu-id="e9091-213">Essas capturas de tela vêm de um tutorial passo a passo completo que mostra como criar um aplicativo que usa a autenticação do AD do Azure: [desenvolvimento de aplicativos ASP.NET com o Azure Active Directory](../../../../identity/overview/getting-started/developing-aspnet-apps-with-windows-azure-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="e9091-213">These screen shots come from a complete step-by-step tutorial that shows how to build an app that uses Azure AD authentication: [Developing ASP.NET Apps with Azure Active Directory](../../../../identity/overview/getting-started/developing-aspnet-apps-with-windows-azure-active-directory.md).</span></span>

## <a name="summary"></a><span data-ttu-id="e9091-214">Resumo</span><span class="sxs-lookup"><span data-stu-id="e9091-214">Summary</span></span>

<span data-ttu-id="e9091-215">Neste capítulo, você viu que Azure Active Directory, o Visual Studio e o ASP.NET, torná-lo fácil de configurar o logon único em aplicativos da Internet para os usuários da organização.</span><span class="sxs-lookup"><span data-stu-id="e9091-215">In this chapter you saw that Azure Active Directory, Visual Studio, and ASP.NET, make it easy to set up single sign-on in Internet applications for your organization's users.</span></span> <span data-ttu-id="e9091-216">Os usuários podem entrar aplicativos de Internet usando as mesmas credenciais que eles usam para fazer logon usando o Active Directory na sua rede interna.</span><span class="sxs-lookup"><span data-stu-id="e9091-216">Your users can sign on in Internet apps using the same credentials they use to sign on using Active Directory in your internal network.</span></span>

<span data-ttu-id="e9091-217">O [próximo capítulo](data-storage-options.md) examina as opções de armazenamento de dados disponíveis para um aplicativo de nuvem.</span><span class="sxs-lookup"><span data-stu-id="e9091-217">The [next chapter](data-storage-options.md) looks at the data storage options available for a cloud app.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="e9091-218">Recursos</span><span class="sxs-lookup"><span data-stu-id="e9091-218">Resources</span></span>

<span data-ttu-id="e9091-219">Para obter mais informações, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="e9091-219">For more information, see the following resources:</span></span>

- <span data-ttu-id="e9091-220">[Documentação do Azure Active Directory](https://docs.microsoft.com/azure/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="e9091-220">[Azure Active Directory Documentation](https://docs.microsoft.com/azure/active-directory/).</span></span> <span data-ttu-id="e9091-221">Página do portal de documentação do AD do Azure no site windowsazure.com.</span><span class="sxs-lookup"><span data-stu-id="e9091-221">Portal page for Azure AD documentation on the windowsazure.com site.</span></span> <span data-ttu-id="e9091-222">Para obter tutoriais passo a passo, consulte o **desenvolver** seção.</span><span class="sxs-lookup"><span data-stu-id="e9091-222">For step by step tutorials, see the **Develop** section.</span></span>
- <span data-ttu-id="e9091-223">[Autenticação multifator do Azure](https://docs.microsoft.com/azure/multi-factor-authentication/).</span><span class="sxs-lookup"><span data-stu-id="e9091-223">[Azure Multi-Factor Authentication](https://docs.microsoft.com/azure/multi-factor-authentication/).</span></span> <span data-ttu-id="e9091-224">Página do portal para obter a documentação sobre a autenticação multifator no Azure.</span><span class="sxs-lookup"><span data-stu-id="e9091-224">Portal page for documentation about multi-factor authentication in Azure.</span></span>
- <span data-ttu-id="e9091-225">[Opções de autenticação de conta organizacional](../../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauthoptions).</span><span class="sxs-lookup"><span data-stu-id="e9091-225">[Organizational account authentication options](../../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauthoptions).</span></span> <span data-ttu-id="e9091-226">Explicação das opções de autenticação do Azure AD na caixa de diálogo de novo projeto do Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="e9091-226">Explanation of the Azure AD authentication options in the Visual Studio 2013 new-project dialog.</span></span>
- <span data-ttu-id="e9091-227">[Microsoft Patterns and Practices - Federated padrão de identidade](https://msdn.microsoft.com/library/dn589790.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9091-227">[Microsoft Patterns and Practices - Federated Identity Pattern](https://msdn.microsoft.com/library/dn589790.aspx).</span></span>
- <span data-ttu-id="e9091-228">[Como: Instalar a ferramenta de sincronização do Azure Active Directory](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9091-228">[HowTo: Install the Azure Active Directory Sync Tool](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx).</span></span>
- <span data-ttu-id="e9091-229">[Active Directory Federation Services 2.0 mapa de conteúdo](https://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx).</span><span class="sxs-lookup"><span data-stu-id="e9091-229">[Active Directory Federation Services 2.0 Content Map](https://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx).</span></span> <span data-ttu-id="e9091-230">Links para documentação sobre ADFS 2.0.</span><span class="sxs-lookup"><span data-stu-id="e9091-230">Links to documentation about ADFS 2.0.</span></span>
- <span data-ttu-id="e9091-231">[Autorização baseada em função e baseada em ACL em um aplicativo do Windows Azure AD](https://code.msdn.microsoft.com/Role-Based-and-ACL-Based-86ad71a1).</span><span class="sxs-lookup"><span data-stu-id="e9091-231">[Role-Based and ACL-Based Authorization in a Windows Azure AD Application](https://code.msdn.microsoft.com/Role-Based-and-ACL-Based-86ad71a1).</span></span> <span data-ttu-id="e9091-232">Aplicativo de exemplo.</span><span class="sxs-lookup"><span data-stu-id="e9091-232">Sample application.</span></span>
- <span data-ttu-id="e9091-233">[Blog de API do Graph do Active Directory do Azure](https://blogs.msdn.com/b/aadgraphteam/).</span><span class="sxs-lookup"><span data-stu-id="e9091-233">[Azure Active Directory Graph API blog](https://blogs.msdn.com/b/aadgraphteam/).</span></span>
- <span data-ttu-id="e9091-234">[Controle de acesso no BYOD e integração de diretórios em uma infraestrutura de identidade híbrida](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/PCIT-B213#fbid=).</span><span class="sxs-lookup"><span data-stu-id="e9091-234">[Access Control in BYOD and Directory Integration in a Hybrid Identity Infrastructure](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/PCIT-B213#fbid=).</span></span> <span data-ttu-id="e9091-235">Tech Ed 2014 sessão vídeo por Gayana Bagdasaryan.</span><span class="sxs-lookup"><span data-stu-id="e9091-235">Tech Ed 2014 session video by Gayana Bagdasaryan.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e9091-236">[Anterior](web-development-best-practices.md)
> [Próximo](data-storage-options.md)</span><span class="sxs-lookup"><span data-stu-id="e9091-236">[Previous](web-development-best-practices.md)
[Next](data-storage-options.md)</span></span>
