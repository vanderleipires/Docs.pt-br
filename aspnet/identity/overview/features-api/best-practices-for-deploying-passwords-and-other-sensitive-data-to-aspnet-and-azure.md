---
uid: identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
title: Práticas recomendadas para implantar senhas e outros dados confidenciais no ASP.NET e o serviço de aplicativo do Azure | Microsoft Docs
author: Rick-Anderson
description: Este tutorial mostra como o seu código com segurança pode armazenar e acessar informações seguras. O ponto mais importante é que você nunca deve armazenar senhas ou outros sen...
ms.author: aspnetcontent
ms.date: 05/21/2015
ms.assetid: 97902c66-cb61-4d11-be52-73f962f2db0a
msc.legacyurl: /identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
msc.type: authoredcontent
ms.openlocfilehash: 445e7c32baf4316273b0a5901a776684a6c5d73f
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/05/2018
ms.locfileid: "37832449"
---
<a name="best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure-app-service"></a><span data-ttu-id="4afdd-104">Práticas recomendadas para implantar senhas e outros dados confidenciais no ASP.NET e o serviço de aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="4afdd-104">Best practices for deploying passwords and other sensitive data to ASP.NET and Azure App Service</span></span>
====================
<span data-ttu-id="4afdd-105">por [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="4afdd-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="4afdd-106">Este tutorial mostra como o seu código com segurança pode armazenar e acessar informações seguras.</span><span class="sxs-lookup"><span data-stu-id="4afdd-106">This tutorial shows how your code can securely store and access secure information.</span></span> <span data-ttu-id="4afdd-107">O ponto mais importante é que você nunca deve armazenar senhas ou outros dados confidenciais no código-fonte, e você não deve usar os segredos de produção no modo de desenvolvimento e teste.</span><span class="sxs-lookup"><span data-stu-id="4afdd-107">The most important point is you should never store passwords or other sensitive data in source code, and you shouldn't use production secrets in development and test mode.</span></span>
> 
> <span data-ttu-id="4afdd-108">O código de exemplo é um aplicativo de console simples do trabalho Web e um aplicativo ASP.NET MVC que precisa acessar um banco de dados conexão cadeia de caracteres senha, Twilio, Google e SendGrid as chaves seguras.</span><span class="sxs-lookup"><span data-stu-id="4afdd-108">The sample code is a simple WebJob console app and a ASP.NET MVC app that needs access to a database connection string password, Twilio, Google and SendGrid secure keys.</span></span>
> 
> <span data-ttu-id="4afdd-109">No local configurações e o PHP também é mencionado.</span><span class="sxs-lookup"><span data-stu-id="4afdd-109">On premise settings and PHP is also mentioned.</span></span>


- [<span data-ttu-id="4afdd-110">Trabalhando com senhas no ambiente de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="4afdd-110">Working with passwords in the development environment</span></span>](#pwd)
- [<span data-ttu-id="4afdd-111">Trabalhando com cadeias de caracteres de conexão no ambiente de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="4afdd-111">Working with connection strings in the development environment</span></span>](#con)
- [<span data-ttu-id="4afdd-112">Aplicativos de console do WebJobs</span><span class="sxs-lookup"><span data-stu-id="4afdd-112">WebJobs console apps</span></span>](#wj)
- [<span data-ttu-id="4afdd-113">Implantação de segredos no Azure</span><span class="sxs-lookup"><span data-stu-id="4afdd-113">Deploying secrets to Azure</span></span>](#da)
- [<span data-ttu-id="4afdd-114">Notas para o local e o PHP</span><span class="sxs-lookup"><span data-stu-id="4afdd-114">Notes for On-Premise and PHP</span></span>](#not)
- [<span data-ttu-id="4afdd-115">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="4afdd-115">Additional Resources</span></span>](#addRes)

<a id="pwd"></a>
## <a name="working-with-passwords-in-the-development-environment"></a><span data-ttu-id="4afdd-116">Trabalhando com senhas no ambiente de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="4afdd-116">Working with passwords in the development environment</span></span>

<span data-ttu-id="4afdd-117">Os tutoriais frequentemente mostram dados confidenciais no código-fonte, espera-se com uma limitação que você nunca deve armazenar dados confidenciais no código-fonte.</span><span class="sxs-lookup"><span data-stu-id="4afdd-117">Tutorials frequently show sensitive data in source code, hopefully with a caveat that you should never store sensitive data in source code.</span></span> <span data-ttu-id="4afdd-118">Por exemplo, minha [aplicativo ASP.NET MVC 5 com SMS e email 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) tutorial mostra o seguinte na *Web. config* arquivo:</span><span class="sxs-lookup"><span data-stu-id="4afdd-118">For example, my [ASP.NET MVC 5 app with SMS and email 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) tutorial shows the following in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample1.xml)]

<span data-ttu-id="4afdd-119">O *Web. config* arquivo é o código-fonte, para que esses segredos nunca devem ser armazenados nesse arquivo.</span><span class="sxs-lookup"><span data-stu-id="4afdd-119">The *web.config* file is source code, so these secrets should never be stored in that file.</span></span> <span data-ttu-id="4afdd-120">Felizmente, o `<appSettings>` elemento tem um `file` atributo que permite que você especifique um arquivo externo que contém definições de configuração de aplicativo confidenciais.</span><span class="sxs-lookup"><span data-stu-id="4afdd-120">Fortunately, the `<appSettings>` element has a `file` attribute that allows you to specify an external file that contains sensitive app config settings.</span></span> <span data-ttu-id="4afdd-121">Você pode mover todos os seus segredos para um arquivo externo, desde que o arquivo externo não é verificado em sua árvore de origem.</span><span class="sxs-lookup"><span data-stu-id="4afdd-121">You can move all your secrets to an external file as long as the external file is not checked into your source tree.</span></span> <span data-ttu-id="4afdd-122">Por exemplo, na marcação a seguir, o arquivo *AppSettingsSecrets.config* contém todos os segredos de aplicativo:</span><span class="sxs-lookup"><span data-stu-id="4afdd-122">For example, in the following markup, the file *AppSettingsSecrets.config* contains all the app secrets:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample2.xml)]

<span data-ttu-id="4afdd-123">A marcação no arquivo externo (*AppSettingsSecrets.config* neste exemplo), é a mesma marcação encontrada na *Web. config* arquivo:</span><span class="sxs-lookup"><span data-stu-id="4afdd-123">The markup in the external file (*AppSettingsSecrets.config* in this sample), is the same markup found in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample3.xml)]

<span data-ttu-id="4afdd-124">O tempo de execução do ASP.NET mescla o conteúdo do arquivo externo com a marcação na &lt;appSettings&gt; elemento.</span><span class="sxs-lookup"><span data-stu-id="4afdd-124">The ASP.NET runtime merges the contents of the external file with the markup in &lt;appSettings&gt; element.</span></span> <span data-ttu-id="4afdd-125">O tempo de execução ignora o atributo de arquivo se o arquivo especificado não pode ser encontrado.</span><span class="sxs-lookup"><span data-stu-id="4afdd-125">The runtime ignores the file attribute if the specified file cannot be found.</span></span>

> [!WARNING]
> <span data-ttu-id="4afdd-126">Security - não adicione suas *. config de segredos* arquivo ao seu projeto ou verificá-lo no controle de origem.</span><span class="sxs-lookup"><span data-stu-id="4afdd-126">Security - Do not add your *secrets .config* file to your project or check it into source control.</span></span> <span data-ttu-id="4afdd-127">Por padrão, o Visual Studio define o `Build Action` para `Content`, que significa que o arquivo é implantado.</span><span class="sxs-lookup"><span data-stu-id="4afdd-127">By default, Visual Studio sets the `Build Action` to `Content`, which means the file is deployed.</span></span> <span data-ttu-id="4afdd-128">Para obter mais informações, consulte [por que não todos os arquivos na pasta Meu projeto são implantados?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span><span class="sxs-lookup"><span data-stu-id="4afdd-128">For more information see [Why don't all of the files in my project folder get deployed?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span></span> <span data-ttu-id="4afdd-129">Embora você possa usar qualquer extensão para o *. config de segredos* arquivo, é melhor para mantê-lo *. config*, como arquivos de configuração não são realizados pelo IIS.</span><span class="sxs-lookup"><span data-stu-id="4afdd-129">Although you can use any extension for the *secrets .config* file, it's best to keep it *.config*, as config files are not served by IIS.</span></span> <span data-ttu-id="4afdd-130">Observe também que o *AppSettingsSecrets.config* arquivo é de dois níveis de diretório acima da *Web. config* arquivo, para que ele está completamente fora do diretório da solução.</span><span class="sxs-lookup"><span data-stu-id="4afdd-130">Notice also that the *AppSettingsSecrets.config* file is two directory levels up from the *web.config* file, so it's completely out of the solution directory.</span></span> <span data-ttu-id="4afdd-131">Movendo o arquivo fora do diretório da solução, &quot;adicionar git \* &quot; não adicioná-lo ao seu repositório.</span><span class="sxs-lookup"><span data-stu-id="4afdd-131">By moving the file out of the solution directory, &quot;git add \*&quot; won't add it to your repository.</span></span>


<a id="con"></a>
## <a name="working-with-connection-strings-in-the-development-environment"></a><span data-ttu-id="4afdd-132">Trabalhando com cadeias de caracteres de conexão no ambiente de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="4afdd-132">Working with connection strings in the development environment</span></span>

<span data-ttu-id="4afdd-133">O Visual Studio cria novos projetos do ASP.NET que usam [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span><span class="sxs-lookup"><span data-stu-id="4afdd-133">Visual Studio creates new ASP.NET projects that use [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span></span> <span data-ttu-id="4afdd-134">LocalDB foi criado especificamente para o ambiente de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="4afdd-134">LocalDB was created specifically for the development environment.</span></span> <span data-ttu-id="4afdd-135">Ele não requer uma senha, portanto você não precisa fazer nada para impedir que os segredos que está sendo verificado em seu código-fonte.</span><span class="sxs-lookup"><span data-stu-id="4afdd-135">It doesn't require a password, therefore you don't need to do anything to prevent secrets from being checked into your source code.</span></span> <span data-ttu-id="4afdd-136">Algumas equipes de desenvolvimento usam as versões completas do SQL Server (ou outro DBMS) que exigem uma senha.</span><span class="sxs-lookup"><span data-stu-id="4afdd-136">Some development teams use the full versions of SQL Server (or other DBMS) that require a password.</span></span>

<span data-ttu-id="4afdd-137">Você pode usar o `configSource` atributo para substituir todo o `<connectionStrings>` marcação.</span><span class="sxs-lookup"><span data-stu-id="4afdd-137">You can use the `configSource` attribute to replace the entire `<connectionStrings>` markup.</span></span> <span data-ttu-id="4afdd-138">Ao contrário do `<appSettings>` `file` atributo que mescla a marcação, o `configSource` atributo substitui a marcação.</span><span class="sxs-lookup"><span data-stu-id="4afdd-138">Unlike the `<appSettings>` `file` attribute that merges the markup, the `configSource` attribute replaces the markup.</span></span> <span data-ttu-id="4afdd-139">A marcação a seguir mostra a `configSource` atributo o *Web. config* arquivo:</span><span class="sxs-lookup"><span data-stu-id="4afdd-139">The following markup shows the `configSource` attribute in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample4.xml?highlight=1)]

> [!NOTE]
> <span data-ttu-id="4afdd-140">Se você usar o `configSource` atributo conforme mostrado acima para mover suas cadeias de caracteres de conexão para um arquivo externo e tiver o Visual Studio a criar um novo site, ele não será capaz de detectar você estiver usando um banco de dados, e você não terá a opção de configurar o banco de dados quando você pu Publicar no Azure do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4afdd-140">If you use the `configSource` attribute as shown above to move your connection strings to an external file, and have Visual Studio create a new web site, it won't be able to detect you are using a database, and you won't get the option of configuring the database when you publish to Azure from Visual Studio.</span></span> <span data-ttu-id="4afdd-141">Se você estiver usando o `configSource` atributo, você pode usar o PowerShell para criar e implantar seu site da web e banco de dados, ou você pode criar o site da web e o banco de dados no portal antes de publicar.</span><span class="sxs-lookup"><span data-stu-id="4afdd-141">If you are using the `configSource` attribute, you can use PowerShell to create and deploy your web site and database, or you can create the web site and the database in the portal before you publish.</span></span> <span data-ttu-id="4afdd-142">O [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script criará um novo site da web e o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="4afdd-142">The [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script will create a new web site and database.</span></span>


> [!WARNING]
> <span data-ttu-id="4afdd-143">Segurança – ao contrário o *AppSettingsSecrets.config* arquivo, o arquivo de cadeias de caracteres de conexão externa deve estar no mesmo diretório raiz *Web. config* arquivo, portanto, você precisará tomar precauções para garantir que você não verificá-lo no seu repositório de origem.</span><span class="sxs-lookup"><span data-stu-id="4afdd-143">Security - Unlike the *AppSettingsSecrets.config* file, the external connection strings file must be in the same directory as the root *web.config* file, so you'll have to take precautions to ensure you don't check it into your source repository.</span></span>


> [!NOTE]
> <span data-ttu-id="4afdd-144">**Aviso de segurança no arquivo de segredos:** uma prática recomendada é não usar segredos de produção em desenvolvimento e teste.</span><span class="sxs-lookup"><span data-stu-id="4afdd-144">**Security Warning on secrets file:** A best practice is to not use production secrets in test and development.</span></span> <span data-ttu-id="4afdd-145">Uso de senhas de produção em teste ou desenvolvimento vazamentos desses segredos.</span><span class="sxs-lookup"><span data-stu-id="4afdd-145">Using production passwords in test or development leaks those secrets.</span></span>


<a id="wj"></a>
## <a name="webjobs-console-apps"></a><span data-ttu-id="4afdd-146">Aplicativos de console do WebJobs</span><span class="sxs-lookup"><span data-stu-id="4afdd-146">WebJobs console apps</span></span>

<span data-ttu-id="4afdd-147">O *App. config* arquivo usado por um aplicativo de console não dá suporte a caminhos relativos, mas oferece suporte a caminhos absolutos.</span><span class="sxs-lookup"><span data-stu-id="4afdd-147">The *app.config* file used by a console app doesn't support relative paths, but it does support absolute paths.</span></span> <span data-ttu-id="4afdd-148">Você pode usar um caminho absoluto para mover seus segredos fora do diretório do projeto.</span><span class="sxs-lookup"><span data-stu-id="4afdd-148">You can use an absolute path to move your secrets out of your project directory.</span></span> <span data-ttu-id="4afdd-149">A marcação a seguir mostra os segredos na *C:\secrets\AppSettingsSecrets.config* arquivo e dados não confidenciais na *App. config* arquivo.</span><span class="sxs-lookup"><span data-stu-id="4afdd-149">The following markup shows the secrets in the *C:\secrets\AppSettingsSecrets.config* file, and non sensitive data in the *app.config* file.</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample5.xml?highlight=2)]

<a id="da"></a>
## <a name="deploying-secrets-to-azure"></a><span data-ttu-id="4afdd-150">Implantação de segredos no Azure</span><span class="sxs-lookup"><span data-stu-id="4afdd-150">Deploying secrets to Azure</span></span>

<span data-ttu-id="4afdd-151">Quando você implanta seu aplicativo web do Azure, o *AppSettingsSecrets.config* arquivo não será implantado (ou seja, o que você deseja).</span><span class="sxs-lookup"><span data-stu-id="4afdd-151">When you deploy your web app to Azure, the *AppSettingsSecrets.config* file won't be deployed (that's what you want).</span></span> <span data-ttu-id="4afdd-152">Você pode ir para o [Portal de gerenciamento](https://azure.microsoft.com/services/management-portal/) e defini-los manualmente, para fazer isso:</span><span class="sxs-lookup"><span data-stu-id="4afdd-152">You could go to the [Azure Management Portal](https://azure.microsoft.com/services/management-portal/) and set them manually, to do that:</span></span>

1. <span data-ttu-id="4afdd-153">Vá para [ https://portal.azure.com ](https://portal.azure.com)e entre com suas credenciais do Azure.</span><span class="sxs-lookup"><span data-stu-id="4afdd-153">Go to [https://portal.azure.com](https://portal.azure.com), and sign in with your Azure credentials.</span></span>
2. <span data-ttu-id="4afdd-154">Clique em **navegue &gt; aplicativos Web**, em seguida, clique no nome do seu aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="4afdd-154">Click **Browse &gt; Web Apps**, then click the name of your web app.</span></span>
3. <span data-ttu-id="4afdd-155">Clique em **todas as configurações &gt; configurações do aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="4afdd-155">Click **All settings &gt; Application settings**.</span></span>

<span data-ttu-id="4afdd-156">O **configurações do aplicativo** e **cadeia de caracteres de conexão** valores substituem as mesmas configurações no *Web. config* arquivo.</span><span class="sxs-lookup"><span data-stu-id="4afdd-156">The **app settings** and **connection string** values override the same settings in the *web.config* file.</span></span> <span data-ttu-id="4afdd-157">Em nosso exemplo, podemos não tiver implantado essas configurações para o Azure, mas se essas chaves estivessem na *Web. config* arquivo, as configurações mostradas no portal teria precedência.</span><span class="sxs-lookup"><span data-stu-id="4afdd-157">In our example, we did not deploy these settings to Azure, but if these keys were in the *web.config* file, the settings shown on the portal would take precedence.</span></span>

<span data-ttu-id="4afdd-158">Uma prática recomendada é seguir um [fluxo de trabalho DevOps](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) e use [do Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (ou outra estrutura, como [Chef](http://www.opscode.com/chef/) ou [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) para Automatize a definir esses valores no Azure.</span><span class="sxs-lookup"><span data-stu-id="4afdd-158">A best practice is to follow a [DevOps workflow](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) and use [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (or another framework such as [Chef](http://www.opscode.com/chef/) or [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) to automate setting these values in Azure.</span></span> <span data-ttu-id="4afdd-159">Usa o seguinte script do PowerShell [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) para exportar os segredos criptografados em disco:</span><span class="sxs-lookup"><span data-stu-id="4afdd-159">The following PowerShell script uses [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) to export the encrypted secrets to disk:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample6.ps1)]

<span data-ttu-id="4afdd-160">No script acima, 'Name' é o nome da chave secreta, tais como '&quot;FB\_AppSecret&quot; ou "TwitterSecret".</span><span class="sxs-lookup"><span data-stu-id="4afdd-160">In the script above, ‘Name' is the name of the secret key, such as ‘&quot;FB\_AppSecret&quot; or "TwitterSecret".</span></span> <span data-ttu-id="4afdd-161">Você pode exibir o arquivo ".credential" criado pelo script no seu navegador.</span><span class="sxs-lookup"><span data-stu-id="4afdd-161">You can view the ".credential" file created by the script in your browser.</span></span> <span data-ttu-id="4afdd-162">O trecho a seguir testa cada um dos arquivos de credencial e define os segredos do aplicativo web nomeados:</span><span class="sxs-lookup"><span data-stu-id="4afdd-162">The snippet below tests each of the credential files and sets the secrets for the named web app:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample7.ps1)]

> [!WARNING]
> <span data-ttu-id="4afdd-163">Security - não incluem senhas ou outros segredos no script do PowerShell, fazendo derrotas caso a finalidade do uso de um script do PowerShell para implantar dados confidenciais.</span><span class="sxs-lookup"><span data-stu-id="4afdd-163">Security - Don't include passwords or other secrets in the PowerShell script, doing so defeats the purpose of using a PowerShell script to deploy sensitive data.</span></span> <span data-ttu-id="4afdd-164">O [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet fornece um mecanismo seguro para obter uma senha.</span><span class="sxs-lookup"><span data-stu-id="4afdd-164">The [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet provides a secure mechanism to obtain a password.</span></span> <span data-ttu-id="4afdd-165">Usando um prompt de interface do usuário pode impedir o vazamento de uma senha.</span><span class="sxs-lookup"><span data-stu-id="4afdd-165">Using a UI prompt can prevent leaking a password.</span></span>


### <a name="deploying-db-connection-strings"></a><span data-ttu-id="4afdd-166">Implantação de cadeias de caracteres de conexão de banco de dados</span><span class="sxs-lookup"><span data-stu-id="4afdd-166">Deploying DB connection strings</span></span>

<span data-ttu-id="4afdd-167">Cadeias de caracteres de conexão de banco de dados são tratadas da mesma forma para as configurações do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4afdd-167">DB connection strings are handled similarly to app settings.</span></span> <span data-ttu-id="4afdd-168">Se você implantar seu aplicativo web do Visual Studio, a cadeia de caracteres de conexão será configurada para você.</span><span class="sxs-lookup"><span data-stu-id="4afdd-168">If you deploy your web app from Visual Studio, the connection string will be configured for you.</span></span> <span data-ttu-id="4afdd-169">Você pode verificar isso no portal.</span><span class="sxs-lookup"><span data-stu-id="4afdd-169">You can verify this in the portal.</span></span> <span data-ttu-id="4afdd-170">É a maneira recomendada para definir a cadeia de conexão com o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4afdd-170">The recommended way to set the connection string is with PowerShell.</span></span> <span data-ttu-id="4afdd-171">Para obter um exemplo de um script do PowerShell a cria um site e um banco de dados e define a cadeia de caracteres de conexão no site de download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) da [biblioteca de Script do Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="4afdd-171">For an example of a PowerShell script the creates a website and database and sets the connection string in the website, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span>

<a id="not"></a>
## <a name="notes-for-php"></a><span data-ttu-id="4afdd-172">Notas do PHP</span><span class="sxs-lookup"><span data-stu-id="4afdd-172">Notes for PHP</span></span>

<span data-ttu-id="4afdd-173">Desde os pares chave-valor para ambos **configurações do aplicativo** e **cadeias de caracteres de conexão** são armazenados em variáveis de ambiente no serviço de aplicativo do Azure, os desenvolvedores que usam qualquer can de estruturas (como PHP) do aplicativo web com facilidade recupere esses valores.</span><span class="sxs-lookup"><span data-stu-id="4afdd-173">Since the key-value pairs for both **app settings** and **connection strings** are stored in environment variables on Azure App Service, developers that use any web app frameworks (such as PHP) can easily retrieve these values.</span></span> <span data-ttu-id="4afdd-174">Consulte de Stefan Schackow [Sites do Windows Azure: como cadeias de caracteres de aplicativo e o trabalho de cadeias de caracteres de Conexão](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) postagem de blog que mostra um trecho de código PHP para ler as configurações do aplicativo e cadeias de caracteres de conexão.</span><span class="sxs-lookup"><span data-stu-id="4afdd-174">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) blog post which shows a PHP snippet to read app settings and connection strings.</span></span>

## <a name="notes-for-on-premises-servers"></a><span data-ttu-id="4afdd-175">Observações para os servidores no local</span><span class="sxs-lookup"><span data-stu-id="4afdd-175">Notes for on-premises servers</span></span>

<span data-ttu-id="4afdd-176">Se você estiver implantando em servidores da web no local, você pode ajudar a proteger segredos por [criptografar seções de configuração dos arquivos de configuração](https://msdn.microsoft.com/library/ff647398.aspx).</span><span class="sxs-lookup"><span data-stu-id="4afdd-176">If you are deploying to on-premises web servers, you can help secure secrets by [encrypting the configuration sections of configuration files](https://msdn.microsoft.com/library/ff647398.aspx).</span></span> <span data-ttu-id="4afdd-177">Como alternativa, você pode usar a mesma abordagem recomendada para sites do Azure: Manter configurações de desenvolvimento em arquivos de configuração e usar valores de variáveis de ambiente para as configurações de produção.</span><span class="sxs-lookup"><span data-stu-id="4afdd-177">As an alternative, you can use the same approach recommended for Azure Websites: keep development settings in configuration files, and use environment variable values for production settings.</span></span> <span data-ttu-id="4afdd-178">Nesse caso, no entanto, você precisa escrever o código do aplicativo para a funcionalidade que é automático nos sites do Azure: recuperar as configurações de variáveis de ambiente e usar esses valores no lugar do arquivo de configuração ou usar o arquivo de configuração quando variáveis de ambiente não foram encontradas.</span><span class="sxs-lookup"><span data-stu-id="4afdd-178">In this case, however, you have to write application code for functionality that is automatic in Azure Websites: retrieve settings from environment variables and use those values in place of configuration file settings, or use configuration file settings when environment variables are not found.</span></span>

<a id="addRes"></a>
## <a name="additional-resources"></a><span data-ttu-id="4afdd-179">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="4afdd-179">Additional Resources</span></span>

<span data-ttu-id="4afdd-180">Para obter um exemplo de um PowerShell script que cria um aplicativo web + banco de dados, define a cadeia de caracteres de conexão + configurações do aplicativo, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) da [biblioteca de Script do Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="4afdd-180">For an example of a PowerShell script that creates a web app + database, sets the connection string + app settings, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span> 

<span data-ttu-id="4afdd-181">Consulte de Stefan Schackow [Windows Azure Web Sites: como cadeias de caracteres de aplicativo e Conexão cadeias de caracteres de trabalho](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span><span class="sxs-lookup"><span data-stu-id="4afdd-181">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span></span>


<span data-ttu-id="4afdd-182">Agradecemos Barry Dorrans ( [ @blowdart ](https://twitter.com/blowdart) ) e Carlos Farre revisão.</span><span class="sxs-lookup"><span data-stu-id="4afdd-182">Special thanks to Barry Dorrans ( [@blowdart](https://twitter.com/blowdart) ) and Carlos Farre for reviewing.</span></span>
