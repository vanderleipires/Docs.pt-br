
<span data-ttu-id="f6e45-101">Abordaremos [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) no próximo tutorial.</span><span class="sxs-lookup"><span data-stu-id="f6e45-101">We cover [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) in the next tutorial.</span></span> <span data-ttu-id="f6e45-102">O atributo [Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) especifica o que deve ser exibido no nome de um campo (neste caso, “Release Date” em vez de “ReleaseDate”).</span><span class="sxs-lookup"><span data-stu-id="f6e45-102">The [Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) attribute specifies what to display for the name of a field (in this case "Release Date" instead of "ReleaseDate").</span></span> <span data-ttu-id="f6e45-103">O atributo [DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) especifica o tipo de dados (Data) e, portanto, as informações de hora armazenadas no campo não são exibidas.</span><span class="sxs-lookup"><span data-stu-id="f6e45-103">The [DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) attribute specifies the type of the data (Date), so the time information stored in the field isn't displayed.</span></span>

<span data-ttu-id="f6e45-104">A anotação de dados `[Column(TypeName = "decimal(18, 2)")]` é necessária para que o Entity Framework Core possa mapear corretamente o `Price` para a moeda no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f6e45-104">The `[Column(TypeName = "decimal(18, 2)")]` data annotation is required so Entity Framework Core can correctly map `Price` to currency in the database.</span></span> <span data-ttu-id="f6e45-105">Para obter mais informações, veja [Tipos de Dados](/ef/core/modeling/relational/data-types).</span><span class="sxs-lookup"><span data-stu-id="f6e45-105">For more information, see [Data Types](/ef/core/modeling/relational/data-types).</span></span>

<span data-ttu-id="f6e45-106">Procure o controlador `Movies` e mantenha o ponteiro do mouse pressionado sobre um link **Editar** para ver a URL de destino.</span><span class="sxs-lookup"><span data-stu-id="f6e45-106">Browse to the `Movies` controller and hold the mouse pointer over an **Edit** link to see the target URL.</span></span>

![São mostrados uma janela do navegador com o mouse sobre o link de edição e um link da URL http://localhost:1234/Movies/Edit/5](~/tutorials/first-mvc-app/controller-methods-views/_static/edit7.png)

<span data-ttu-id="f6e45-108">Os links **Editar**, **Detalhes** e **Excluir** são gerados pelo Auxiliar de Marcação de Âncora do MVC Core no arquivo *Views/Movies/Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="f6e45-108">The **Edit**, **Details**, and **Delete** links are generated by the Core MVC Anchor Tag Helper in the *Views/Movies/Index.cshtml* file.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/IndexOriginal.cshtml?highlight=1-3&range=46-50)]

<span data-ttu-id="f6e45-109">Os [Auxiliares de Marcação](xref:mvc/views/tag-helpers/intro) permitem que o código do servidor participe da criação e renderização de elementos HTML em arquivos do Razor.</span><span class="sxs-lookup"><span data-stu-id="f6e45-109">[Tag Helpers](xref:mvc/views/tag-helpers/intro) enable server-side code to participate in creating and rendering HTML elements in Razor files.</span></span> <span data-ttu-id="f6e45-110">No código acima, o `AnchorTagHelper` gera dinamicamente o valor do atributo `href` HTML com base na ID de rota e no método de ação do controlador. Use a opção **Exibir Código-fonte** em seu navegador favorito ou as ferramentas do desenvolvedor para examinar a marcação gerada.</span><span class="sxs-lookup"><span data-stu-id="f6e45-110">In the code above, the `AnchorTagHelper` dynamically generates the HTML `href` attribute value from the controller action method and route id. You use **View Source** from your favorite browser or use the developer tools to examine the generated markup.</span></span> <span data-ttu-id="f6e45-111">Uma parte do HTML gerado é mostrada abaixo:</span><span class="sxs-lookup"><span data-stu-id="f6e45-111">A portion of the generated HTML is shown below:</span></span>

```html
 <td>
    <a href="/Movies/Edit/4"> Edit </a> |
    <a href="/Movies/Details/4"> Details </a> |
    <a href="/Movies/Delete/4"> Delete </a>
</td>
```

<span data-ttu-id="f6e45-112">Lembre-se do formato do [roteamento](xref:mvc/controllers/routing) definido no arquivo *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="f6e45-112">Recall the format for [routing](xref:mvc/controllers/routing) set in the *Startup.cs* file:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="f6e45-113">O ASP.NET Core converte `http://localhost:1234/Movies/Edit/4` de uma solicitação no método de ação `Edit` do controlador `Movies` com o parâmetro `Id` igual a 4.</span><span class="sxs-lookup"><span data-stu-id="f6e45-113">ASP.NET Core translates `http://localhost:1234/Movies/Edit/4` into a request to the `Edit` action method of the `Movies` controller with the parameter `Id` of 4.</span></span> <span data-ttu-id="f6e45-114">(Os métodos do controlador também são conhecidos como métodos de ação.)</span><span class="sxs-lookup"><span data-stu-id="f6e45-114">(Controller methods are also known as action methods.)</span></span>

<span data-ttu-id="f6e45-115">Os [Auxiliares de Marcação](xref:mvc/views/tag-helpers/intro) são um dos novos recursos mais populares do ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="f6e45-115">[Tag Helpers](xref:mvc/views/tag-helpers/intro) are one of the most popular new features in ASP.NET Core.</span></span> <span data-ttu-id="f6e45-116">Consulte [Recursos adicionais](#additional-resources) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="f6e45-116">See [Additional resources](#additional-resources) for more information.</span></span>

<span data-ttu-id="f6e45-117">Abra o controlador `Movies` e examine os dois métodos de ação `Edit`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-117">Open the `Movies` controller and examine the two `Edit` action methods.</span></span> <span data-ttu-id="f6e45-118">O código a seguir mostra o método `HTTP GET Edit`, que busca o filme e popula o formato de edição gerado pelo arquivo *Edit.cshtml* do Razor.</span><span class="sxs-lookup"><span data-stu-id="f6e45-118">The following code shows the `HTTP GET Edit` method, which fetches the movie and populates the edit form generated by the *Edit.cshtml* Razor file.</span></span>

::: moniker range=">= aspnetcore-2.1"
<span data-ttu-id="f6e45-119">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-119">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]</span></span>

<span data-ttu-id="f6e45-120">O código a seguir mostra o método `HTTP POST Edit`, que processa os valores de filmes postados:</span><span class="sxs-lookup"><span data-stu-id="f6e45-120">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

<span data-ttu-id="f6e45-121">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-121">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]</span></span>
::: moniker-end
::: moniker range="<= aspnetcore-2.0"
<span data-ttu-id="f6e45-122">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-122">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]</span></span>

<span data-ttu-id="f6e45-123">O código a seguir mostra o método `HTTP POST Edit`, que processa os valores de filmes postados:</span><span class="sxs-lookup"><span data-stu-id="f6e45-123">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

<span data-ttu-id="f6e45-124">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-124">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]</span></span>
::: moniker-end

<span data-ttu-id="f6e45-125">O atributo `[Bind]` é uma maneira de proteger contra o [excesso de postagem](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span><span class="sxs-lookup"><span data-stu-id="f6e45-125">The `[Bind]` attribute is one way to protect against [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span></span> <span data-ttu-id="f6e45-126">Você somente deve incluir as propriedades do atributo `[Bind]` que deseja alterar.</span><span class="sxs-lookup"><span data-stu-id="f6e45-126">You should only include properties in the `[Bind]` attribute that you want to change.</span></span> <span data-ttu-id="f6e45-127">Consulte [Proteger o controlador contra o excesso de postagem](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="f6e45-127">See [Protect your controller from over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application) for more information.</span></span> <span data-ttu-id="f6e45-128">[ViewModels](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) fornece uma abordagem alternativa para prevenir o excesso de postagem.</span><span class="sxs-lookup"><span data-stu-id="f6e45-128">[ViewModels](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) provide an alternative approach to prevent over-posting.</span></span>

<span data-ttu-id="f6e45-129">Observe se o segundo método de ação `Edit` é precedido pelo atributo `[HttpPost]`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-129">Notice the second `Edit` action method is preceded by the `[HttpPost]` attribute.</span></span>

::: moniker range=">= aspnetcore-2.1"
<span data-ttu-id="f6e45-130">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2&highlight=1)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-130">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2&highlight=1)]</span></span>
::: moniker-end
::: moniker range="<= aspnetcore-2.0"
<span data-ttu-id="f6e45-131">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2&highlight=4)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-131">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2&highlight=4)]</span></span>
::: moniker-end

<span data-ttu-id="f6e45-132">O atributo `HttpPost` especifica que esse método `Edit` pode ser invocado *somente* para solicitações `POST`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-132">The `HttpPost` attribute specifies that this `Edit` method can be invoked *only* for `POST` requests.</span></span> <span data-ttu-id="f6e45-133">Você pode aplicar o atributo `[HttpGet]` ao primeiro método de edição, mas isso não é necessário porque `[HttpGet]` é o padrão.</span><span class="sxs-lookup"><span data-stu-id="f6e45-133">You could apply the `[HttpGet]` attribute to the first edit method, but that's not necessary because `[HttpGet]` is the default.</span></span>

<span data-ttu-id="f6e45-134">O atributo `ValidateAntiForgeryToken` é usado para [prevenir a falsificação de uma solicitação](xref:security/anti-request-forgery) e é associado a um token antifalsificação gerado no arquivo de exibição de edição (*Views/Movies/Edit.cshtml*).</span><span class="sxs-lookup"><span data-stu-id="f6e45-134">The `ValidateAntiForgeryToken` attribute is used to [prevent forgery of a request](xref:security/anti-request-forgery) and is paired up with an anti-forgery token generated in the edit view file (*Views/Movies/Edit.cshtml*).</span></span> <span data-ttu-id="f6e45-135">O arquivo de exibição de edição gera o token antifalsificação com o [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms).</span><span class="sxs-lookup"><span data-stu-id="f6e45-135">The edit view file generates the anti-forgery token with the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/Edit.cshtml?range=9)]

<span data-ttu-id="f6e45-136">O [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms) gera um token antifalsificação oculto que deve corresponder ao token antifalsificação gerado `[ValidateAntiForgeryToken]` no método `Edit` do controlador Movies.</span><span class="sxs-lookup"><span data-stu-id="f6e45-136">The [Form Tag Helper](xref:mvc/views/working-with-forms) generates a hidden anti-forgery token that must match the `[ValidateAntiForgeryToken]` generated anti-forgery token in the `Edit` method of the Movies controller.</span></span> <span data-ttu-id="f6e45-137">Para obter mais informações, consulte [Falsificação de antissolicitação](xref:security/anti-request-forgery).</span><span class="sxs-lookup"><span data-stu-id="f6e45-137">For more information, see [Anti-Request Forgery](xref:security/anti-request-forgery).</span></span>

<span data-ttu-id="f6e45-138">O método `HttpGet Edit` usa o parâmetro `ID` de filme, pesquisa o filme usando o método `SingleOrDefaultAsync` do Entity Framework e retorna o filme selecionado para a exibição de Edição.</span><span class="sxs-lookup"><span data-stu-id="f6e45-138">The `HttpGet Edit` method takes the movie `ID` parameter, looks up the movie using the Entity Framework `SingleOrDefaultAsync` method, and returns the selected movie to the Edit view.</span></span> <span data-ttu-id="f6e45-139">Se um filme não for encontrado, `NotFound` (HTTP 404) será retornado.</span><span class="sxs-lookup"><span data-stu-id="f6e45-139">If a movie cannot be found, `NotFound` (HTTP 404) is returned.</span></span>

::: moniker range=">= aspnetcore-2.1"
<span data-ttu-id="f6e45-140">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-140">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]</span></span>
::: moniker-end
::: moniker range="<= aspnetcore-2.0"
<span data-ttu-id="f6e45-141">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-141">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]</span></span>
::: moniker-end

<span data-ttu-id="f6e45-142">Quando o sistema de scaffolding criou a exibição de Edição, ele examinou a classe `Movie` e o código criado para renderizar os elementos `<label>` e `<input>` de cada propriedade da classe.</span><span class="sxs-lookup"><span data-stu-id="f6e45-142">When the scaffolding system created the Edit view, it examined the `Movie` class and created code to render `<label>` and `<input>` elements for each property of the class.</span></span> <span data-ttu-id="f6e45-143">O seguinte exemplo mostra a exibição de Edição que foi gerada pelo sistema de scaffolding do Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="f6e45-143">The following example shows the Edit view that was generated by the Visual Studio scaffolding system:</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/EditCopy.cshtml?highlight=1)]

<span data-ttu-id="f6e45-144">Observe como o modelo de exibição tem uma instrução `@model MvcMovie.Models.Movie` na parte superior do arquivo.</span><span class="sxs-lookup"><span data-stu-id="f6e45-144">Notice how the view template has a `@model MvcMovie.Models.Movie` statement at the top of the file.</span></span> <span data-ttu-id="f6e45-145">`@model MvcMovie.Models.Movie` especifica que a exibição espera que o modelo de exibição seja do tipo `Movie`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-145">`@model MvcMovie.Models.Movie` specifies that the view expects the model for the view template to be of type `Movie`.</span></span>

<span data-ttu-id="f6e45-146">O código com scaffolding usa vários métodos de Auxiliares de Marcação para simplificar a marcação HTML.</span><span class="sxs-lookup"><span data-stu-id="f6e45-146">The scaffolded code uses several Tag Helper methods to streamline the HTML markup.</span></span> <span data-ttu-id="f6e45-147">O – [Auxiliar de Marcação de Rótulo](xref:mvc/views/working-with-forms) exibe o nome do campo (“Title”, “ReleaseDate”, “Genre” ou “Price”).</span><span class="sxs-lookup"><span data-stu-id="f6e45-147">The - [Label Tag Helper](xref:mvc/views/working-with-forms) displays the name of the field ("Title", "ReleaseDate", "Genre", or "Price").</span></span> <span data-ttu-id="f6e45-148">O [Auxiliar de Marcação de Entrada](xref:mvc/views/working-with-forms) renderiza um elemento `<input>` HTML.</span><span class="sxs-lookup"><span data-stu-id="f6e45-148">The [Input Tag Helper](xref:mvc/views/working-with-forms) renders an HTML `<input>` element.</span></span> <span data-ttu-id="f6e45-149">O [Auxiliar de Marcação de Validação](xref:mvc/views/working-with-forms) exibe todas as mensagens de validação associadas a essa propriedade.</span><span class="sxs-lookup"><span data-stu-id="f6e45-149">The [Validation Tag Helper](xref:mvc/views/working-with-forms) displays any validation messages associated with that property.</span></span>

<span data-ttu-id="f6e45-150">Execute o aplicativo e navegue para a URL `/Movies`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-150">Run the application and navigate to the `/Movies` URL.</span></span> <span data-ttu-id="f6e45-151">Clique em um link **Editar**.</span><span class="sxs-lookup"><span data-stu-id="f6e45-151">Click an **Edit** link.</span></span> <span data-ttu-id="f6e45-152">No navegador, exiba a origem da página.</span><span class="sxs-lookup"><span data-stu-id="f6e45-152">In the browser, view the source for the page.</span></span> <span data-ttu-id="f6e45-153">O HTML gerado para o elemento `<form>` é mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="f6e45-153">The generated HTML for the `<form>` element is shown below.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Shared/edit_view_source.html?highlight=1,6,10,17,24,28)]

<span data-ttu-id="f6e45-154">Os elementos `<input>` estão em um elemento `HTML <form>` cujo atributo `action` está definido para ser postado para a URL `/Movies/Edit/id`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-154">The `<input>` elements are in an `HTML <form>` element whose `action` attribute is set to post to the `/Movies/Edit/id` URL.</span></span> <span data-ttu-id="f6e45-155">Os dados de formulário serão postados com o servidor quando o botão `Save` receber um clique.</span><span class="sxs-lookup"><span data-stu-id="f6e45-155">The form data will be posted to the server when the `Save` button is clicked.</span></span> <span data-ttu-id="f6e45-156">A última linha antes do elemento `</form>` de fechamento mostra o token [XSRF](xref:security/anti-request-forgery) oculto gerado pelo [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms).</span><span class="sxs-lookup"><span data-stu-id="f6e45-156">The last line before the closing `</form>` element shows the hidden [XSRF](xref:security/anti-request-forgery) token generated by the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

## <a name="processing-the-post-request"></a><span data-ttu-id="f6e45-157">Processando a solicitação POST</span><span class="sxs-lookup"><span data-stu-id="f6e45-157">Processing the POST Request</span></span>

<span data-ttu-id="f6e45-158">A lista a seguir mostra a versão `[HttpPost]` do método de ação `Edit`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-158">The following listing shows the `[HttpPost]` version of the `Edit` action method.</span></span>

::: moniker range=">= aspnetcore-2.1"
<span data-ttu-id="f6e45-159">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-159">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2)]</span></span>
::: moniker-end
::: moniker range="<= aspnetcore-2.0"
<span data-ttu-id="f6e45-160">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]</span><span class="sxs-lookup"><span data-stu-id="f6e45-160">[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]</span></span>
::: moniker-end

<span data-ttu-id="f6e45-161">O atributo `[ValidateAntiForgeryToken]` valida o token [XSRF](xref:security/anti-request-forgery) oculto gerado pelo gerador de tokens antifalsificação no [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms)</span><span class="sxs-lookup"><span data-stu-id="f6e45-161">The `[ValidateAntiForgeryToken]` attribute validates the hidden [XSRF](xref:security/anti-request-forgery) token generated by the anti-forgery token generator in the [Form Tag Helper](xref:mvc/views/working-with-forms)</span></span>

<span data-ttu-id="f6e45-162">O sistema de [associação de modelos](xref:mvc/models/model-binding) usa os valores de formulário postados e cria um objeto `Movie` que é passado como o parâmetro `movie`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-162">The [model binding](xref:mvc/models/model-binding) system takes the posted form values and creates a `Movie` object that's passed as the `movie` parameter.</span></span> <span data-ttu-id="f6e45-163">O método `ModelState.IsValid` verifica se os dados enviados no formulário podem ser usados para modificar (editar ou atualizar) um objeto `Movie`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-163">The `ModelState.IsValid` method verifies that the data submitted in the form can be used to modify (edit or update) a `Movie` object.</span></span> <span data-ttu-id="f6e45-164">Se os dados forem válidos, eles serão salvos.</span><span class="sxs-lookup"><span data-stu-id="f6e45-164">If the data is valid it's saved.</span></span> <span data-ttu-id="f6e45-165">Os dados de filmes atualizados (editados) são salvos no banco de dados chamando o método `SaveChangesAsync` do contexto de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f6e45-165">The updated (edited) movie data is saved to the database by calling the `SaveChangesAsync` method of database context.</span></span> <span data-ttu-id="f6e45-166">Depois de salvar os dados, o código redireciona o usuário para o método de ação `Index` da classe `MoviesController`, que exibe a coleção de filmes, incluindo as alterações feitas recentemente.</span><span class="sxs-lookup"><span data-stu-id="f6e45-166">After saving the data, the code redirects the user to the `Index` action method of the `MoviesController` class, which displays the movie collection, including the changes just made.</span></span>

<span data-ttu-id="f6e45-167">Antes que o formulário seja postado no servidor, a validação do lado do cliente verifica as regras de validação nos campos.</span><span class="sxs-lookup"><span data-stu-id="f6e45-167">Before the form is posted to the server, client side validation checks any validation rules on the fields.</span></span> <span data-ttu-id="f6e45-168">Se houver erros de validação, será exibida uma mensagem de erro e o formulário não será postado.</span><span class="sxs-lookup"><span data-stu-id="f6e45-168">If there are any validation errors, an error message is displayed and the form isn't posted.</span></span> <span data-ttu-id="f6e45-169">Se o JavaScript estiver desabilitado, você não terá a validação do lado do cliente, mas o servidor detectará os valores postados que não são válidos e os valores de formulário serão exibidos novamente com mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="f6e45-169">If JavaScript is disabled, you won't have client side validation but the server will detect the posted values that are not valid, and the form values will be redisplayed with error messages.</span></span> <span data-ttu-id="f6e45-170">Mais adiante no tutorial, examinamos a [Validação de Modelos](xref:mvc/models/validation) mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="f6e45-170">Later in the tutorial we examine [Model Validation](xref:mvc/models/validation) in more detail.</span></span> <span data-ttu-id="f6e45-171">O [Auxiliar de Marcação de Validação](xref:mvc/views/working-with-forms) no modelo de exibição *Views/Movies/Edit.cshtml* é responsável por exibir as mensagens de erro apropriadas.</span><span class="sxs-lookup"><span data-stu-id="f6e45-171">The [Validation Tag Helper](xref:mvc/views/working-with-forms) in the *Views/Movies/Edit.cshtml* view template takes care of displaying appropriate error messages.</span></span>

![Exibição de edição: uma exceção para o valor de Preço incorreto abc informa que o campo Preço deve ser um número.](~/tutorials/first-mvc-app/controller-methods-views/_static/val.png)

<span data-ttu-id="f6e45-174">Todos os métodos `HttpGet` no controlador de filme seguem um padrão semelhante.</span><span class="sxs-lookup"><span data-stu-id="f6e45-174">All the `HttpGet` methods in the movie controller follow a similar pattern.</span></span> <span data-ttu-id="f6e45-175">Eles obtêm um objeto de filme (ou uma lista de objetos, no caso de `Index`) e passam o objeto (modelo) para a exibição.</span><span class="sxs-lookup"><span data-stu-id="f6e45-175">They get a movie object (or list of objects, in the case of `Index`), and pass the object (model) to the view.</span></span> <span data-ttu-id="f6e45-176">O método `Create` passa um objeto de filme vazio para a exibição `Create`.</span><span class="sxs-lookup"><span data-stu-id="f6e45-176">The `Create` method passes an empty movie object to the `Create` view.</span></span> <span data-ttu-id="f6e45-177">Todos os métodos que criam, editam, excluem ou, de outro modo, modificam dados fazem isso na sobrecarga `[HttpPost]` do método.</span><span class="sxs-lookup"><span data-stu-id="f6e45-177">All the methods that create, edit, delete, or otherwise modify data do so in the `[HttpPost]` overload of the method.</span></span> <span data-ttu-id="f6e45-178">A modificação de dados em um método `HTTP GET` é um risco de segurança.</span><span class="sxs-lookup"><span data-stu-id="f6e45-178">Modifying data in an `HTTP GET` method is a security risk.</span></span> <span data-ttu-id="f6e45-179">A modificação de dados em um método `HTTP GET` também viola as melhores práticas de HTTP e o padrão [REST](http://rest.elkstein.org/) de arquitetura, que especifica que as solicitações GET não devem alterar o estado do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f6e45-179">Modifying data in an `HTTP GET` method also violates HTTP best practices and the architectural [REST](http://rest.elkstein.org/) pattern, which specifies that GET requests shouldn't change the state of your application.</span></span> <span data-ttu-id="f6e45-180">Em outras palavras, a execução de uma operação GET deve ser uma operação segura que não tem efeitos colaterais e não modifica os dados persistentes.</span><span class="sxs-lookup"><span data-stu-id="f6e45-180">In other words, performing a GET operation should be a safe operation that has no side effects and doesn't modify your persisted data.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f6e45-181">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="f6e45-181">Additional resources</span></span>

* [<span data-ttu-id="f6e45-182">Globalização e localização</span><span class="sxs-lookup"><span data-stu-id="f6e45-182">Globalization and localization</span></span>](xref:fundamentals/localization)
* [<span data-ttu-id="f6e45-183">Introdução aos auxiliares de marcação</span><span class="sxs-lookup"><span data-stu-id="f6e45-183">Introduction to Tag Helpers</span></span>](xref:mvc/views/tag-helpers/intro)
* [<span data-ttu-id="f6e45-184">Auxiliares de marca de autor</span><span class="sxs-lookup"><span data-stu-id="f6e45-184">Author Tag Helpers</span></span>](xref:mvc/views/tag-helpers/authoring)
* [<span data-ttu-id="f6e45-185">Falsificação anti-solicitação</span><span class="sxs-lookup"><span data-stu-id="f6e45-185">Anti-Request Forgery</span></span>](xref:security/anti-request-forgery)
* <span data-ttu-id="f6e45-186">Proteger o controlador contra o [excesso de postagem](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span><span class="sxs-lookup"><span data-stu-id="f6e45-186">Protect your controller from [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span></span>
* [<span data-ttu-id="f6e45-187">ViewModels</span><span class="sxs-lookup"><span data-stu-id="f6e45-187">ViewModels</span></span>](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/)
* [<span data-ttu-id="f6e45-188">Auxiliar de marcação de formulário</span><span class="sxs-lookup"><span data-stu-id="f6e45-188">Form Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="f6e45-189">Auxiliar de marcação de entrada</span><span class="sxs-lookup"><span data-stu-id="f6e45-189">Input Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="f6e45-190">Auxiliar de marcação de rótulo</span><span class="sxs-lookup"><span data-stu-id="f6e45-190">Label Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="f6e45-191">Selecionar o auxiliar de marcação</span><span class="sxs-lookup"><span data-stu-id="f6e45-191">Select Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="f6e45-192">Auxiliar de marcação de validação</span><span class="sxs-lookup"><span data-stu-id="f6e45-192">Validation Tag Helper</span></span>](xref:mvc/views/working-with-forms)
